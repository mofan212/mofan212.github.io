<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>FreeMarker æ¨¡æ¿å¼€å‘ | Mofan</title><meta name="author" content="é»˜çƒ¦,cy.mofan@foxmail.com"><meta name="copyright" content="é»˜çƒ¦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æœ¬æ–‡ä»‹ç»äº† FreeMarker æ¨¡æ¿å¼•æ“çš„æ¨¡æ¿å¼€å‘ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="FreeMarker æ¨¡æ¿å¼€å‘">
<meta property="og:url" content="https://mofan212.github.io/posts/FreeMarker-Template-Author's-Guide/">
<meta property="og:site_name" content="Mofan">
<meta property="og:description" content="æœ¬æ–‡ä»‹ç»äº† FreeMarker æ¨¡æ¿å¼•æ“çš„æ¨¡æ¿å¼€å‘ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/68.png">
<meta property="article:published_time" content="2020-11-19T16:00:00.000Z">
<meta property="article:modified_time" content="2025-06-26T16:00:00.000Z">
<meta property="article:author" content="é»˜çƒ¦">
<meta property="article:tag" content="FreeMarker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/68.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "FreeMarker æ¨¡æ¿å¼€å‘",
  "url": "https://mofan212.github.io/posts/FreeMarker-Template-Author's-Guide/",
  "image": "https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/68.png",
  "datePublished": "2020-11-19T16:00:00.000Z",
  "dateModified": "2025-06-26T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "é»˜çƒ¦",
      "url": "https://mofan212.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/favicon.png"><link rel="canonical" href="https://mofan212.github.io/posts/FreeMarker-Template-Author's-Guide/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: é»˜çƒ¦","link":"é“¾æ¥: ","source":"æ¥æº: Mofan","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  infinitegrid: {
    js: 'https://testingcf.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'FreeMarker æ¨¡æ¿å¼€å‘',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="referrer" content="no-referrer-when-downgrade" /><link rel="stylesheet" href="https://testingcf.jsdelivr.net/gh/mofan212/blog-static-resources@master/css/myStyle.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-screen-webfont@1.7.0/style.css" /><link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono-nl.min.css" /><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Mofan" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://testingcf.jsdelivr.net/gh/mofan212/blog-static-resources/css/minimal.min.css"/><script src="https://testingcf.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/avatar.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">174</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">54</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">37</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-book-reader"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/schedule/"><i class="fa-fw fas fa-list-alt"></i><span> è®¡åˆ’</span></a></div><div class="menus_item"><a class="site-page" href="/update/"><i class="fa-fw fas fa-tools"></i><span> ç»´æŠ¤</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-comments"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-sitemap"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/mine/"><i class="fa-fw fa fa-id-card"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child" href="/reward/"><i class="fa-fw fa-solid fa-coins"></i><span> èµåŠ©</span></a></li><li><a class="site-page child" href="/milestones/"><i class="fa-fw fa-solid fa-monument"></i><span> é‡Œç¨‹ç¢‘</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> å¼€å¾€</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/post_top_img.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Mofan</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-book-reader"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/schedule/"><i class="fa-fw fas fa-list-alt"></i><span> è®¡åˆ’</span></a></div><div class="menus_item"><a class="site-page" href="/update/"><i class="fa-fw fas fa-tools"></i><span> ç»´æŠ¤</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-comments"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-sitemap"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/mine/"><i class="fa-fw fa fa-id-card"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child" href="/reward/"><i class="fa-fw fa-solid fa-coins"></i><span> èµåŠ©</span></a></li><li><a class="site-page child" href="/milestones/"><i class="fa-fw fa-solid fa-monument"></i><span> é‡Œç¨‹ç¢‘</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> å¼€å¾€</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">FreeMarker æ¨¡æ¿å¼€å‘</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-11-19T16:00:00.000Z" title="å‘è¡¨äº 2020-11-20 00:00:00">2020-11-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-06-26T16:00:00.000Z" title="æ›´æ–°äº 2025-06-27 00:00:00">2025-06-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/TemplateEngine/">TemplateEngine</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">13.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>50åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;è·ç¦»æœ¬æ–‡ä¸Šæ¬¡æ›´æ–°å·²ç»è¿‡å»&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œè¯·æ³¨æ„æ—¶æ•ˆæ€§ã€‚&quot;,&quot;postUpdate&quot;:&quot;2025-06-27 00:00:00&quot;}" hidden></div>
    <style>
      .highlight-tools {
        background: #262931 !important;
      }
    </style>
    <html><head></head><body><p>å°é¢æ¥æºï¼šç”±åšä¸»ä¸ªäººç»˜åˆ¶ï¼Œå¦‚éœ€ä½¿ç”¨è¯·è”ç³»åšä¸»ã€‚</p>
<p>æœ¬æ–‡æ‘˜å½•è‡ªï¼š<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/toc.html">FreeMarker ä¸­æ–‡å®˜æ–¹å‚è€ƒæ‰‹å†Œ</a></p>
<h1 id="0-å‰è¨€"><a class="header-anchor" href="#0-å‰è¨€"></a>0. å‰è¨€</h1>
<p>å…¬å¸çš„é¡¹ç›®éœ€è¦ç”¨åˆ°æ¨¡æ¿å¼•æ“ FreeMarkerï¼Œå› æ­¤ï¼Œä¸ä¼šçš„æˆ‘ä¹Ÿå°±åªæœ‰å­¦ä¹ ã€‚</p>
<p>æ›¾ç»åœ¨å­¦ä¹  SpringBoot çš„æ—¶å€™ï¼Œå­¦ä¹ è¿‡å¦å¤–ä¸€ç§æ¨¡æ¿å¼•æ“ Thymeleafï¼Œè¿™ä¿©ä¹Ÿæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ˜¯ä¸åŒç‚¹ä¹ŸæŒºå¤šã€‚</p>
<p>æœ¬æ–‡åªä½œä¸ºä¸€ä¸ªå¤‡å¿˜å½•ï¼Œæˆ–è€…è¯´çŸ¥è¯†æ¢³ç†ï¼Œä¸ä½œä¸ºå…¥é—¨çº§æ•™ç¨‹ã€‚</p>
<p>å…¥é—¨çº§æ•™ç¨‹å»ºè®®æŸ¥çœ‹ï¼š<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/toc.html">FreeMarker ä¸­æ–‡å®˜æ–¹å‚è€ƒæ‰‹å†Œ</a>ï¼Œæœ¬æ–‡å¤§å¤šæ•°å†…å®¹æ‘˜å½•äºæ­¤æ‰‹å†Œã€‚</p>
<h1 id="1-FreeMarker-å…¥é—¨"><a class="header-anchor" href="#1-FreeMarker-å…¥é—¨"></a>1. FreeMarker å…¥é—¨</h1>
<h2 id="1-1-æ¨¡æ¿-æ•°æ®æ¨¡å‹-è¾“å‡º"><a class="header-anchor" href="#1-1-æ¨¡æ¿-æ•°æ®æ¨¡å‹-è¾“å‡º"></a>1.1 æ¨¡æ¿ + æ•°æ®æ¨¡å‹ = è¾“å‡º</h2>
<p>æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿å¼•æ“ï¼Œé‚£è‚¯å®šæ˜¯éœ€è¦ç¼–å†™æ¨¡æ¿çš„ã€‚ä½†æ˜¯ä¹Ÿä¸èƒ½åªæœ‰ä¸€ä¸ªå…‰æ¨¡æ¿ï¼Œè¿˜éœ€è¦æ•°æ®æ¥å¡«å……ã€‚</p>
<p>ä¸ºæ¨¡æ¿å‡†å¤‡çš„æ•°æ®æ•´ä½“è¢«ç§°ä½œä¸º <strong>æ•°æ®æ¨¡å‹</strong>ã€‚ æ¨¡æ¿ä½œè€…è¦å…³å¿ƒçš„æ˜¯ï¼Œæ•°æ®æ¨¡å‹æ˜¯æ ‘å½¢ç»“æ„ï¼ˆå°±åƒç¡¬ç›˜ä¸Šçš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼‰ï¼Œåœ¨è§†è§‰æ•ˆæœä¸Šï¼Œ æ•°æ®æ¨¡å‹å°±åƒæ˜¯ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>(root)</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- user = "Big Joe"</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- latestProduct</span></span>
<span class="line"><span>      |</span></span>
<span class="line"><span>      +- url = "products/greenmouse.html"</span></span>
<span class="line"><span>      |</span></span>
<span class="line"><span>      +- name = "green mouse"</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æ€»çš„æ¥è¯´ï¼Œæ¨¡æ¿å’Œæ•°æ®æ¨¡å‹æ˜¯ FreeMarker æ¥ç”Ÿæˆè¾“å‡ºæ‰€å¿…é¡»çš„ï¼Œå› æ­¤å°±æœ‰ï¼šæ¨¡æ¿ + æ•°æ®æ¨¡å‹ = è¾“å‡º</p>
<h2 id="1-2-æ•°æ®æ¨¡å‹"><a class="header-anchor" href="#1-2-æ•°æ®æ¨¡å‹"></a>1.2 æ•°æ®æ¨¡å‹</h2>
<blockquote>
<p>å“ˆå¸Œ</p>
</blockquote>
<p>æ•°æ®æ¨¡å‹çš„åŸºæœ¬ç»“æ„æ˜¯æ ‘çŠ¶çš„ã€‚ è¿™æ£µæ ‘å¯ä»¥å¾ˆå¤æ‚ï¼Œå¹¶ä¸”å¯ä»¥æœ‰å¾ˆå¤§çš„æ·±åº¦ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>(root)</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- animals</span></span>
<span class="line"><span>  |   |</span></span>
<span class="line"><span>  |   +- mouse</span></span>
<span class="line"><span>  |   |   |   </span></span>
<span class="line"><span>  |   |   +- size = "small"</span></span>
<span class="line"><span>  |   |   |   </span></span>
<span class="line"><span>  |   |   +- price = 50</span></span>
<span class="line"><span>  |   |</span></span>
<span class="line"><span>  |   +- elephant</span></span>
<span class="line"><span>  |   |   |   </span></span>
<span class="line"><span>  |   |   +- size = "large"</span></span>
<span class="line"><span>  |   |   |   </span></span>
<span class="line"><span>  |   |   +- price = 5000</span></span>
<span class="line"><span>  |   |</span></span>
<span class="line"><span>  |   +- python</span></span>
<span class="line"><span>  |       |   </span></span>
<span class="line"><span>  |       +- size = "medium"</span></span>
<span class="line"><span>  |       |   </span></span>
<span class="line"><span>  |       +- price = 4999</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- message = "It is a test"</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- misc</span></span>
<span class="line"><span>      |</span></span>
<span class="line"><span>      +- foo = "Something"</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ä¸Šå›¾ä¸­çš„å˜é‡æ‰®æ¼”ç›®å½•çš„è§’è‰²ï¼ˆæ¯”å¦‚ <code>root</code>ã€<code>animals</code>ã€<code>mouse</code>ã€ <code>elephant</code>ã€ <code>python</code>ã€ <code>misc</code>ï¼‰è¢«ç§°ä¸º <strong>hashes</strong>ã€‚</p>
<p>å­˜å‚¨å•å€¼çš„å˜é‡ï¼ˆ<code>size</code>, <code>price</code>, <code>message</code> å’Œ <code>foo</code>ï¼‰ç§°ä¸º <strong>scalars</strong>ï¼ˆæ ‡é‡ï¼‰ã€‚</p>
<blockquote>
<p>åºåˆ—</p>
</blockquote>
<p>è¿˜æœ‰ä¸€ç§å¾ˆé‡è¦çš„å˜é‡æ˜¯ <strong>sequences</strong>ã€‚å®ƒä»¬åƒå“ˆå¸Œè¡¨é‚£æ ·å­˜å‚¨å­å˜é‡ï¼Œä½†æ˜¯å­å˜é‡æ²¡æœ‰åå­—ï¼Œå®ƒä»¬åªæ˜¯åˆ—è¡¨ä¸­çš„é¡¹ã€‚ æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªæ•°æ®æ¨¡å‹ä¸­ï¼Œ<code>animals</code> å’Œ <code>misc.fruits</code> å°±æ˜¯åºåˆ—ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>(root)</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- animals</span></span>
<span class="line"><span>  |   |</span></span>
<span class="line"><span>  |   +- (1st)</span></span>
<span class="line"><span>  |   |   |</span></span>
<span class="line"><span>  |   |   +- name = "mouse"</span></span>
<span class="line"><span>  |   |   |</span></span>
<span class="line"><span>  |   |   +- size = "small"</span></span>
<span class="line"><span>  |   |   |</span></span>
<span class="line"><span>  |   |   +- price = 50</span></span>
<span class="line"><span>  |   |</span></span>
<span class="line"><span>  |   +- (2nd)</span></span>
<span class="line"><span>  |   |   |</span></span>
<span class="line"><span>  |   |   +- name = "elephant"</span></span>
<span class="line"><span>  |   |   |</span></span>
<span class="line"><span>  |   |   +- size = "large"</span></span>
<span class="line"><span>  |   |   |</span></span>
<span class="line"><span>  |   |   +- price = 5000</span></span>
<span class="line"><span>  |   |</span></span>
<span class="line"><span>  |   +- (3rd)</span></span>
<span class="line"><span>  |       |</span></span>
<span class="line"><span>  |       +- name = "python"</span></span>
<span class="line"><span>  |       |</span></span>
<span class="line"><span>  |       +- size = "medium"</span></span>
<span class="line"><span>  |       |</span></span>
<span class="line"><span>  |       +- price = 4999</span></span>
<span class="line"><span>  |</span></span>
<span class="line"><span>  +- misc</span></span>
<span class="line"><span>      |</span></span>
<span class="line"><span>      +- fruits</span></span>
<span class="line"><span>          |</span></span>
<span class="line"><span>          +- (1st) = "orange"</span></span>
<span class="line"><span>          |</span></span>
<span class="line"><span>          +- (2nd) = "banana"</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¦è®¿é—®åºåˆ—çš„å­å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·å½¢å¼çš„æ•°å­—ç´¢å¼•ä¸‹æ ‡ã€‚ ç´¢å¼•ä¸‹æ ‡ä» 0 å¼€å§‹ï¼ˆæ‡‚çš„éƒ½æ‡‚ ğŸ˜‚ï¼‰ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¦å¾—åˆ°ç¬¬ä¸€ä¸ªåŠ¨ç‰©çš„åç§°çš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆæ¥å†™ä»£ç  <code>animals[0].name</code>ã€‚è¦å¾—åˆ° <code>misc.fruits</code> ä¸­çš„ç¬¬äºŒé¡¹ï¼ˆå­—ç¬¦ä¸²<code>"banana"</code>ï¼‰å¯ä»¥è¿™ä¹ˆæ¥å†™ <code>misc.fruits[1]</code>ã€‚</p>
<p><strong>æ ‡é‡ç±»å‹</strong> å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹çš„ç±»åˆ«ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²</li>
<li>æ•°å­—ï¼Œéœ€è¦æ³¨æ„ <code>212</code> å’Œ <code>"212"</code> çš„åŒºåˆ«</li>
<li>æ—¥æœŸ / æ—¶é—´ï¼šå¯ä»¥æ˜¯æ—¥æœŸ - æ—¶é—´æ ¼å¼ï¼ˆå­˜å‚¨æŸä¸€å¤©çš„æ—¥æœŸå’Œæ—¶é—´ï¼‰ï¼Œæˆ–è€…æ˜¯æ—¥æœŸï¼ˆåªæœ‰æ—¥æœŸï¼Œæ²¡æœ‰æ—¶é—´ï¼‰ï¼Œæˆ–è€…æ˜¯æ—¶é—´ï¼ˆåªæœ‰æ—¶é—´ï¼Œæ²¡æœ‰æ—¥æœŸï¼‰ã€‚</li>
<li>å¸ƒå°”å€¼</li>
</ul>
<p>è¿˜æœ‰ä¸€äº›å…¶å®ƒæ›´ä¸ºé«˜çº§çš„ç±»å‹ï¼Œæ¯”å¦‚æ–¹æ³•å’ŒæŒ‡ä»¤ã€‚</p>
<h2 id="1-3-æŒ‡ä»¤"><a class="header-anchor" href="#1-3-æŒ‡ä»¤"></a>1.3 æŒ‡ä»¤</h2>
<p>èƒ½è¢« FreeMarker æ‰€è§£æçš„ç‰¹æ®Šä»£ç ç‰‡æ®µæœ‰ï¼š</p>
<ol>
<li><code>${...}</code>ï¼šè¿™æ ·çš„è¡¨è¾¾å¼è¢«ç§°ä¸º <strong>interpolation</strong>ï¼ˆæ’å€¼ï¼‰ã€‚</li>
<li><strong>FTL æ ‡ç­¾</strong>ï¼šè¿™äº›æ ‡ç­¾çš„åå­—ä»¥ <code>#</code> å¼€å¤´ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„ FTL æ ‡ç­¾åˆ™éœ€è¦ä½¿ç”¨ <code>@</code> æ¥ä»£æ›¿ <code>#</code>ï¼ŒFTL æ ‡ç­¾ä¹Ÿè¢«æˆä¸º <strong>æŒ‡ä»¤</strong>ã€‚</li>
<li><strong>æ³¨é‡Š</strong>ï¼šä½¿ç”¨ <code>&lt;#--</code> and <code>--&gt;</code> æ¥æ ‡è¯†ã€‚ ä¸ HTML æ³¨é‡Šä¸åŒï¼ŒFTL æ³¨é‡Šä¸å‡ºç°åœ¨è®¿é—®è€…çš„é¡µé¢ä¸­ï¼Œå› ä¸º FreeMarker ä¼šè·³è¿‡å®ƒä»¬ã€‚</li>
</ol>
<blockquote>
<p>if æŒ‡ä»¤çš„åŸºæœ¬ä½¿ç”¨</p>
</blockquote>
<ol>
<li><code>&lt;#if condition&gt;</code> conditionä¸º true æ‰§è¡Œå†…å®¹ï¼Œä¸º false å°±ç•¥è¿‡ <code>&lt;/#if&gt;</code></li>
<li><code>&lt;#if&gt;</code> æ ‡ç­¾ä½“å†…å¯ä»¥å­˜åœ¨æ ‡ç­¾ <code>&lt;# else&gt;</code></li>
<li><code>&lt;#if&gt;</code> æ ‡ç­¾ä½“å†…è¿˜å¯ä»¥å­˜åœ¨æ ‡ç­¾ <code>&lt;# elseif&gt;</code></li>
</ol>
<blockquote>
<p>list æŒ‡ä»¤çš„åŸºæœ¬ä½¿ç”¨</p>
</blockquote>
<p><code>&lt;#list&gt;</code> æ ‡ç­¾å¯ä»¥ç”¨æ¥æ˜¾ç¤ºåˆ—è¡¨å†…å®¹ï¼ŒåŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list sequence as loopVariable&gt; repeatThis &lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°±æˆ‘ä¸ªäººçš„ç†è§£æ¥è¯´ï¼Œ<code>&lt;#list&gt;</code> æ ‡ç­¾å°±å’Œå¾ªç¯ä¸€æ ·ã€‚</p>
<p><code>&lt;#list&gt;</code> æ ‡ç­¾å†…è¿˜å¯ä»¥æœ‰ <code>&lt;#items&gt;</code> æ ‡ç­¾ã€ <code>&lt;#sep&gt;</code> æ ‡ç­¾ã€<code>&lt;# else&gt;</code> æ ‡ç­¾ã€‚</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list misc.fruits&gt;</span></span>
<span class="line"><span>  &lt;ul&gt;</span></span>
<span class="line"><span>    &lt;#items as fruit&gt;</span></span>
<span class="line"><span>      &lt;li&gt;${fruit}</span></span>
<span class="line"><span>    &lt;/#items&gt;</span></span>
<span class="line"><span>  &lt;/ul&gt;</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å¦‚æœ <code>&lt;#list&gt;</code> æ ‡ç­¾å†…æœ‰ <code>&lt;#items&gt;</code> æ ‡ç­¾ï¼Œé‚£ä¹ˆ<code>list</code> æŒ‡ä»¤å°†åˆ—è¡¨è§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œ åœ¨ <code>items</code> æŒ‡ä»¤ä¸­çš„éƒ¨åˆ†æ‰ä¼šä¸ºæ¯ä¸ªæ°´æœé‡å¤ã€‚ å¦‚æœæˆ‘ä»¬æœ‰ 0 ä¸ªæ°´æœï¼Œé‚£ä¹ˆåœ¨ <code>list</code> ä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½è¢«ç•¥è¿‡äº†ï¼Œ å› æ­¤å°±ä¸ä¼šæœ‰ <code>&lt;ul&gt;</code> æ ‡ç­¾äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§åœºæ™¯ï¼Œä½¿ç”¨åˆ†éš”ç¬¦æ¥åˆ—å‡ºä¸€äº›æ°´æœï¼Œæ¯”å¦‚ç”¨é€—å·ä½œä¸ºåˆ†éš”ç¬¦ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;p&gt;Fruits: &lt;#list misc.fruits as fruit&gt;${fruit}&lt;#sep&gt;, &lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ç„¶åå°±ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;p&gt;Fruits: orange, banana</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¢« <code>sep</code> è¦†ç›–çš„éƒ¨åˆ†åªæœ‰å½“è¿˜æœ‰ä¸‹ä¸€é¡¹æ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼Œå› æ­¤æœ€åä¸€ä¸ªæ°´æœåé¢ä¸ä¼šæœ‰é€—å·ã€‚</p>
<p><code>list</code> æŒ‡ä»¤ä¹Ÿåƒ <code>if</code> æŒ‡ä»¤é‚£æ ·ï¼Œå¯ä»¥æœ‰ <code>else</code> éƒ¨åˆ†ï¼Œå¦‚æœåˆ—è¡¨ä¸­æœ‰ 0 ä¸ªå…ƒç´ æ—¶å°±ä¼šè¢«æ‰§è¡Œï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;p&gt;Fruits: &lt;#list misc.fruits as fruit&gt;${fruit}&lt;#sep&gt;, &lt;#else&gt;None&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å½“ç„¶ï¼ŒæŒ‡ä»¤ <code>list</code>ã€<code>items</code>ã€<code>sep</code> å’Œ <code>else</code> å¯ä»¥è”åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<blockquote>
<p>include æŒ‡ä»¤çš„åŸºæœ¬ä½¿ç”¨</p>
</blockquote>
<p>ä½¿ç”¨ <code>include</code> æŒ‡ä»¤ï¼Œ å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­æ’å…¥å…¶ä»–æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p>æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç‰ˆæƒä¿¡æ¯å•ç‹¬å­˜æ”¾åœ¨é¡µé¢æ–‡ä»¶ <code>copyright_footer.html</code> ä¸­ï¼š</p>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">hr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">i</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">Copyright (c) 2020 &lt;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://mofan212.github.io/"</span><span style="color:#ABB2BF">&gt;Mofan&lt;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">&gt;,</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">br</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">All Rights Reserved.</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;/</span><span style="color:#E06C75">i</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å½“éœ€è¦ç”¨åˆ°è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>include</code> æŒ‡ä»¤æ¥æ’å…¥ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;html&gt;</span></span>
<span class="line"><span>&lt;head&gt;</span></span>
<span class="line"><span>  &lt;title&gt;Test page&lt;/title&gt;</span></span>
<span class="line"><span>&lt;/head&gt;</span></span>
<span class="line"><span>&lt;body&gt;</span></span>
<span class="line"><span>  &lt;h1&gt;Test page&lt;/h1&gt;</span></span>
<span class="line"><span>  &lt;p&gt;Blah blah...</span></span>
<span class="line"><span>  &lt;#include "/copyright_footer.html"&gt;</span></span>
<span class="line"><span>&lt;/body&gt;</span></span>
<span class="line"><span>&lt;/html&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å½“ä¿®æ”¹äº† <code>copyright_footer.html</code> æ–‡ä»¶ï¼Œ é‚£ä¹ˆè®¿é—®è€…åœ¨æ‰€æœ‰é¡µé¢éƒ½ä¼šçœ‹åˆ°ç‰ˆæƒå£°æ˜çš„æ–°å†…å®¹ã€‚</p>
<p><strong>é‡ç”¨ä»£ç ç‰‡æ®µçš„ä¸€ä¸ªæ›´æœ‰åŠ›çš„æ–¹å¼æ˜¯ä½¿ç”¨å®ã€‚</strong></p>
<p>åœ¨é¡µé¢ä¸Šä¹Ÿå¯ä»¥å¤šæ¬¡ä½¿ç”¨æŒ‡ä»¤ï¼Œè€Œä¸”æŒ‡ä»¤é—´ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°ç›¸äº’åµŒå¥—ã€‚æ¯”å¦‚ï¼Œåœ¨ <code>list</code> æŒ‡ä»¤ä¸­åµŒå¥— <code>if</code> æŒ‡ä»¤ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list animals as animal&gt;</span></span>
<span class="line"><span>    &lt;div&lt;#if animal.protected&gt; class="protected"&lt;/#if&gt;&gt;</span></span>
<span class="line"><span>    ${animal.name} for ${animal.price} Euros</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>Freemarker ä¸ä¼šè§£æ FTL æ ‡ç­¾ä»¥å¤–çš„æ–‡æœ¬ï¼Œç”šè‡³å¯åœ¨ HTML æ ‡ç­¾å†…å†™ FTL æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;div &lt;#if&gt;&lt;#/if&gt;&gt; å†…å®¹ &lt;/div&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p><mark>æ³¨æ„ï¼š</mark> FTL æ ‡ç­¾åŒºåˆ†å¸¦å°å†™ã€‚æ’å€¼åªèƒ½åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨ï¼ŒFTL æ ‡ç­¾ä¸å¯ä»¥åœ¨å…¶ä»– FTL æ ‡ç­¾å’Œæ’å€¼ä¸­ä½¿ç”¨ï¼Œæ³¨é‡Šå¯ä»¥æ”¾åœ¨ FTL æ ‡ç­¾å’Œæ’å€¼ä¸­ã€‚</p>
<p>FreeMarker å‚è€ƒæŒ‡ä»¤ï¼š<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_directives.html">æŒ‡ä»¤å‚è€ƒ</a></p>
<h2 id="1-4-å†…å»ºå‡½æ•°"><a class="header-anchor" href="#1-4-å†…å»ºå‡½æ•°"></a>1.4 å†…å»ºå‡½æ•°</h2>
<p>å†…å»ºå‡½æ•°å¾ˆåƒå­å˜é‡ï¼ˆæˆ–è€…è¯´ Java ä¸­çš„æ–¹æ³•ï¼‰ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯æ•°æ®æ¨¡å‹ä¸­çš„ä¸œè¥¿ï¼Œæ˜¯ FreeMarker åœ¨æ•°å€¼ä¸Šæ·»åŠ çš„ã€‚ ä¸ºäº†æ¸…æ™°å­å˜é‡æ˜¯å“ªéƒ¨åˆ†ï¼Œä½¿ç”¨ <code>?</code>ï¼ˆé—®å·ï¼‰ä»£æ›¿ <code>.</code>ï¼ˆç‚¹ï¼‰æ¥è®¿é—®å®ƒä»¬ã€‚å¸¸ç”¨å†…å»ºå‡½æ•°çš„ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>user?html</code> ç»™å‡º <code>user</code> çš„ HTML è½¬ä¹‰ç‰ˆæœ¬</li>
<li><code>user?upper_case</code> ç»™å‡º <code>user</code> å€¼çš„å¤§å†™ç‰ˆæœ¬</li>
<li><code>animal.name?cap_first</code> ç»™å‡º <code>animal.name</code> çš„é¦–å­—æ¯å¤§å†™ç‰ˆæœ¬</li>
<li><code>user?length</code> ç»™å‡º <code>user</code> å€¼ä¸­å­—ç¬¦çš„æ•°é‡</li>
<li><code>animals?size</code> ç»™å‡º <code>animals</code> åºåˆ—ä¸­é¡¹ç›®çš„ä¸ªæ•°</li>
<li>å¦‚æœåœ¨ <code>&lt;#list animals as animal&gt;</code> å’Œå¯¹åº”çš„ <code>&lt;/#list&gt;</code> æ ‡ç­¾ä¸­ï¼š
<ul>
<li><code>animal?index</code> ç»™å‡ºäº†åœ¨ <code>animals</code> ä¸­åŸºäº 0 å¼€å§‹çš„ <code>animal</code>çš„ç´¢å¼•å€¼</li>
<li><code>animal?counter</code> ä¹Ÿåƒ <code>index</code>ï¼Œ ä½†æ˜¯ç»™å‡ºçš„æ˜¯åŸºäº 1 çš„ç´¢å¼•å€¼</li>
<li><code>animal?item_parity</code> åŸºäºå½“å‰è®¡æ•°çš„å¥‡å¶æ€§ï¼Œç»™å‡ºå­—ç¬¦ä¸² â€œoddâ€ æˆ– â€œevenâ€ã€‚åœ¨ç»™ä¸åŒè¡Œç€è‰²æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨ <code>&lt;td class="${animal?item_parity}Row"&gt;</code>ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸€äº›å†…å»ºå‡½æ•°éœ€è¦å‚æ•°æ¥æŒ‡å®šè¡Œä¸ºï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>animal.protected?string("Y", "N")</code> åŸºäº <code>animal.protected</code> çš„å¸ƒå°”å€¼æ¥è¿”å›å­—ç¬¦ä¸² â€œYâ€ æˆ– â€œNâ€ã€‚</li>
<li><code>animal?item_cycle('lightRow','darkRow')</code> æ˜¯ä¹‹å‰ä»‹ç»çš„ <code>item_parity</code> æ›´ä¸ºå¸¸ç”¨çš„å˜ä½“å½¢å¼ã€‚</li>
<li><code>fruits?join(", ")</code> é€šè¿‡è¿æ¥æ‰€æœ‰é¡¹ï¼Œå°†åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œ åœ¨æ¯ä¸ªé¡¹ä¹‹é—´æ’å…¥å‚æ•°åˆ†éš”ç¬¦</li>
<li><code>user?starts_with("J")</code> æ ¹æ® <code>user</code> çš„é¦–å­—æ¯æ˜¯å¦æ˜¯ â€œJâ€ è¿”å›å¸ƒå°”å€¼ true æˆ– falseã€‚</li>
</ul>
<p>ä¸€äº›å†…å»ºå‡½æ•°å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬ä¹‰ï¼š</p>
<ul>
<li>Java è¯­è¨€è§„åˆ™çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼š<code>content?j_string</code></li>
<li>JavaScript è¯­è¨€è§„åˆ™çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼š<code>content?js_string</code></li>
<li>JSON è§„åˆ™çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼š<code>content?json_string</code></li>
</ul>
<p>å†…å»ºå‡½æ•°åº”ç”¨å¯ä»¥é“¾å¼æ“ä½œï¼Œæ¯”å¦‚<code>user?upper_case?html</code> ä¼šå…ˆè½¬æ¢ç”¨æˆ·ååˆ°å¤§å†™å½¢å¼ï¼Œä¹‹åå†è¿›è¡Œ HTML è½¬ä¹‰ã€‚</p>
<p>æ›´å¤šå†…å»ºå‡½æ•°å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_builtins.html">å†…å»ºå‡½æ•°å‚è€ƒ - FreeMarker ä¸­æ–‡å®˜æ–¹å‚è€ƒæ‰‹å†Œ</a></p>
<blockquote>
<p>å“ˆå¸Œè¡¨å†…å»ºå‡½æ•°</p>
</blockquote>
<ul>
<li><code>keys</code> è·å–ä¸€ä¸ªåŒ…å«å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾åˆ°çš„é”®çš„åºåˆ—ã€‚ è¯·æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å“ˆå¸Œè¡¨éƒ½æ”¯æŒè¯¥å†…å»ºå‡½æ•°ã€‚</li>
</ul>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assign h = {"name":"mouse", "price":50}&gt;</span></span>
<span class="line"><span>&lt;#assign keys = h?keys&gt;</span></span>
<span class="line"><span>&lt;#list keys as key&gt;${key} = ${h[key]}; &lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¾“å‡ºï¼š</p>
<pre>name = mouse; price = 50; 
</pre>
<p>å“ˆå¸Œè¡¨çš„é”®é€šå¸¸æ˜¯æ— åºçš„ï¼Œå› æ­¤ <code>keys</code> è·å–åˆ°çš„åºåˆ—é€šå¸¸ä¹Ÿæ˜¯æ— åºçš„ã€‚å¯¹äºæŸäº›ç»´æŒäº†é”®çš„é¡ºåºçš„å“ˆå¸Œè¡¨ï¼Œ<code>keys</code> è·å–åˆ°çš„åºåˆ—ä¸­çš„å…ƒç´ ä¹Ÿå°†æŒ‰ç…§é‚£ä¸ªç»´æŒçš„é¡ºåºæ’åˆ—ã€‚</p>
<ul>
<li><code>values</code> è·å–ä¸€ä¸ªåŒ…å«å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰é”®çš„åºåˆ—ã€‚è¯·æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å“ˆå¸Œè¡¨éƒ½æ”¯æŒè¯¥å†…å»ºå‡½æ•°ã€‚<code>values</code> è·å–åˆ°çš„åºåˆ—çš„å…ƒç´ é¡ºåºä¸ <code>keys</code> çš„è§„åˆ™ä¸€è‡´ã€‚</li>
</ul>
<blockquote>
<p>å­—ç¬¦ä¸²å†…å»ºå‡½æ•°ä¸­çš„å¤§å‘</p>
</blockquote>
<p><code>cap_first</code>ï¼šå­—ç¬¦ä¸²ä¸­çš„ <strong>é¦–å•è¯</strong> çš„é¦–å­—æ¯å¤§å†™ã€‚</p>
<p><code>capitalize</code>ï¼šå­—ç¬¦ä¸²ä¸­ <strong>æ‰€æœ‰å•è¯</strong> çš„é¦–å­—æ¯å¤§å†™ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯ä¸€ä¸ªå¤§å‘ï¼Ÿ</p>
<p>Apache ä¸º Java æä¾›äº†è®¸å¤šå¸¸ç”¨çš„å·¥å…·åŒ…ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå·¥å…·åŒ…å«åš common-lang3ï¼Œåœ¨è¿™ä¸ªå·¥å…·åŒ…ä¸­æœ‰ä¸€ä¸ªåä¸º <code>StringUtils</code> çš„å·¥å…·ç±»ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå·¥å…·ç±»å¯¹ Java ä¸­çš„å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œã€‚</p>
<p>åœ¨ <code>StringUtils</code> ä¸­æœ‰ä¸€ä¸ªåä¸º <code>capitalize()</code> çš„æ–¹æ³•ï¼Œæ­¤æ–¹æ³•å¯ä»¥å°†ä¼ å…¥å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™å¹¶è¿”å›ï¼Œ <strong>ä¸ä¼šæ”¹å˜å…¶ä»–å­—ç¬¦ä¸²ã€‚</strong></p>
<p>é’ˆå¯¹å­—ç¬¦ä¸² <code>GreEN mouse</code> æ¥è¯´ï¼š</p>
<ul>
<li><code>StringUtils.capitalize("GreEN mouse")</code> å°†è¿”å› <code>GreEN mouse</code>ï¼›</li>
<li>è€Œåœ¨ FreeMarker ä¸­ï¼Œ<code>${"GreEN mouse"?capitalize}</code> ä¼šè¿”å› <code>Green Mouse</code>ï¼ŒåŸæœ¬çš„ <code>mouse</code> å±…ç„¶å˜æˆäº† <code>Mouse</code>ï¼Ÿï¼</li>
</ul>
<p>è¿™æ˜¯å› ä¸º FreeMarker ä¸­å­—ç¬¦ä¸²å†…å»ºå‡½æ•° <code>capitalize</code> ä¼šå°†å­—ç¬¦ä¸²ä¸­ <strong>æ‰€æœ‰å•è¯</strong> çš„é¦–å­—æ¯å¤§å†™ã€‚</p>
<p>è¿™é‡Œçš„å•è¯æŒ‡çš„æ˜¯ä¸é—´æ–­çš„å­—ç¬¦åºåˆ—ï¼ŒåŒ…å«äº†ä»»æ„å­—ç¬¦ï¼Œä½†æ˜¯æ²¡æœ‰ç©ºç™½ã€‚FreeMarker ä¸­çš„ç©ºç™½æ˜¯æŒ‡å®Œå…¨é€æ˜çš„å­—ç¬¦ï¼Œä½†æ˜¯å¯¹æ–‡æœ¬çš„è§†è§‰å‘ˆç°ä¼šæœ‰ä½œç”¨ã€‚ æ¯”å¦‚ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦ï¼ˆæ°´å¹³å’Œå‚ç›´ï¼‰ï¼Œæ¢è¡Œç¬¦ï¼ˆCR å’Œ LFï¼‰ï¼Œæ¢é¡µã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ FreeMarker ä¸­ï¼Œæƒ³è®©å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ï¼Œåº”è¯¥ä½¿ç”¨ <code>cap_first</code> å†…å»ºå‡½æ•°ã€‚</p>
<blockquote>
<p>å¸ƒå°”å€¼å†…å»ºå‡½æ•° <code>then</code></p>
</blockquote>
<p><code>then</code>ï¼Œä½¿ç”¨æ–¹å¼æ˜¯ <code>booleanExp?then(whenTrue, whenFalse)</code>ï¼Œç±»ä¼¼äºä¸‰å…ƒè¿ç®—ç¬¦ <code>booleanExp ? whenTrue : whenFalse</code>ã€‚å¦‚æœ <code>booleanExp</code> æ˜¯ <code>true</code>ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå‚æ•° <code>whenTrue</code>ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•° <code>whenFalse</code>ã€‚åŒ…æ‹¬ <code>booleanExp</code> åœ¨å†…çš„ä¸‰ä¸ªè¡¨è¾¾å¼å¯ä»¥æ˜¯ä»»æ„å¤æ‚çš„ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒç±»å‹ã€‚</p>
<p>è¯¥å†…å»ºå‡½æ•°çš„ä¸€ä¸ªé‡è¦ç‰¹æ®Šå±æ€§æ˜¯ <strong>åªä¼šè®¡ç®—ä¸€ä¸ªå‚æ•°è¡¨è¾¾å¼</strong>ã€‚è¿™ä¸æ™®é€šæ–¹æ³•è°ƒç”¨ä¸åŒï¼Œåœ¨æ™®é€šæ–¹æ³•è°ƒç”¨ä¸­ï¼Œæ‰€æœ‰å‚æ•°è¡¨è¾¾å¼éƒ½ä¼šè¢«æ±‚å€¼ï¼Œè€Œä¸ç®¡æ–¹æ³•æ˜¯å¦éœ€è¦å®ƒä»¬ã€‚è¿™ä¹Ÿæ„å‘³ç€åœ¨ <code>then</code> å†…å»ºå‡½æ•°ä¸­ä¸éœ€è¦çš„å‚æ•°ç”šè‡³å¯ä»¥å¼•ç”¨ä¸å­˜åœ¨çš„å˜é‡ï¼Œè€Œä¸ä¼šå¯¼è‡´é”™è¯¯ã€‚ï¼ˆå½“ç„¶å®ƒä¸èƒ½æ˜¯éæ³•çš„è¯­æ³•ã€‚ï¼‰</p>
<blockquote>
<p>å¾ªç¯å˜é‡å†…å»ºå‡½æ•°</p>
</blockquote>
<p>ä¸Šæ–‡ä¸­ä»‹ç»äº†å¾ªç¯å˜é‡çš„ <code>index</code>ã€<code>counter</code> å’Œ <code>item_parity</code> å†…å»ºå‡½æ•°ï¼Œå†è¡¥å……ä¸€äº›ï¼š</p>
<ul>
<li><code>has_next</code>ï¼šåˆ¤æ–­å½“å‰å¾ªç¯é¡¹åæ˜¯å¦è¿˜æœ‰å¯ç”¨çš„å¾ªç¯é¡¹ï¼›</li>
<li><code>is_even_item</code>ï¼šåˆ¤æ–­å¾ªç¯é¡¹æ˜¯å¦æ˜¯å½“å‰è¿­ä»£é—´éš” 1 çš„å¥‡æ•°é¡¹ï¼Œæ¯”å¦‚ï¼š</li>
</ul>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ['a', 'b', 'c', 'd'] as i&gt;${i?is_even_item?c} &lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>false true false true</span></span></code></pre></td></tr></tbody></table>
      </figure>
<ul>
<li><code>is_first</code>ï¼šåˆ¤æ–­å¾ªç¯é¡¹æ˜¯å¦æ˜¯å½“å‰è¿­ä»£çš„ç¬¬ä¸€é¡¹ï¼›</li>
<li><code>is_last</code>ï¼šåˆ¤æ–­å¾ªç¯é¡¹æ˜¯å¦æ˜¯å½“å‰è¿­ä»£çš„æœ€åä¸€é¡¹ï¼›</li>
<li><code>is_odd_item</code>ï¼šåˆ¤æ–­å¾ªç¯é¡¹æ˜¯å¦æ˜¯å½“å‰è¿­ä»£é—´éš” 1 çš„å¶æ•°é¡¹ï¼Œæ¯”å¦‚ï¼š</li>
</ul>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ['a', 'b', 'c', 'd'] as i&gt;${i?is_odd_item?c} &lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>true false true false </span></span></code></pre></td></tr></tbody></table>
      </figure>
<ul>
<li><code>item_cycle</code>ï¼šä¸ <code>item_parity</code> ç±»ä¼¼ï¼Œå®ƒæ›´åŠ é€šç”¨ï¼Œç›´æ¥ä¸Šä¾‹å­ï¼š</li>
</ul>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ['a', 'b', 'c', 'd', 'e', 'f', 'g'] as i&gt;</span></span>
<span class="line"><span>  &lt;tr class="${i?item_cycle('row1', 'row2', 'row3')}"&gt;${i}&lt;/tr&gt;</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row1"</span><span style="color:#ABB2BF">&gt;a&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row2"</span><span style="color:#ABB2BF">&gt;b&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row3"</span><span style="color:#ABB2BF">&gt;c&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row1"</span><span style="color:#ABB2BF">&gt;d&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row2"</span><span style="color:#ABB2BF">&gt;e&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row3"</span><span style="color:#ABB2BF">&gt;f&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"row1"</span><span style="color:#ABB2BF">&gt;g&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å†…ç½®å‡½æ•° <code>item_cycle</code> çš„ä½¿ç”¨ç»†èŠ‚ï¼šå‚æ•°çš„ä¸ªæ•°è‡³å°‘æ˜¯1ä¸ªï¼Œæ²¡æœ‰ä¸Šé™ï¼Œå‚æ•°çš„ç±»å‹æ˜¯ä»»æ„çš„ï¼Œæ— éœ€åªæ˜¯å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li><code>item_parity</code>ï¼šè¯¥å†…ç½®å‡½æ•°åªä¼šè¿”å›å­—ç¬¦ä¸²å€¼ <code>"odd"</code> æˆ– <code>"even"</code>ï¼Œå¸¸ç”¨äºè¡¨æ ¼ä¸­è¡Œé—´çš„é¢œè‰²å˜æ¢ï¼š</li>
</ul>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ['a', 'b', 'c', 'd'] as i&gt;</span></span>
<span class="line"><span>  &lt;tr class="${i?item_parity}Row"&gt;${i}&lt;/tr&gt;</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"oddRow"</span><span style="color:#ABB2BF">&gt;a&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"evenRow"</span><span style="color:#ABB2BF">&gt;b&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"oddRow"</span><span style="color:#ABB2BF">&gt;c&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">tr</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"evenRow"</span><span style="color:#ABB2BF">&gt;d&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<ul>
<li><code>item_parity_cap</code>ï¼šä¸ <code>item_parity</code> ä½¿ç”¨æ–¹å¼ç›¸åŒï¼Œåªä¸è¿‡è¿”å›çš„æ˜¯é¦–å­—æ¯å¤§å†™çš„ <code>"Odd"</code> å’Œ <code>"Even"</code>ã€‚</li>
</ul>
<h2 id="1-5-å¤„ç†ä¸å­˜åœ¨çš„å˜é‡"><a class="header-anchor" href="#1-5-å¤„ç†ä¸å­˜åœ¨çš„å˜é‡"></a>1.5 å¤„ç†ä¸å­˜åœ¨çš„å˜é‡</h2>
<p>é™¤äº†ä¸€äº›å…¸å‹çš„äººä¸ºåŸå› å¯¼è‡´å¤±è¯¯å¤–ï¼ŒFreeMarker ç»ä¸èƒ½å®¹å¿å¼•ç”¨ä¸å­˜åœ¨çš„å˜é‡ï¼Œ é™¤éæ˜ç¡®åœ°å‘Šè¯‰å®ƒå½“å˜é‡ä¸å­˜åœ¨æ—¶å¦‚ä½•å¤„ç†ã€‚è¿™é‡Œæ¥ä»‹ç»ä¸¤ç§å…¸å‹çš„å¤„ç†æ–¹æ³•ã€‚</p>
<p>å¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼æ¥é¿å…å˜é‡ä¸¢å¤±è¿™ç§æƒ…å†µï¼Œ é€šè¿‡åœ¨å˜é‡ååé¢è·Ÿç€ä¸€ä¸ª <code>!</code> å’Œé»˜è®¤å€¼ã€‚ å°±åƒä¸‹é¢çš„è¿™ä¸ªä¾‹å­ï¼Œå½“ <code>user</code> ä¸å­˜åœ¨äºæ•°æ®æ¨¡å‹æ—¶, æ¨¡æ¿å°†ä¼šå°† <code>user</code> çš„å€¼è¡¨ç¤ºä¸ºå­—ç¬¦ä¸² <code>"visitor"</code>ï¼Œ è€Œå½“ <code>user</code> å­˜åœ¨æ—¶ï¼Œ æ¨¡æ¿å°±ä¼šè¡¨ç°å‡º <code>${user}</code> çš„å€¼ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;h1&gt;Welcome ${user!"visitor"}!&lt;/h1&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æ³¨æ„åŒºåˆ†ï¼š<code>${object!}</code> è¡¨ç¤ºå¦‚æœ object ä¸ºç©ºåˆ™ä¸æ‰§è¡Œ</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ <code>&lt;#if object ??&gt;${object}&lt;#if&gt;</code> è¡¨ç¤ºå¦‚æœ object ä¸ä¸ºç©ºï¼Œåˆ™æ‰§è¡Œé‡Œé¢è¯­å¥ï¼Œç›¸å½“äºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if object?if_exits&gt;${object}&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å…³äºå¤šçº§è®¿é—®çš„å˜é‡ï¼Œ<code>animals.python.price!0</code> å½“ä¸”ä»…å½“ <code>animals.python</code> æ°¸è¿œå­˜åœ¨ï¼Œ è€Œä»…ä»…æœ€åä¸€ä¸ªå­å˜é‡ <code>price</code> å¯èƒ½ä¸å­˜åœ¨æ—¶ï¼Œè¿™ç§æƒ…å†µä¸‹é»˜è®¤å€¼æ˜¯ 0ã€‚ å¦‚æœ <code>animals</code> æˆ– <code>python</code> ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆæ¨¡æ¿å¤„ç†è¿‡ç¨‹å°†ä¼šä»¥ã€Œæœªå®šä¹‰çš„å˜é‡ã€é”™è¯¯è€Œåœæ­¢ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œ å¯ä»¥å¦‚ä¸‹è¿™æ ·æ¥ç¼–å†™ä»£ç  <code>(animals.python.price)!0</code> æ¥è§£å†³ã€‚ è¿™ç§æƒ…å†µå°±æ˜¯è¯´å½“ <code>animals</code>ã€<code>python</code> æˆ– <code>price</code> ä»»æ„ä¸€ä¸ªä¸å­˜åœ¨æ—¶ï¼Œ è¡¨è¾¾å¼çš„ç»“æœæ˜¯ <code>0</code>ã€‚å¯¹äº <code>??</code> ä¹Ÿæ˜¯åŒæ ·ç”¨æ¥çš„å¤„ç†è¿™ç§é€»è¾‘çš„ï¼Œå¯ä»¥å°† <code>animals.python.price??</code> å¯¹æ¯” <code>(animals.python.price)??</code>æ¥çœ‹ã€‚</p>
<blockquote>
<p>åœ¨ <code>&lt;#if&gt;</code> æ ‡ç­¾ä¸­å¤„ç†ä¸å­˜åœ¨çš„å˜é‡</p>
</blockquote>
<p>å‡è®¾éœ€è¦åˆ¤æ–­ <code>parent</code> ä¸­çš„ <code>child</code> ä¸­çš„ <code>str</code> æ˜¯å¦ç­‰äº <code>mofan</code>ï¼Œä½† <code>parent</code>ã€<code>child</code> å’Œ <code>str</code> éƒ½å¯èƒ½ä¸å­˜åœ¨ï¼Œå› æ­¤æœ‰è¿™æ ·ã€Œæ¶å¿ƒã€çš„åˆ¤æ–­ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if parent?? &amp;&amp; parent.child?? &amp;&amp; parent.child.str?? &amp;&amp; parent.child.str == "mofan"&gt;</span></span>
<span class="line"><span>&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æˆ–è€…æ˜¯å¥—å¤šå±‚ <code>&lt;#if&gt;</code> æ ‡ç­¾ã€‚é‚£æ˜¯å¦æœ‰ä¼˜é›…ç‚¹çš„å†™æ³•å‘¢ï¼Ÿ</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if (parent.child.str)!"" == "mofan"&gt;&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å½“ <code>parent</code>ã€<code>child</code> æˆ– <code>str</code> ä¸‰è€…ä¸­çš„ä»»æ„ä¸€ä¸ªä¸å­˜åœ¨æ—¶ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œç©ºå­—ç¬¦ä¸å­—ç¬¦ä¸² <code>mofan</code> æ¯”è¾ƒç»“æœè¿”å› <code>false</code>ï¼Œè¿™ä¸å¤šæ¬¡éç©ºåˆ¤æ–­æˆ–å¤šå±‚ <code>&lt;#if&gt;</code> æ ‡ç­¾åµŒå¥—è¿”å›çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ä½†åœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸Šè¿°ä»£ç å¹¶ä¸ä¼šæŒ‰ç…§é¢„æœŸæ‰§è¡Œï¼Œåè€ŒæŠ›å‡ºå¼‚å¸¸ï¼Œæç¤º <code>&lt;#if&gt;</code> æ ‡ç­¾ä¸­çš„è¡¨è¾¾å¼ <strong>ä¸æ˜¯å¸ƒå°”å€¼ï¼Œ</strong> äºæ˜¯åˆè¿›è¡Œå¦‚ä¸‹å°è¯•ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if ((parent.child.str)!"" == "mofan")&gt;&lt;/#if&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#if ((parent.child.str)!"" == "mofan")?boolean&gt;&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>é”™è¯¯ä¾æ—§æ²¡æœ‰å¾—åˆ°ç»“æœï¼Œä¾æ—§æ˜¾ç¤ºåŒæ ·çš„é”™è¯¯ã€‚</p>
<p>æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ç¼–å†™æ–¹å¯æ­£å¸¸æ‰§è¡Œï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if ((parent.child.str)!"") == "mofan"&gt;&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h1 id="2-æ•°å€¼ä¸ç±»å‹"><a class="header-anchor" href="#2-æ•°å€¼ä¸ç±»å‹"></a>2. æ•°å€¼ä¸ç±»å‹</h1>
<h2 id="2-1-åŸºæœ¬å†…å®¹"><a class="header-anchor" href="#2-1-åŸºæœ¬å†…å®¹"></a>2.1 åŸºæœ¬å†…å®¹</h2>
<p>æ•°å€¼çš„æ¦‚å¿µå¾ˆå¥½ç†è§£ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>(root)</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +- user = "Big Joe"</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +- today = Jul 6, 2007</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +- todayHoliday = false</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +- lotteryNumbers</span></span>
<span class="line"><span> |   |</span></span>
<span class="line"><span> |   +- (1st) = 20</span></span>
<span class="line"><span> |   |</span></span>
<span class="line"><span> |   +- (2st) = 14</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +- mouse = "Yerri"</span></span>
<span class="line"><span>     |</span></span>
<span class="line"><span>     +- age = 12</span></span>
<span class="line"><span>     |</span></span>
<span class="line"><span>     +- color = "brown"</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å˜é‡ <code>user</code> çš„æ•°å€¼å°±æ˜¯ <code>"Big Joe"</code>ï¼Œå®ƒçš„ç±»å‹æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<p><code>lotteryNumbers</code> çš„æ•°å€¼æ˜¯åŒ…å« 20ï¼Œ14 çš„åºåˆ—ã€‚å®ƒåŒ…å«å¤šä¸ªå€¼ï¼Œä½†æ˜¯ <code>lotteryNumbers</code> æœ¬èº«è¿˜æ˜¯å•å€¼ã€‚å®ƒå°±åƒä¸€ä¸ªè£…æœ‰å…¶å®ƒå¾ˆå¤šä¸œè¥¿çš„ç›’å­ (æˆ–è€…è¯´å®¹å™¨)ï¼Œä½†ç›’å­ä½œä¸ºæ•´ä½“è¿˜æ˜¯è§†ä½œå•ç‹¬çš„ã€‚</p>
<p>å¯¹ <code>mouse</code> æ¥è¯´ä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒçš„æ•°å€¼æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆä¹Ÿæ˜¯ç±»ä¼¼ç›’å­ä¸€æ ·çš„ä¸œè¥¿ï¼‰ã€‚</p>
<p>æ‰€ä»¥è¯´ï¼Œæ•°å€¼å°±æ˜¯å­˜å‚¨åœ¨å˜é‡ä¸­çš„çš„é‚£ä¸ªä¸œè¥¿ã€‚ä½†ä¸éœ€è¦å­˜å‚¨äºå˜é‡ä¹‹ä¸­çš„æ•°å€¼ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºæ•°å€¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„æ•°å­— 100ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if cargo.weight &lt; 100&gt;Light cargo&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ç±»å‹ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæ¯”æ–¹è¯´ï¼Œç±»å‹æœ‰ï¼šå­—ç¬¦ä¸²ã€æ—¥æœŸã€æ•°å­—ã€å¸ƒå°”å€¼ã€åºåˆ—ã€å“ˆå¸Œè¡¨ç­‰ç­‰ã€‚</p>
<p>æ•°å€¼ä¹Ÿå¯ä»¥å«æœ‰å¤šç§ç±»å‹ï¼Œå°½ç®¡å¾ˆå°‘è¿™ä¹ˆä½¿ç”¨ã€‚æ¯”æ–¹è¯´ä¸Šé¢æ•°æ®æ¨¡å‹ä¸­çš„ <code>mouse</code> å®ƒæœ¬èº«å°±åˆæ˜¯å­—ç¬¦ä¸²ï¼Œåˆæ˜¯å“ˆå¸Œè¡¨ã€‚</p>
<p>ä»æ¯ä¸ªæ•°æ®æ¨¡å‹çš„ä¾‹å­å¯ä»¥å‘ç°ï¼Œè¢« <code>root</code> æ‰€æ ‡è¯†çš„å†…å®¹å°±æ˜¯å“ˆå¸Œè¡¨ç±»å‹çš„å€¼ã€‚</p>
<p>æ ¹å“ˆå¸Œè¡¨åŒ…å«æ›´å¤šçš„å“ˆå¸Œè¡¨æˆ–åºåˆ—ã€‚ å“ˆå¸Œè¡¨åŒ…å«å…¶ä»–å˜é‡ï¼Œé‚£äº›å˜é‡åŒ…å«å…¶å®ƒå€¼ï¼Œè¿™äº›æ•°å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—ç­‰å˜é‡ï¼Œ å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å“ˆå¸Œè¡¨æˆ–åºåˆ—å˜é‡ï¼ˆç›¸å½“äºå¯ä»¥ä¸€ç›´å¥—å¨ƒï¼‰ã€‚</p>
<h2 id="2-2-ç±»å‹"><a class="header-anchor" href="#2-2-ç±»å‹"></a>2.2 ç±»å‹</h2>
<blockquote>
<p>æ ‡é‡</p>
</blockquote>
<p>æ ‡é‡æ˜¯æœ€åŸºæœ¬ï¼Œæœ€ç®€å•çš„æ•°å€¼ç±»å‹ï¼Œå®ƒä»¬å¯ä»¥æ˜¯ï¼š</p>
<ol>
<li>å­—ç¬¦ä¸²ï¼šè¡¨ç¤ºç®€å•çš„æ–‡æœ¬ã€‚å°†æ–‡æœ¬å†…å®¹å†™åœ¨å¼•å·å†…å³å¯ï¼Œå•å¼•å·ã€åŒå¼•å·éƒ½å¯ä»¥ã€‚</li>
<li>æ•°å€¼ï¼šæ•´æ•°å’Œéæ•´æ•°ä¸åŒºåˆ†</li>
<li>å¸ƒå°”å€¼</li>
<li>æ—¥æœŸï¼šæ—¥æœŸå˜é‡å¯ä»¥å­˜å‚¨å’Œæ—¥æœŸ / æ—¶é—´ç›¸å…³çš„æ•°æ®ã€‚æœ‰ä¸‰ç§æ ¼å¼ï¼š
<ul>
<li>æ—¥æœŸï¼šç²¾ç¡®åˆ°å¤©çš„æ—¥æœŸï¼Œæ²¡æœ‰æ—¶é—´éƒ¨åˆ†ï¼Œæ¯”å¦‚ <code>April 4, 2003</code>ã€‚</li>
<li>æ—¶é—´ï¼šç²¾ç¡®åˆ°æ¯«ç§’ï¼Œæ²¡æœ‰æ—¥æœŸéƒ¨åˆ†ï¼Œæ¯”å¦‚ <code>10:19:18 PM</code>ã€‚</li>
<li>æ—¥æœŸ - æ—¶é—´ï¼ˆæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºã€Œæ—¶é—´æˆ³ã€ï¼‰ï¼Œæ¯”å¦‚ <code>April 4,2003 10:19:18 PM</code>ã€‚ æœ‰æ—¥æœŸå’Œæ—¶é—´ä¸¤éƒ¨åˆ†ï¼Œæ—¶é—´éƒ¨åˆ†çš„å­˜å‚¨ç²¾ç¡®åˆ°æ¯«ç§’ã€‚</li>
</ul>
</li>
</ol>
<p>ä¸å¹¸çš„æ˜¯ï¼Œå—åˆ° Java å¹³å°çš„é™åˆ¶ï¼ŒFreeMarker æœ‰æ—¶æ˜¯ä¸èƒ½å†³å®šæ—¥æœŸçš„éƒ¨å“ªåˆ†è¢«ä½¿ç”¨ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯æ—¥æœŸ - æ—¶é—´æ ¼å¼ï¼Œæ—¥æœŸæ ¼å¼è¿˜æ˜¯æ—¶é—´æ ¼å¼æ— æ³•ç¡®å®šï¼‰ã€‚</p>
<blockquote>
<p>å®¹å™¨</p>
</blockquote>
<p>è¿™äº›å€¼å­˜åœ¨çš„ç›®çš„æ˜¯ä¸ºäº†åŒ…å«å…¶ä»–å˜é‡ï¼Œå®ƒä»¬åªæ˜¯å®¹å™¨ã€‚ å®ƒä»¬åŒ…å«çš„å˜é‡é€šå¸¸è§†ä¸º <em>subvariables</em> (å­å˜é‡)ã€‚å®¹å™¨çš„ç±»å‹æœ‰ï¼š</p>
<ol>
<li>å“ˆå¸Œè¡¨</li>
<li>åºåˆ—</li>
<li>é›†åˆï¼šä»æ¨¡æ¿è®¾è®¡è€…è§’åº¦æ¥çœ‹ï¼Œé›†åˆæ˜¯æœ‰é™åˆ¶çš„åºåˆ—ã€‚ä¸èƒ½è·å–é›†åˆçš„å¤§å°ï¼Œ ä¹Ÿä¸èƒ½é€šè¿‡ç´¢å¼•å–å‡ºé›†åˆä¸­çš„å­å˜é‡ï¼Œä½†æ˜¯å®ƒä»¬ä»ç„¶å¯ä»¥é€šè¿‡ list æŒ‡ä»¤æ¥éå†ã€‚</li>
</ol>
<p>è¯·æ³¨æ„ï¼Œ<mark>ä¸€ä¸ªå€¼ä¹Ÿå¯æœ‰å¤šç§ç±»å‹ã€‚</mark>  å¯¹äºä¸€ä¸ªå€¼å¯ä»¥åŒæ—¶å­˜åœ¨å“ˆå¸Œè¡¨å’Œåºåˆ—è¿™ä¸¤ç§ç±»å‹ï¼Œè¿™æ—¶è¯¥å˜é‡å°±æ”¯æŒç´¢å¼•å’Œåç§°ä¸¤ç§è®¿é—®æ–¹å¼ï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šä¸¤è€…åŒæ—¶ä½¿ç”¨ã€‚</p>
<p>å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ï¼Œåºåˆ—ï¼ˆé›†åˆï¼‰ä¸­çš„å˜é‡å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„ï¼Œ è¿™äº›å˜é‡ä¹Ÿå¯ä»¥æ˜¯å“ˆå¸Œè¡¨ã€åºåˆ—(æˆ–é›†åˆ)ï¼Œè¿™æ ·å°±å¯ä»¥æ„å»ºä»»æ„æ·±åº¦çš„æ•°æ®ç»“æ„ã€‚</p>
<p>æ•°æ®æ¨¡å‹æœ¬èº«ï¼ˆæœ€å¥½è¯´æˆæ˜¯å®ƒçš„æ ¹ rootï¼‰ä¹Ÿæ˜¯å“ˆå¸Œè¡¨ã€‚</p>
<blockquote>
<p>æ–¹æ³•å’Œå‡½æ•°</p>
</blockquote>
<p>å½“ä¸€ä¸ªå€¼æ˜¯æ–¹æ³•æˆ–å‡½æ•°çš„æ—¶å€™ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥è®¡ç®—å…¶ä»–å€¼ï¼Œç»“æœå–å†³äºä¼ é€’ç»™å®ƒçš„å‚æ•°ã€‚</p>
<p>å‡è®¾ç¨‹åºå‘˜åœ¨æ•°æ®æ¨¡å‹ä¸­æ”¾ç½®äº†ä¸€ä¸ªæ–¹æ³•å˜é‡ <code>avg</code>ï¼Œ è¯¥å˜é‡ç”¨æ¥è®¡ç®—æ•°å­—çš„å¹³å‡å€¼ã€‚å¦‚æœç»™å®š 3 å’Œ 5 ä½œä¸ºå‚æ•°ï¼Œè®¿é—® <code>avg</code> æ—¶å°±èƒ½å¾—åˆ°ç»“æœ 4ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>The average of 3 and 5 is: ${avg(3, 5)}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>é‚£ä¹ˆä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>The average of 3 and 5 is: 4</span></span></code></pre></td></tr></tbody></table>
      </figure>
<blockquote>
<p>ç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤</p>
</blockquote>
<p>è¿™ç§ç±»å‹çš„å€¼å¯ä»¥ä½œä¸ºç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„ FreeMarker çš„æ ‡ç­¾ï¼‰ï¼Œç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ä¸€ç§å­ç¨‹åºï¼Œä¸€ç§å¯ä»¥å¤ç”¨çš„æ¨¡æ¿ä»£ç æ®µã€‚</p>
<p>è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥ä½¿ç”¨ <code>&lt;# macro&gt;</code> æŒ‡ä»¤æ¥å®šä¹‰ï¼Œä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤çš„æ—¶å€™è¦ç”¨ <code>@</code> è€Œä¸æ˜¯ <code>#</code>ã€‚</p>
<p>å…·ä½“æ–¹å¼å‚çœ‹åæ–‡ä»‹ç»ã€‚</p>
<blockquote>
<p>å‡½æ•° / æ–¹æ³•å’Œç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤çš„æ¯”è¾ƒ</p>
</blockquote>
<p>å¯¹äºå‡½æ•° / æ–¹æ³•å’Œç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤çš„é€‰æ‹©ï¼ŒæŒ‰ç»éªŒæ¥è¯´ï¼Œå¦‚æœèƒ½å¤Ÿå®ç°éœ€æ±‚ï¼Œ è¯·å…ˆç”¨è‡ªå®šä¹‰æŒ‡ä»¤è€Œä¸è¦ç”¨å‡½æ•° / æ–¹æ³•ã€‚å¯¹äºè‡ªå®šä¹‰æŒ‡ä»¤æ¥è¯´ï¼š</p>
<ul>
<li>è¾“å‡ºï¼ˆè¿”å›å€¼ï¼‰çš„æ˜¯æ ‡è®°ï¼ˆHTMLã€XML ç­‰ï¼‰ã€‚ ä¸»è¦åŸå› æ˜¯å‡½æ•°çš„è¿”å›ç»“æœå¯ä»¥è‡ªåŠ¨è¿›è¡Œ XML è½¬ä¹‰ï¼ˆå› ä¸º <code>${...}</code> çš„ç‰¹æ€§ï¼‰ï¼Œ è€Œç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤çš„è¾“å‡ºåˆ™ä¸æ˜¯ï¼ˆå› ä¸º <code>&lt;@...&gt;</code> çš„ç‰¹æ€§æ‰€è‡´ï¼Œå®ƒçš„è¾“å‡ºå‡å®šæ˜¯æ ‡è®°ï¼Œå› æ­¤å·²ç»è½¬ä¹‰è¿‡äº†ï¼‰ï¼›</li>
<li>æ²¡æœ‰è¿”å›å€¼ï¼›</li>
<li>ä¼šè¿›è¡Œæµç¨‹çš„æ§åˆ¶ï¼ˆå°±åƒ <code>list</code> æˆ– <code>if</code> æŒ‡ä»¤é‚£æ ·ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½åœ¨å‡½æ•° / æ–¹æ³•ä¸Šè¿™ä¹ˆåšã€‚</li>
</ul>
<h1 id="3-æ¨¡æ¿æ€»ä½“ç»“æ„"><a class="header-anchor" href="#3-æ¨¡æ¿æ€»ä½“ç»“æ„"></a>3. æ¨¡æ¿æ€»ä½“ç»“æ„</h1>
<p>æ‰€è°“æ¨¡æ¿ï¼Œå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„ <code>.ftl</code> æ–‡ä»¶ï¼Œæ¨¡æ¿æ˜¯ç”±ä»¥ä¸‹éƒ¨åˆ†æ··åˆè€Œæˆçš„ï¼š</p>
<ul>
<li>
<p>æ–‡æœ¬ï¼šç…§ç€åŸæ ·è¾“å‡º</p>
</li>
<li>
<p>æ’å€¼ï¼š<code>${....}</code></p>
</li>
<li>
<p>FTL æ ‡ç­¾</p>
</li>
<li>
<p>æ³¨é‡Š</p>
</li>
</ul>
<p>FTL æ ‡ç­¾æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚ <code>list</code> æ˜¯æŒ‡ä»¤çš„åç§°ä½† <code>List</code> å°±ä¸æ˜¯ï¼ŒåŒæ · <code>${name}</code> å’Œ <code>${Name}</code> æˆ– <code>${NAME}</code> ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p>
<p><mark>è¯·æ³¨æ„éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼š æ’å€¼ä»…ä»…å¯ä»¥åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨ã€‚</mark></p>
<p>FTL æ ‡ç­¾ä¸å¯ä»¥åœ¨å…¶ä»– FTL æ ‡ç­¾å’Œæ’å€¼ä¸­ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ ·å°±æ˜¯é”™çš„ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if &lt;#include 'foo'&gt;='bar'&gt;...&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æ³¨é‡Šå¯ä»¥æ”¾åœ¨ FTL æ ‡ç­¾å’Œæ’å€¼ä¸­ã€‚</p>
<p>å’Œ HTML æ ‡ç­¾ä¸€æ ·ï¼ŒFTL æ ‡ç­¾å¿…é¡»æ­£ç¡®åœ°åµŒå¥—ä½¿ç”¨ï¼Œåƒä¸‹é¢è¿™æ ·å°±æ˜¯é”™çš„ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;ul&gt;</span></span>
<span class="line"><span>&lt;#list animals as animal&gt;</span></span>
<span class="line"><span>    &lt;li&gt;${animal.name} for ${animal.price} Euros</span></span>
<span class="line"><span>    &lt;#if user == "Big Joe"&gt;</span></span>
<span class="line"><span>    (except for you)</span></span>
<span class="line"><span>&lt;/#list&gt; &lt;#-- WRONG! The "if" has to be closed first. --&gt;</span></span>
<span class="line"><span>&lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/ul&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h1 id="4-è¡¨è¾¾å¼"><a class="header-anchor" href="#4-è¡¨è¾¾å¼"></a>4. è¡¨è¾¾å¼</h1>
<h2 id="4-1-ç›´æ¥æŒ‡å®šå€¼"><a class="header-anchor" href="#4-1-ç›´æ¥æŒ‡å®šå€¼"></a>4.1 ç›´æ¥æŒ‡å®šå€¼</h2>
<blockquote>
<p>å­—ç¬¦ä¸²</p>
</blockquote>
<p>ç¡®å®šå­—ç¬¦ä¸²å€¼çš„æ–¹æ³•å°±æ˜¯çœ‹åŒå¼•å·æˆ–å•å¼•å·ï¼Œè¿™ä¸¤ä¸ªæ˜¯ç­‰åŒçš„ã€‚</p>
<p>å¦‚æœæ–‡æœ¬è‡ªèº«åŒ…å«ç”¨äºå­—ç¬¦å¼•ç”¨çš„å¼•å·ï¼ˆ <code>"</code> æˆ– <code>'</code>ï¼‰æˆ–åæ–œæ æ—¶ï¼Œ åº”è¯¥åœ¨å®ƒä»¬çš„å‰é¢å†åŠ ä¸€ä¸ªåæ–œæ ï¼Œè¿™å°±æ˜¯è½¬ä¹‰ã€‚ è½¬ä¹‰å…è®¸ç›´æ¥åœ¨æ–‡æœ¬ä¸­è¾“å…¥ä»»ä½•å­—ç¬¦ï¼Œ ä¹ŸåŒ…æ‹¬æ¢è¡Œã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">è½¬ä¹‰åºåˆ—</th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\"</code></td>
<td style="text-align:center">å¼•å· (u0022)</td>
</tr>
<tr>
<td style="text-align:center"><code>\'</code></td>
<td style="text-align:center">å•å¼•å·(åˆç§°ä¸ºæ’‡å·) (u0027)</td>
</tr>
<tr>
<td style="text-align:center"><code>\{</code></td>
<td style="text-align:center">èµ·å§‹èŠ±æ‹¬å·ï¼š<code>{</code></td>
</tr>
<tr>
<td style="text-align:center"><code>\\</code></td>
<td style="text-align:center">åæ–œæ  (u005C)</td>
</tr>
<tr>
<td style="text-align:center"><code>\n</code></td>
<td style="text-align:center">æ¢è¡Œç¬¦ (u000A)</td>
</tr>
<tr>
<td style="text-align:center"><code>\r</code></td>
<td style="text-align:center">å›è½¦ (u000D)</td>
</tr>
<tr>
<td style="text-align:center"><code>\t</code></td>
<td style="text-align:center">æ°´å¹³åˆ¶è¡¨ç¬¦(åˆç§°ä¸ºtab) (u0009)</td>
</tr>
<tr>
<td style="text-align:center"><code>\b</code></td>
<td style="text-align:center">é€€æ ¼ (u0008)</td>
</tr>
<tr>
<td style="text-align:center"><code>\f</code></td>
<td style="text-align:center">æ¢é¡µ (u000C)</td>
</tr>
<tr>
<td style="text-align:center"><code>\l</code></td>
<td style="text-align:center">å°äºå·ï¼š<code>&lt;</code></td>
</tr>
<tr>
<td style="text-align:center"><code>\g</code></td>
<td style="text-align:center">å¤§äºå·ï¼š<code>&gt;</code></td>
</tr>
<tr>
<td style="text-align:center"><code>\a</code></td>
<td style="text-align:center">&amp;ç¬¦ï¼š<code>&amp;</code></td>
</tr>
<tr>
<td style="text-align:center"><code>\xCode</code></td>
<td style="text-align:center">å­—ç¬¦çš„16è¿›åˆ¶ Unicodeç  (UCSç )</td>
</tr>
</tbody>
</table>
<p>åœ¨æœ€åä¸€æ ·ä¸­çš„ Code è¡¨ç¤º 1 - 4 ä½çš„ 16 è¿›åˆ¶ç ã€‚ å¦‚æœç´§è·Ÿ 16 è¿›åˆ¶ç åä¸€ä½çš„å­—ç¬¦ä¹Ÿèƒ½è§£é‡Šæˆ 16 è¿›åˆ¶ç æ—¶ï¼Œ å°±å¿…é¡»æŠŠ 4 ä½è¡¥å…¨ï¼Œå¦åˆ™ FreeMarker å°±ä¼šè¯¯è§£ä½ çš„æ„å›¾ã€‚</p>
<p>å¦‚æœæƒ³è¦æ‰“å° <code>${</code> æˆ– <code>#{</code>ï¼Œ å°±è¦ä½¿ç”¨åŸç”Ÿå­—ç¬¦ä¸²ï¼Œæˆ–è€…è¿›è¡Œè½¬ä¹‰ã€‚</p>
<p>ä¸ºäº†è¡¨æ˜å­—ç¬¦ä¸²æ˜¯åŸç”Ÿå­—ç¬¦ä¸²ï¼Œ åœ¨å¼€å§‹çš„å¼•å·æˆ–å•å¼•å·ä¹‹å‰æ”¾ç½®å­—æ¯<code>r</code>ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${r"${foo}"}</span></span>
<span class="line"><span>${r"C:\foo\bar"}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${foo}</span></span>
<span class="line"><span>C:\foo\bar</span></span></code></pre></td></tr></tbody></table>
      </figure>
<blockquote>
<p>æ•°å­—</p>
</blockquote>
<p>æ•°å­—çš„æŒ‡å®šå¾ˆç®€å•ï¼Œç›´æ¥å†™å°±è¡Œäº†ï¼Œä½†æ˜¯ä¸æ”¯æŒç§‘å­¦è®¡æ•°æ³•ä¹Ÿä¸èƒ½çœç•¥å°æ•°ç‚¹å‰çš„ 0ã€‚</p>
<p>ä¸‹é¢è¿™äº›å†™æ³•éƒ½æ˜¯æ­£ç¡®çš„ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>0.08ã€-5.013ã€8ã€008ã€11ã€+11</span></span></code></pre></td></tr></tbody></table>
      </figure>
<blockquote>
<p>åºåˆ—</p>
</blockquote>
<p>æŒ‡å®šä¸€ä¸ªæ–‡å­—çš„åºåˆ—ï¼Œä½¿ç”¨é€—å·æ¥åˆ†éš”å…¶ä¸­çš„æ¯ä¸ªå­å˜é‡ï¼Œç„¶åæŠŠæ•´ä¸ªåˆ—è¡¨æ”¾åˆ°æ–¹æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ["foo", "bar", "baz"] as x&gt;</span></span>
<span class="line"><span>${x}</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<blockquote>
<p>å€¼åŸŸ</p>
</blockquote>
<p>å€¼åŸŸä¹Ÿæ˜¯åºåˆ—ï¼Œä½†å®ƒä»¬ç”±æŒ‡å®šåŒ…å«çš„æ•°å­—èŒƒå›´æ‰€åˆ›å»ºï¼Œ è€Œä¸éœ€æŒ‡å®šåºåˆ—ä¸­æ¯ä¸€é¡¹ã€‚</p>
<p>æ¯”å¦‚ï¼š <code>0..&lt;m</code>ï¼Œå‡è®¾ <code>m</code> å˜é‡çš„å€¼æ˜¯5ï¼Œé‚£ä¹ˆè¿™ä¸ªåºåˆ—å°±åŒ…å« <code>[0, 1, 2, 3, 4]</code>ã€‚å€¼åŸŸçš„ä¸»è¦ä½œç”¨æœ‰ï¼šä½¿ç”¨ <code>&lt;#list ...&gt;</code> æ¥è¿­ä»£ä¸€å®šèŒƒå›´å†…çš„æ•°å­—ã€åºåˆ—åˆ‡åˆ†å’Œå­—ç¬¦ä¸²åˆ‡åˆ†ã€‚</p>
<p>å€¼åŸŸè¡¨è¾¾å¼çš„é€šç”¨å½¢å¼æ˜¯ï¼ˆ <code>start</code> å’Œ <code>end</code> å¯ä»¥æ˜¯ä»»æ„çš„ç»“æœä¸ºæ•°å­—è¡¨è¾¾å¼ï¼‰ï¼š</p>
<ul>
<li><code>start..end</code>ï¼šåŒ…å«ç»“å°¾çš„å€¼åŸŸã€‚</li>
<li><code>star..&lt;end</code> æˆ–  <code>start..!end</code>ï¼šä¸åŒ…å«ç»“å°¾çš„å€¼åŸŸã€‚<code>1..&lt;1</code> è¡¨ç¤º <code>[]</code></li>
<li><code>start..*length</code>ï¼šé™å®šé•¿åº¦çš„å€¼åŸŸï¼Œæ¯”å¦‚ <code>10..*4</code> å°±æ˜¯ <code>[10, 11, 12, 13]</code>ï¼Œ<code>10..*-4</code> å°±æ˜¯ <code>[10, 9, 8, 7]</code>ï¼Œè€Œ <code>10..*0</code> è¡¨ç¤º <code>[]</code>ã€‚å½“è¿™äº›å€¼åŸŸè¢«ç”¨æ¥åˆ‡åˆ†æ—¶ï¼Œ å¦‚æœåˆ‡åˆ†åçš„åºåˆ—æˆ–è€…å­—ç¬¦ä¸²ç»“å°¾åœ¨æŒ‡å®šå€¼åŸŸé•¿åº¦ä¹‹å‰ï¼Œåˆ™åˆ‡åˆ†ä¸ä¼šæœ‰é—®é¢˜ã€‚</li>
<li><code>start..</code>ï¼š æ— å³è¾¹ç•Œå€¼åŸŸã€‚æ³¨æ„å†…å­˜æº¢å‡ºã€‚</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li>æ— å³è¾¹ç•Œå€¼åŸŸçš„å®šä¹‰å¤§å°æ˜¯ 2147483647ï¼Œ è¿™æ˜¯ç”±äºæŠ€æœ¯ä¸Šçš„é™åˆ¶ï¼ˆ32ä½ï¼‰ï¼Œä½†å½“åˆ—è¡¨æ˜¾ç¤ºå®ƒä»¬çš„æ—¶å€™ï¼Œå®é™…çš„é•¿åº¦æ˜¯æ— ç©·å¤§ã€‚</li>
<li>å€¼åŸŸå¹¶ä¸å­˜å‚¨å®ƒä»¬åŒ…å«çš„æ•°å­—ï¼Œé‚£ä¹ˆå¯¹äº <code>0..1</code> å’Œ <code>0..100000000</code> æ¥è¯´ï¼Œåˆ›å»ºé€Ÿåº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ å¹¶ä¸”å ç”¨çš„å†…å­˜ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</li>
</ul>
<blockquote>
<p>å“ˆå¸Œè¡¨</p>
</blockquote>
<p>åœ¨æ¨¡æ¿ä¸­æŒ‡å®šä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå°±å¯ä»¥éå†ç”¨é€—å·åˆ†éš”å¼€çš„"é”®/å€¼"å¯¹ï¼Œ æŠŠåˆ—è¡¨æ”¾åˆ°èŠ±æ‹¬å·å†…å³å¯ã€‚é”®å’Œå€¼æˆå¯¹å‡ºç°å¹¶ä»¥å†’å·åˆ†éš”ã€‚æ¯”å¦‚ï¼š <code>{ "name": "green mouse", "price": 150 }</code>ã€‚</p>
<p>é”®å’Œå€¼éƒ½æ˜¯è¡¨è¾¾å¼ï¼Œä½†æ˜¯ <mark>ç”¨æ¥æ£€ç´¢çš„é”®å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œ</mark>  è€Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<p>åœ¨éå†å“ˆå¸Œè¡¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>keys</code> æˆ– <code>values</code> å†…å»ºå‡½æ•°ã€‚</p>
<h2 id="4-2-æ£€ç´¢å˜é‡"><a class="header-anchor" href="#4-2-æ£€ç´¢å˜é‡"></a>4.2 æ£€ç´¢å˜é‡</h2>
<p>æ£€ç´¢éå†å¾ˆç®€å•ï¼Œä½¿ç”¨ <code>${...}</code> å°±å¯ä»¥äº†ã€‚è¯´ä¸€ä¸‹å†…éƒ¨è¡¨è¾¾å¼éœ€è¦æ³¨æ„çš„ï¼š</p>
<p>å˜é‡ååªå¯ä»¥åŒ…å«å­—æ¯ï¼ˆä¹Ÿå¯ä»¥æ˜¯éæ‹‰ä¸æ–‡ï¼‰ï¼Œ æ•°å­—ï¼ˆä¹Ÿå¯ä»¥æ˜¯éæ‹‰ä¸æ•°å­—ï¼‰ï¼Œä¸‹åˆ’çº¿ (<code>_</code>)ï¼Œ ç¾å…ƒç¬¦å· (<code>$</code>)ï¼Œat ç¬¦å· (<code>@</code>)ã€‚ æ­¤å¤–ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸å¯ä»¥æ˜¯ ASCII ç æ•°å­—(<code>0</code>-<code>9</code>)ã€‚ ä» FreeMarker 2.3.22 ç‰ˆæœ¬å¼€å§‹ï¼Œå˜é‡ååœ¨ä»»ä½•ä½ç½®ä¹Ÿå¯ä»¥åŒ…å«è´Ÿå· (<code>-</code>)ï¼Œç‚¹(<code>.</code>)å’Œå†’å·(<code>:</code>)ï¼Œ ä½†è¿™äº›å¿…é¡»ä½¿ç”¨å‰ç½®çš„åæ–œæ (<code>\</code>)æ¥è½¬ä¹‰ï¼Œ å¦åˆ™å®ƒä»¬å°†è¢«è§£é‡Šæˆæ“ä½œç¬¦ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¯»å–åä¸º <code>data-id</code> çš„å˜é‡ï¼Œ è¡¨è¾¾å¼ä¸º <code>data\-id</code>ï¼Œå› ä¸º <code>data-id</code> å°†è¢«è§£é‡Šæˆ <code>data minus id</code>ã€‚</p>
<p><mark>è¯·æ³¨æ„ï¼Œè¿™äº›è½¬ä¹‰ä»…åœ¨æ ‡è¯†ç¬¦ä¸­èµ·ä½œç”¨ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ä¸­ã€‚</mark></p>
<h2 id="4-3-å­—ç¬¦ä¸²æ“ä½œ"><a class="header-anchor" href="#4-3-å­—ç¬¦ä¸²æ“ä½œ"></a>4.3 å­—ç¬¦ä¸²æ“ä½œ</h2>
<blockquote>
<p>æ’å€¼ï¼ˆæˆ–é“¾æ¥ï¼‰</p>
</blockquote>
<p>æ‰€è°“æ’å€¼ï¼Œå°±æ˜¯ <code>${...}</code>ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<mark>æ’å€¼åªèƒ½åœ¨æ–‡æœ¬åŒºä¸­æœ‰æ•ˆï¼Œ</mark> æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;h1&gt;Hello ${name}!&lt;/h1&gt;</span></span>
<span class="line"><span>&lt;#include "/footer/${company}.html"&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ä½†æ˜¯ï¼Œè¿™æ ·å°±æ˜¯é”™è¯¯çš„ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if ${big}&gt;...&lt;/#if&gt;</span></span>
<span class="line"><span>&lt;#if "${big}"&gt;...&lt;/#if&gt; &lt;#--å‚æ•°ç›¸å½“äºå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ if åªèƒ½æ¥å—å¸ƒå°”å€¼--&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¿™æ ·å†™æ‰æ˜¯å¯¹çš„ï¼š<code>&lt;#if big&gt;...&lt;/#if&gt;</code></p>
<p>ä¸‹é¢è¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰æ•ˆçš„ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assign s = "Hello ${user}!"&gt;</span></span>
<span class="line"><span>&lt;#assign s = "Hello " + user + "!"&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ç”±äºåœ°åŒºå·®å¼‚ï¼Œå¾ˆå¤šåœ°åŒºä¼šä½¿ç”¨åƒåˆ†ä½åˆ†éš”ç¬¦ï¼Œé‚£ä¹ˆ <code>"someUrl?id=" + id</code> å°±å¯èƒ½ä¼šæ˜¯ <code>"someUrl?id=1 234"</code>ï¼ˆ<code>1</code> ä¸ <code>234</code> ä¹‹é—´å­˜åœ¨ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚ è¦é¢„é˜²è¿™ç§äº‹æƒ…çš„å‘ç”Ÿï¼Œè¯·ä½¿ç”¨ <code>?c</code> å†…å»ºå‡½æ•°ï¼Œé‚£ä¹ˆåœ¨ <code>"someUrl?id=" + id?c</code> æˆ– <code>"someUrl?id=${id?c}"</code>ä¸­ï¼Œ å°±ä¼šå¾—åˆ°å¦‚ <code>"someUrl?id=1234"</code> çš„è¾“å‡ºï¼Œ è€Œä¸ç®¡æœ¬åœ°åŒ–å’Œæ ¼å¼çš„è®¾ç½®æ˜¯ä»€ä¹ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨å¡«å……å‚æ•°æ—¶å°±å°†æ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p>
<blockquote>
<p>è·å–å­—ç¬¦</p>
</blockquote>
<p>è¦æƒ³è·å–å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œå’Œè·å–åºåˆ—ä¸­æŸä¸ªç´¢å¼•ä½ç½®çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼š</p>
<p>å‡è®¾ user æ˜¯ â€œmofanâ€ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${user[0]}</span></span>
<span class="line"><span>${user[4]}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šå¾—åˆ°ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>m</span></span>
<span class="line"><span>n</span></span></code></pre></td></tr></tbody></table>
      </figure>
<blockquote>
<p>å­—ç¬¦ä¸²åˆ‡åˆ†</p>
</blockquote>
<p>å­—ç¬¦ä¸²åˆ‡åˆ†ä¹Ÿå¾ˆç®€å•ï¼Œä½†éœ€è¦ <mark>æ³¨æ„</mark> çš„æ˜¯ï¼š</p>
<ul>
<li>é™åºåŸŸä¸å…è®¸è¿›è¡Œå­—ç¬¦ä¸²åˆ‡åˆ†ã€‚</li>
<li>å¦‚æœå˜é‡çš„å€¼æ—¢æ˜¯å­—ç¬¦ä¸²åˆæ˜¯åºåˆ—ï¼ˆå˜é‡æ—¶å¤šç±»å‹å€¼ï¼‰ï¼Œé‚£ä¹ˆåˆ‡åˆ†å°†ä¼šå¯¹åºåˆ—è¿›è¡Œï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚å½“å¤„ç† XML æ—¶ï¼Œè¿™æ ·çš„å€¼å°±æ˜¯æ™®é€šçš„äº†ã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>someXMLnode?string[range]</code>ã€‚</li>
<li>ä¸€ä¸ªé—ç•™çš„ bugï¼šå€¼åŸŸåŒ…å«ç»“å°¾æ—¶ï¼Œç»“å°¾å°äºå¼€å§‹ç´¢å¼•å¹¶ä¸”æ˜¯éè´Ÿçš„ï¼ˆå°±åƒåœ¨ <code>"abc"[1..0]</code> ä¸­ï¼‰ï¼Œ ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯é”™è¯¯ï¼ˆå› ä¸ºä¸ç¬¦åˆæˆ‘ä»¬è¯´çš„ç¬¬ä¸€ç‚¹ï¼‰ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œä¸åº”è¯¥è¿™æ ·ä½¿ç”¨ã€‚</li>
</ul>
<p>å­—ç¬¦ä¸²åˆ‡åˆ†ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assign s = "ABCDEF"&gt;</span></span>
<span class="line"><span>${s[2..3]}</span></span>
<span class="line"><span>${s[2..&lt;4]}</span></span>
<span class="line"><span>${s[2..*3]}</span></span>
<span class="line"><span>${s[2..*100]}</span></span>
<span class="line"><span>${s[2..]}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>CD</span></span>
<span class="line"><span>CD</span></span>
<span class="line"><span>CDE</span></span>
<span class="line"><span>CDEF</span></span>
<span class="line"><span>CDEF</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h2 id="4-4-åºåˆ—æ“ä½œ"><a class="header-anchor" href="#4-4-åºåˆ—æ“ä½œ"></a>4.4 åºåˆ—æ“ä½œ</h2>
<blockquote>
<p>è¿æ¥</p>
</blockquote>
<p>åºåˆ—å¯ä»¥åƒå­—ç¬¦ä¸²é‚£æ ·ä½¿ç”¨ <code>+</code> è¿›è¡Œè¿æ¥ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ["Joe", "Fred"] + ["Julia", "Kate"] as user&gt;</span></span>
<span class="line"><span>- ${user}</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<blockquote>
<p>åºåˆ—åˆ‡åˆ†</p>
</blockquote>
<p>åºåˆ—åˆ‡åˆ†å’Œå­—ç¬¦ä¸²åˆ‡åˆ†ç±»ä¼¼ï¼Œä½¿ç”¨ <code>seq[range]</code> è¿›è¡Œåˆ‡åˆ†ï¼Œrange æ˜¯ä¸€ä¸ªå€¼åŸŸï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assert seq = ["A", "B", "C", "D", "E"]&gt;</span></span>
<span class="line"><span>&lt;#list seq[1..3] as i&gt; ${i} &lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>BCD </span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ä½†æ˜¯åºåˆ—åˆ‡åˆ†å…è®¸ä½¿ç”¨é™å€¼åŸŸï¼Œæ¯”å¦‚ï¼š<code>seq[3..1]</code> å°†ä¼šè¾“å‡º DCBã€‚</p>
<p>å€¼åŸŸä¸­çš„æ•°å­—å¿…é¡»æ˜¯åºåˆ—å¯ä½¿ç”¨çš„åˆæ³•ç´¢å¼•ï¼Œ å¦åˆ™æ¨¡æ¿çš„å¤„ç†å°†ä¼šç»ˆæ­¢å¹¶æŠ¥é”™ã€‚ä¸èƒ½å‡ºç°è´Ÿæ•°çš„ç´¢å¼•ï¼Œç´¢å¼•ä¸èƒ½è¶Šç•Œï¼Œä½†æ˜¯ <code>seq[100..&lt;100]</code> æˆ– <code>seq[100..*0]</code> æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºè¿™äº›å€¼åŸŸæ˜¯ç©ºçš„ï¼Œå°½ç®¡ç´¢å¼•è¶Šç•Œäº†ã€‚</p>
<p>é™åˆ¶é•¿åº¦çš„å€¼åŸŸï¼ˆ<code>start..*length</code>ï¼‰å’Œæ— å³è¾¹ç•Œå€¼åŸŸï¼ˆ<code>start..</code>ï¼‰é€‚ç”¨äºåˆ‡åˆ†ååºåˆ—çš„é•¿åº¦ã€‚å®ƒä»¬ä¼šåˆ‡åˆ†å¯ç”¨é¡¹ä¸­å°½å¯èƒ½å¤šçš„éƒ¨åˆ†ã€‚</p>
<h2 id="4-5-å“ˆå¸Œè¡¨æ“ä½œ"><a class="header-anchor" href="#4-5-å“ˆå¸Œè¡¨æ“ä½œ"></a>4.5 å“ˆå¸Œè¡¨æ“ä½œ</h2>
<blockquote>
<p>è¿æ¥</p>
</blockquote>
<p>åƒè¿æ¥å­—ç¬¦ä¸²é‚£æ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>+</code> å·çš„æ–¹å¼æ¥è¿æ¥å“ˆå¸Œè¡¨ã€‚å¦‚æœä¸¤ä¸ªå“ˆå¸Œè¡¨å«æœ‰é”®ç›¸åŒçš„é¡¹ï¼Œé‚£ä¹ˆåœ¨ <code>+</code> å· <mark>å³ä¾§</mark> çš„å“ˆå¸Œè¡¨ä¸­çš„é¡¹ä¼˜å…ˆã€‚</p>
<h2 id="4-6-ç®—æ•°è¿ç®—"><a class="header-anchor" href="#4-6-ç®—æ•°è¿ç®—"></a>4.6 ç®—æ•°è¿ç®—</h2>
<p>ç®—æ•°è¿ç®—åŒ…å«åŸºæœ¬çš„å››åˆ™è¿ç®—å’Œæ±‚æ¨¡è¿ç®—ï¼Œè¿ç®—ç¬¦æœ‰ï¼š</p>
<ul>
<li>åŠ æ³•ï¼š <code>+</code></li>
<li>å‡æ³•ï¼š <code>-</code></li>
<li>ä¹˜æ³•ï¼š <code>*</code></li>
<li>é™¤æ³•ï¼š <code>/</code></li>
<li>æ±‚æ¨¡ (æ±‚ä½™)ï¼š <code>%</code></li>
</ul>
<p>è¿›è¡Œç®—æ•°è¿ç®—çš„ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯ç»“æœä¸ºæ•°å­—çš„è¡¨è¾¾å¼ã€‚</p>
<p>ä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œ<code>+</code> å·å¯ä»¥ç”¨æ¥è¿æ¥å­—ç¬¦ä¸²ï¼Œå¦‚æœ <code>+</code> å·çš„ä¸€ç«¯æ˜¯å­—ç¬¦ä¸²ï¼Œ<code>+</code> å·çš„å¦å¤–ä¸€ç«¯æ˜¯æ•°å­—ï¼Œé‚£ä¹ˆæ•°å­—å°±ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼ˆä½¿ç”¨å½“å‰é¡µé¢è¯­è¨€çš„é€‚å½“æ ¼å¼ï¼‰ï¼Œä¹‹åä½¿ç”¨ <code>+</code> å·ä½œä¸ºå­—ç¬¦ä¸²è¿æ¥æ“ä½œç¬¦ã€‚</p>
<p>FreeMarker ä¸èƒ½è‡ªåŠ¨å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œåä¹‹å¯ä»¥è‡ªåŠ¨è¿›è¡Œã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åªæƒ³è·å–é™¤æ³•è®¡ç®—ï¼ˆæˆ–å…¶å®ƒè¿ç®—ï¼‰çš„æ•´æ•°éƒ¨åˆ†ï¼Œ è¿™å¯ä»¥ä½¿ç”¨å†…å»ºå‡½æ•° <code>int</code> æ¥è§£å†³ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${(x/2)?int}</span></span>
<span class="line"><span>${1.1?int}</span></span>
<span class="line"><span>${1.999?int}</span></span>
<span class="line"><span>${-1.1?int}</span></span>
<span class="line"><span>${-1.999?int}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>2</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>-1</span></span>
<span class="line"><span>-1</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h2 id="4-7-æ¯”è¾ƒè¿ç®—"><a class="header-anchor" href="#4-7-æ¯”è¾ƒè¿ç®—"></a>4.7 æ¯”è¾ƒè¿ç®—</h2>
<p>å¦‚æœè¦æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>=</code>ï¼Œæˆ–è€… <code>==</code>ï¼Œä¸¤è€…æ˜¯ç­‰æ•ˆçš„ã€‚</p>
<p><code>=</code> æˆ– <code>!=</code> ä¸¤è¾¹çš„è¡¨è¾¾å¼çš„ç»“æœéƒ½å¿…é¡»æ˜¯æ ‡é‡ï¼Œè€Œä¸”ä¸¤ä¸ªæ ‡é‡éƒ½å¿…é¡»æ˜¯ç›¸åŒç±»å‹ï¼ˆä¹Ÿå°±æ˜¯è¯´å­—ç¬¦ä¸²åªèƒ½å’Œå­—ç¬¦ä¸²æ¥æ¯”è¾ƒï¼Œæ•°å­—åªèƒ½å’Œæ•°å­—æ¥æ¯”è¾ƒç­‰ï¼‰å¦åˆ™å°†ä¼šå‡ºé”™ï¼Œ æ¨¡æ¿æ‰§è¡Œä¸­æ–­ã€‚</p>
<p>è¯·æ³¨æ„FreeMarkerè¿›è¡Œçš„æ˜¯ç²¾ç¡®çš„æ¯”è¾ƒï¼Œæ‰€ä»¥å­—ç¬¦ä¸²åœ¨æ¯”è¾ƒæ—¶è¦æ³¨æ„å¤§å°å†™å’Œç©ºæ ¼ï¼š <code>"x"</code> å’Œ <code>"x "</code> å’Œ <code>"X"</code> æ˜¯ä¸åŒçš„å€¼ã€‚</p>
<p>å¯¹æ•°å­—å’Œæ—¥æœŸç±»å‹çš„æ¯”è¾ƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>&lt;</code>ï¼Œ <code>&lt;=</code>ï¼Œ<code>&gt;=</code> å’Œ <code>&gt;</code>ã€‚ä¸èƒ½æŠŠå®ƒä»¬å½“ä½œå­—ç¬¦ä¸²æ¥æ¯”è¾ƒã€‚</p>
<p>ä½¿ç”¨ <code>&gt;=</code> å’Œ <code>&gt;</code> çš„æ—¶å€™æœ‰ä¸€ç‚¹å°é—®é¢˜ã€‚FreeMarker è§£é‡Š <code>&gt;</code> çš„æ—¶å€™å¯ä»¥æŠŠå®ƒå½“ä½œ FTL æ ‡ç­¾çš„ç»“æŸç¬¦ã€‚ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ <code>lt</code> ä»£æ›¿ <code>&lt;</code>ï¼Œ <code>lte</code> ä»£æ›¿ <code>&lt;=</code>ï¼Œ <code>gt</code> ä»£æ›¿ <code>&gt;</code> è¿˜æœ‰ <code>gte</code> ä»£æ›¿ <code>&gt;=</code>ï¼Œ ä¾‹å¦‚ <code>&lt;#if x gt y&gt;</code>ã€‚å¦å¤–ä¸€ä¸ªæŠ€å·§æ˜¯å°†è¡¨è¾¾å¼æ”¾åˆ°åœ†æ‹¬å·ä¸­ï¼Œä¾‹å¦‚ <code>&lt;#if (x &gt; y)&gt;</code>ï¼Œä½†ç¬¬äºŒç§æ˜¾ç„¶ä¸ä¼˜é›…ã€‚</p>
<h2 id="4-8-é€»è¾‘æ“ä½œ"><a class="header-anchor" href="#4-8-é€»è¾‘æ“ä½œ"></a>4.8 é€»è¾‘æ“ä½œ</h2>
<p>å¸¸ç”¨çš„é€»è¾‘æ“ä½œç¬¦ï¼š</p>
<ul>
<li>é€»è¾‘ æˆ–ï¼š <code>||</code></li>
<li>é€»è¾‘ ä¸ï¼š <code>&amp;&amp;</code></li>
<li>é€»è¾‘ éï¼š <code>!</code></li>
</ul>
<p>é€»è¾‘æ“ä½œç¬¦ä»…ä»…åœ¨å¸ƒå°”å€¼ä¹‹é—´æœ‰æ•ˆï¼Œè‹¥ç”¨åœ¨å…¶ä»–ç±»å‹å°†ä¼šäº§ç”Ÿé”™è¯¯å¯¼è‡´æ¨¡æ¿æ‰§è¡Œä¸­æ­¢ã€‚</p>
<h2 id="4-9-å†…å»ºå‡½æ•°"><a class="header-anchor" href="#4-9-å†…å»ºå‡½æ•°"></a>4.9 å†…å»ºå‡½æ•°</h2>
<p>å†…å»ºå‡½æ•°å°±åƒ FreeMarker åœ¨å¯¹è±¡ä¸­æ·»åŠ çš„æ–¹æ³•ä¸€æ ·ã€‚è¦é˜²æ­¢å’Œå®é™…æ–¹æ³•å’Œå…¶å®ƒå­å˜é‡çš„å‘½åå†²çªï¼Œåˆ™ä¸èƒ½ä½¿ç”¨ç‚¹ (<code>.</code>)ï¼Œè¿™é‡Œä½¿ç”¨é—®å· (<code>?</code>)æ¥å’Œçˆ¶å¯¹è±¡åˆ†éš”å¼€ã€‚</p>
<p>ä¸ºäº†ç®€æ´ï¼Œå¦‚æœæ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¿½ç•¥ <code>()</code>ï¼Œæ¯”å¦‚æƒ³è¦è·å– <code>path</code> çš„é•¿åº¦ï¼Œå°±å¯ä»¥å†™ä½œï¼š<code>path?length</code>ï¼Œ è€Œä¸æ˜¯ <code>path?length()</code>ã€‚</p>
<p>é‡è¦çš„å¸¸è§å†…å»ºå‡½æ•°ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${testString?upper_case}</span></span>
<span class="line"><span>${testString?html}</span></span>
<span class="line"><span>${testString?upper_case?html}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>${testSequence?size}</span></span>
<span class="line"><span>${testSequence?join(", ")}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å‡è®¾ <code>testString</code> ä¸­å­˜å‚¨äº†å­—ç¬¦ä¸²ã€ŒTom &amp; Jerryã€ï¼Œè€Œ <code>testSequnce</code> ä¸­å­˜å‚¨äº†å­—ç¬¦ä¸²ã€Œfooã€ï¼Œã€Œbarã€å’Œã€Œbazã€ï¼Œå°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>TOM &amp; JERRY</span></span>
<span class="line"><span>Tom &amp;amp; Jerry</span></span>
<span class="line"><span>TOM &amp;amp; JERRY</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3</span></span>
<span class="line"><span>foo, bar, baz</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å†…å»ºå‡½æ•°çš„å·¦ä¾§å¯ä»¥æ˜¯ä»»æ„çš„è¡¨è¾¾å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯å˜é‡åã€‚</p>
<p>å®Œæ•´çš„å†…å»ºå‡½æ•°å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_builtins.html">å†…å»ºå‡½æ•°å‚è€ƒ</a></p>
<h2 id="4-10-æ–¹æ³•è°ƒç”¨"><a class="header-anchor" href="#4-10-æ–¹æ³•è°ƒç”¨"></a>4.10 æ–¹æ³•è°ƒç”¨</h2>
<p>å¦‚æœæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨æ–¹æ³•è°ƒç”¨æ“ä½œã€‚æ–¹æ³•è°ƒç”¨æ“ä½œæ˜¯ä½¿ç”¨é€—å·æ¥åˆ†å‰²åœ¨æ‹¬å·å†…çš„è¡¨è¾¾å¼è€Œå½¢æˆå‚æ•°åˆ—è¡¨ï¼Œè¿™äº›å€¼å°±æ˜¯å‚æ•°ã€‚æ–¹æ³•è°ƒç”¨æ“ä½œå°†è¿™äº›å€¼ä¼ é€’ç»™æ–¹æ³•ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœã€‚è¿™ä¸ªç»“æœå°±æ˜¯æ•´ä¸ªæ–¹æ³•è°ƒç”¨è¡¨è¾¾å¼çš„å€¼ã€‚</p>
<p>å‡è®¾ç¨‹åºå‘˜å®šä¹‰äº†ä¸€ä¸ªå¯ä¾›è°ƒç”¨çš„æ–¹æ³• <code>repeat</code>ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°å­—ç±»å‹ã€‚æ–¹æ³•çš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œæ–¹æ³•è¦å®Œæˆçš„æ“ä½œæ˜¯å°†ç¬¬ä¸€ä¸ªå‚æ•°é‡å¤æ˜¾ç¤ºï¼Œæ˜¾ç¤ºçš„æ¬¡æ•°æ˜¯ç¬¬äºŒä¸ªå‚æ•°è®¾å®šçš„å€¼ã€‚</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${repeat("Foo", 3)}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>FooFooFoo</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æ–¹æ³•è°ƒç”¨ä¹Ÿæ˜¯æ™®é€šè¡¨è¾¾å¼ï¼Œå’Œå…¶å®ƒéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>${repeat(repeat("x", 2), 3) + repeat("Foo", 4)?upper_case}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>xxxxxxFOOFOOFOOFOO</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h2 id="4-11-èµ‹å€¼è¿ç®—ç¬¦"><a class="header-anchor" href="#4-11-èµ‹å€¼è¿ç®—ç¬¦"></a>4.11 èµ‹å€¼è¿ç®—ç¬¦</h2>
<p>è¿™äº›å¹¶ä¸æ˜¯è¡¨è¾¾å¼ï¼Œåªæ˜¯å¤åˆ¶æŒ‡ä»¤è¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ <code>assign</code>, <code>local</code>å’Œ <code>global</code>ã€‚ ç…§è¿™æ ·ï¼Œå®ƒä»¬ä¸èƒ½ä»»æ„è¢«ä½¿ç”¨ã€‚</p>
<p><code>&lt;#assign x += y&gt;</code> æ˜¯ <code>&lt;#assign x = x + y&gt;</code> çš„ç®€å†™ï¼Œ<code>&lt;#assign x *= y&gt;</code> æ˜¯ <code>&lt;#assign x = x * y&gt;</code>çš„ç®€å†™ç­‰ç­‰â€¦</p>
<p><code>&lt;#assign x++ &gt;</code> å’Œ <code>&lt;#assign x += 1&gt;</code> ï¼ˆæˆ– <code>&lt;#assign x = x + 1&gt;</code>ï¼‰ä¸åŒï¼Œå®ƒåªåšç®—æœ¯åŠ æ³•è¿ç®—ï¼ˆå¦‚æœå˜é‡ä¸æ˜¯æ•°å­—çš„è¯å°±ä¼šå¤±è´¥ï¼‰ï¼Œè€Œå…¶å®ƒçš„æ˜¯è¿›è¡Œå­—ç¬¦ä¸²ï¼Œåºåˆ—è¿æ¥å’Œå“ˆå¸Œè¡¨è¿æ¥çš„é‡è½½ã€‚ <code>&lt;#assign x-- &gt;</code> æ˜¯ <code>&lt;#assign x -= 1&gt;</code> çš„ç®€å†™ã€‚</p>
<h2 id="4-12-æ“ä½œç¬¦ä¼˜å…ˆçº§"><a class="header-anchor" href="#4-12-æ“ä½œç¬¦ä¼˜å…ˆçº§"></a>4.12 æ“ä½œç¬¦ä¼˜å…ˆçº§</h2>
<p>ä¸‹è¡¨ä¸­çš„è¿ç®—ç¬¦æŒ‰ç…§ä¼˜å…ˆç¨‹åº¦é™åºæ’åˆ—ï¼šä¸Šé¢çš„æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äºå®ƒä¸‹é¢çš„ã€‚é«˜ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦æ‰§è¡Œè¦å…ˆäºä¼˜å…ˆçº§æ¯”å®ƒä½çš„ã€‚è¡¨æ ¼åŒä¸€è¡Œä¸Šçš„ä¸¤ä¸ªæ“ä½œç¬¦ä¼˜å…ˆçº§ç›¸åŒã€‚å½“æœ‰ç›¸åŒä¼˜å…ˆçº§çš„äºŒå…ƒè¿ç®—ç¬¦æŒ¨ç€å‡ºç°æ—¶ï¼Œå®ƒä»¬æŒ‰ç…§ä»å·¦åˆ°å³çš„åŸåˆ™è¿ç®—ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦ç»„</th>
<th style="text-align:center">è¿ç®—ç¬¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æœ€é«˜ä¼˜å…ˆçº§è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>[subvarName]</code> <code>[subStringRange]</code> <code>.</code> <code>?(methodParams)</code> <code>expr! </code> <code>expr??</code></td>
</tr>
<tr>
<td style="text-align:center">ä¸€å…ƒå‰ç¼€è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>+ - !</code></td>
</tr>
<tr>
<td style="text-align:center">ä¹˜é™¤æ³•ï¼Œæ±‚æ¨¡è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>* / %</code></td>
</tr>
<tr>
<td style="text-align:center">åŠ å‡æ³•è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>+ -</code></td>
</tr>
<tr>
<td style="text-align:center">æ•°å­—å€¼åŸŸ</td>
<td style="text-align:center"><code>..</code> <code>..&lt;</code> <code>..!</code> <code>..*</code></td>
</tr>
<tr>
<td style="text-align:center">å…³ç³»è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>&lt; &gt; &lt;= &gt;=</code> ï¼ˆ<code>gt</code>ï¼Œ<code>lt</code>ï¼Œetc.ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">ç›¸ç­‰ï¼Œä¸ç­‰è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>== != =</code></td>
</tr>
<tr>
<td style="text-align:center">é€»è¾‘ ã€Œä¸ã€ è¿ç®—ç¬¦</td>
<td style="text-align:center"><code>&amp;&amp;</code></td>
</tr>
<tr>
<td style="text-align:center">é€»è¾‘ã€Œæˆ–ã€è¿ç®—ç¬¦</td>
<td style="text-align:center">`</td>
</tr>
</tbody>
</table>
<h1 id="5-æ’å€¼"><a class="header-anchor" href="#5-æ’å€¼"></a>5. æ’å€¼</h1>
<p>æ’å€¼çš„ä½¿ç”¨æ ¼å¼æ˜¯ï¼š <code>${expression}</code>ï¼Œè¿™é‡Œçš„ <code>expression</code> å¯ä»¥æ˜¯æ‰€æœ‰ç§ç±»çš„è¡¨è¾¾å¼(æ¯”å¦‚ <code>${100 + x}</code>)ã€‚æ’å€¼åªèƒ½åœ¨æ–‡æœ¬åŒºå’Œå­—ç¬¦ä¸²è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚</p>
<p>è¡¨è¾¾å¼çš„ç»“æœå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—æˆ–è€…æ—¥æœŸ / æ—¶é—´ / æ—¥æœŸ - æ—¶é—´å€¼ï¼Œ å› ä¸ºï¼ˆé»˜è®¤æ˜¯è¿™æ ·ï¼‰ä»…ä»…è¿™äº›å€¼å¯ä»¥è¢«æ’å€¼è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å…¶å®ƒç±»å‹çš„å€¼ï¼ˆæ¯”å¦‚å¸ƒå°”å€¼ï¼Œåºåˆ—ï¼‰å¿…é¡»ã€Œæ‰‹åŠ¨åœ°ã€è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆåç»­ä¼šæœ‰ä¸€äº›å»ºè®®ï¼‰ï¼Œ å¦åˆ™å°±ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä¸­æ­¢æ¨¡æ¿æ‰§è¡Œã€‚</p>
<p>å…·ä½“æ’å€¼æŒ‡å—å¯ä»¥å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/dgui_template_valueinsertion.html">æ’å€¼</a></p>
<h1 id="6-è‡ªå®šä¹‰æŒ‡ä»¤"><a class="header-anchor" href="#6-è‡ªå®šä¹‰æŒ‡ä»¤"></a>6. è‡ªå®šä¹‰æŒ‡ä»¤</h1>
<h2 id="6-1-åŸºæœ¬å†…å®¹"><a class="header-anchor" href="#6-1-åŸºæœ¬å†…å®¹"></a>6.1 åŸºæœ¬å†…å®¹</h2>
<p>å®æ˜¯æœ‰ä¸€ä¸ªå˜é‡åçš„æ¨¡æ¿ç‰‡æ®µã€‚å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å®ä½œä¸ºè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œ è¿™æ ·å°±èƒ½è¿›è¡Œé‡å¤æ€§çš„å·¥ä½œã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro greet&gt;</span></span>
<span class="line"><span>  &lt;font size="+2"&gt;Hello Joe!&lt;/font&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åœ¨ <code>&lt;#macro greet&gt;</code> å’Œ <code>&lt;/#macro&gt;</code> ä¹‹é—´çš„å†…å®¹ï¼ˆç§°ä¸º <strong>å®å®šä¹‰ä½“</strong>ï¼‰å°†ä¼šåœ¨ä½¿ç”¨è¯¥å˜é‡ä½œä¸ºæŒ‡ä»¤æ—¶æ‰§è¡Œã€‚å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@greet&gt;&lt;/@greet&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æˆ–è€…</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@greet/&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ç„¶åä¼šè¾“å‡ºï¼š</p>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#FFFFFF">font</span><span style="color:#D19A66"> size</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"+2"</span><span style="color:#ABB2BF">&gt;Hello Joe!&lt;/</span><span style="color:#FFFFFF">font</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h2 id="6-2-å‚æ•°"><a class="header-anchor" href="#6-2-å‚æ•°"></a>6.2 å‚æ•°</h2>
<p>åœ¨è‡ªå®šä¹‰æŒ‡ä»¤æ—¶ï¼Œè¿˜å¯ä»¥æŒ‡å®šè‹¥å¹²ä¸ªå‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro greet person&gt;</span></span>
<span class="line"><span>  &lt;font size="+2"&gt;Hello ${person}!&lt;/font&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@greet person="Fred"/&gt; and &lt;@greet person="Batman"/&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æœ€ç»ˆæ‰“å°ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#FFFFFF">font</span><span style="color:#D19A66"> size</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"+2"</span><span style="color:#ABB2BF">&gt;Hello Fred!&lt;/</span><span style="color:#FFFFFF">font</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF"> and   &lt;</span><span style="color:#FFFFFF">font</span><span style="color:#D19A66"> size</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"+2"</span><span style="color:#ABB2BF">&gt;Hello Batman!&lt;/</span><span style="color:#FFFFFF">font</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p><code>=</code> å³è¾¹ä¸ä¸€å®šæ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ FTL è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼š <code>&lt;@greet person=Fred/&gt;</code> ä¹Ÿæ„å‘³ç€ä½¿ç”¨å˜é‡çš„å€¼ <code>Fred</code> ä½œä¸º <code>person</code> å‚æ•°ï¼Œ è€Œä¸æ˜¯å­—ç¬¦ä¸²<code>"Fred"</code>ã€‚ç”šè‡³è¿˜å¯ä»¥æ˜¯å¤æ‚è¡¨è¾¾å¼ã€‚</p>
<p>è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œå‚æ•°çš„é¡ºåºä¸é‡è¦ï¼Œå› ä¸ºåœ¨ä½¿ç”¨æ—¶æˆ‘ä»¬å·²ç»æŒ‡å®šäº†å‚æ•°åå’Œå¯¹åº”çš„å€¼ã€‚</p>
<p><mark>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ</mark> åœ¨ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤æ—¶ï¼Œä¸èƒ½ä½¿ç”¨æœªæåŠçš„å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå¿…é¡»ç»™å‡ºåœ¨å®ä¸­å®šä¹‰æ‰€æœ‰å‚æ•°çš„å€¼ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤æ—¶ï¼Œå¯ä»¥ç»™å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro greet person color="black"&gt;</span></span>
<span class="line"><span>  &lt;font size="+2" color="${color}"&gt;Hello ${person}!&lt;/font&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åç»­å¯ä»¥è¿™æ ·ä½¿ç”¨å®ï¼š<code>&lt;@greet person="Fred"/&gt;</code>ï¼Œå› ä¸ºå®ƒå’Œ <code>&lt;@greet person="Fred" color="black"/&gt;</code> æ˜¯ç›¸ç­‰çš„ã€‚å¦‚æœåœ¨ä½¿ç”¨æ—¶é‡æ–°è®¾ç½® color çš„å€¼ï¼Œé‚£ä¹ˆæ–°å€¼ä¼šè¦†ç›–é»˜è®¤å€¼ã€‚</p>
<p>æ˜ç™½ä¸‹é¢è¿™ä¸€ç‚¹æ˜¯è‡³å…³é‡è¦çš„ï¼š<code>someParam=foo</code> å’Œ <code>someParam="${foo}"</code> æ˜¯ä¸åŒçš„ã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œ æ˜¯æŠŠå˜é‡ <code>foo</code> çš„å€¼ä½œä¸ºå‚æ•°çš„å€¼æ¥ä½¿ç”¨ã€‚ç¬¬äºŒç§æƒ…å†µåˆ™æ˜¯ä½¿ç”¨æ’å€¼å½¢å¼çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå‚æ•°å€¼å°±æ˜¯å­—ç¬¦ä¸²äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ<code>foo</code> çš„å€¼å‘ˆç°ä¸ºæ–‡æœ¬ï¼Œ è€Œä¸ç®¡ <code>foo</code> æ˜¯ä»€ä¹ˆç±»å‹çš„ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š <code>someParam=3/4</code> å’Œ <code>someParam="${3/4}"</code> æ˜¯ä¸åŒçš„ã€‚ å¦‚æœæŒ‡ä»¤éœ€è¦ <code>someParam</code> æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼Œ é‚£ä¹ˆå°±ä¸è¦ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚åˆ‡è®°ä¸è¦æ”¹å˜è¿™äº›ã€‚</p>
<h2 id="6-3-åµŒå¥—å†…å®¹"><a class="header-anchor" href="#6-3-åµŒå¥—å†…å®¹"></a>6.3 åµŒå¥—å†…å®¹</h2>
<p>è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åµŒå¥—å†…å®¹ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥ä¸ºåµŒå¥—çš„å†…å®¹ç”»å‡ºè¾¹æ¡†çš„å®ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro border&gt;</span></span>
<span class="line"><span>  &lt;table border=4 cellspacing=0 cellpadding=4&gt;&lt;tr&gt;&lt;td&gt;</span></span>
<span class="line"><span>    &lt;#nested&gt;</span></span>
<span class="line"><span>  &lt;/tr&gt;&lt;/td&gt;&lt;/table&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p><code>&lt;#nested&gt;</code> æŒ‡ä»¤æ‰§è¡Œä½äºå¼€å§‹å’Œç»“æŸæ ‡è®°æŒ‡ä»¤ä¹‹é—´çš„æ¨¡æ¿ä»£ç æ®µã€‚ å¦‚æœè¿™æ ·å†™ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@border&gt;The bordered text&lt;/@border&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>é‚£ä¹ˆä¼šè¾“å‡ºï¼š</p>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">table</span><span style="color:#D19A66"> border</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">4</span><span style="color:#D19A66"> cellspacing</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">0</span><span style="color:#D19A66"> cellpadding</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">4</span><span style="color:#ABB2BF">&gt;&lt;</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;&lt;</span><span style="color:#E06C75">td</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">    The bordered text</span></span>
<span class="line"><span style="color:#ABB2BF">    &lt;/</span><span style="color:#E06C75">td</span><span style="color:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75">tr</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;/</span><span style="color:#E06C75">table</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p><code>&lt;#nested&gt;</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro do_thrice&gt;</span></span>
<span class="line"><span>  &lt;#nested&gt;</span></span>
<span class="line"><span>  &lt;#nested&gt;</span></span>
<span class="line"><span>  &lt;#nested&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span>&lt;@do_thrice&gt;</span></span>
<span class="line"><span>  Anything.</span></span>
<span class="line"><span>&lt;/@do_thrice&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>é‚£ä¹ˆå°±ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>Anything.</span></span>
<span class="line"><span>Anything.</span></span>
<span class="line"><span>Anything.</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å¦‚æœä¸ä½¿ç”¨ <code>nested</code> æŒ‡ä»¤ï¼Œ é‚£ä¹ˆåµŒå¥—çš„å†…å®¹å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚æ¯”å¦‚å‰é¢è‡ªå®šä¹‰çš„ <code>great</code> æŒ‡ä»¤ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro greet&gt;</span></span>
<span class="line"><span>  &lt;font size="+2"&gt;Hello Joe!&lt;/font&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ç„¶åè¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@greet person="Joe"&gt;</span></span>
<span class="line"><span>  Anything.</span></span>
<span class="line"><span>&lt;/@greet&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p><code>greet</code> å®æ²¡æœ‰ä½¿ç”¨ <code>nested</code> æŒ‡ä»¤ï¼ŒFreeMarker ä¸ä¼šæŠŠå®ƒè§†ä¸ºé”™è¯¯ï¼Œåªæ˜¯è¾“å‡ºï¼š</p>
<figure class="highlight html line-numbers" data-language="HTML">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#FFFFFF">font</span><span style="color:#D19A66"> size</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"+2"</span><span style="color:#ABB2BF">&gt;Hello Joe!&lt;/</span><span style="color:#FFFFFF">font</span><span style="color:#ABB2BF">&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åµŒå¥—çš„å†…å®¹å¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆçš„ FTLï¼ŒåŒ…å«å…¶ä»–çš„ç”¨æˆ·è‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p>
<p>åœ¨åµŒå¥—çš„å†…å®¹ä¸­ï¼Œå®çš„å±€éƒ¨å˜é‡æ˜¯ä¸å¯è§çš„ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro repeat count&gt;</span></span>
<span class="line"><span>  &lt;#local y = "test"&gt;</span></span>
<span class="line"><span>  &lt;#list 1..count as x&gt;</span></span>
<span class="line"><span>    ${y} ${count}/${x}: &lt;#nested&gt;</span></span>
<span class="line"><span>  &lt;/#list&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span>&lt;@repeat count=3&gt;${y!"?"} ${x!"?"} ${count!"?"}&lt;/@repeat&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>test 3/1: ? ? ?</span></span>
<span class="line"><span>test 3/2: ? ? ?</span></span>
<span class="line"><span>test 3/3: ? ? ?</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æ­¤å¤–ä¸åŒçš„å±€éƒ¨å˜é‡çš„è®¾ç½®æ˜¯ä¸ºæ¯ä¸ªå®è‡ªå·±è°ƒç”¨çš„ï¼Œä¸ä¼šå¯¼è‡´æ··ä¹±ã€‚æ¯”å¦‚æœ‰æ¨¡æ¿ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro test foo&gt;${foo} (&lt;#nested&gt;) ${foo}&lt;/#macro&gt;</span></span>
<span class="line"><span>&lt;@test foo="A"&gt;&lt;@test foo="B"&gt;&lt;@test foo="C"/&gt;&lt;/@test&gt;&lt;/@test&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>A (B (C () C) B) A</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h2 id="6-4-å®å’Œå¾ªç¯å˜é‡"><a class="header-anchor" href="#6-4-å®å’Œå¾ªç¯å˜é‡"></a>6.4 å®å’Œå¾ªç¯å˜é‡</h2>
<p>åƒ <code>list</code> è¿™æ ·çš„é¢„å®šä¹‰æŒ‡ä»¤å¯ä»¥ä½¿ç”¨å¾ªç¯å˜é‡ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤ä¹Ÿå¯ä»¥æœ‰å¾ªç¯å˜é‡ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro do_thrice&gt;</span></span>
<span class="line"><span>  &lt;#nested 1&gt;</span></span>
<span class="line"><span>  &lt;#nested 2&gt;</span></span>
<span class="line"><span>  &lt;#nested 3&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span>&lt;@do_thrice ; x&gt; &lt;#-- user-defined directive uses ";" instead of "as" --&gt;</span></span>
<span class="line"><span>  ${x} Anything.</span></span>
<span class="line"><span>&lt;/@do_thrice&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>1 Anything.</span></span>
<span class="line"><span>2 Anything.</span></span>
<span class="line"><span>3 Anything.</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¯­æ³•è§„åˆ™æ˜¯ç»™ç¡®å®šã€Œå¾ªç¯ã€çš„å¾ªç¯å˜é‡ä¼ é€’çœŸå®å€¼ï¼ˆæ¯”å¦‚é‡å¤åµŒå¥—å†…å®¹ï¼‰æ¥ä½œä¸º <code>nested</code> æŒ‡ä»¤çš„å‚æ•°ï¼ˆå½“ç„¶å‚æ•°å¯ä»¥æ˜¯ä»»æ„çš„è¡¨è¾¾å¼ï¼‰ã€‚ å¾ªç¯å˜é‡çš„åç§°æ˜¯åœ¨è‡ªå®šä¹‰æŒ‡ä»¤çš„å¼€å§‹æ ‡è®°ï¼ˆ<code>&lt;@...&gt;</code>ï¼‰çš„å‚æ•°åé¢é€šè¿‡åˆ†å·ç¡®å®šçš„ã€‚</p>
<p>ä¸€ä¸ªå®å¯ä»¥ä½¿ç”¨å¤šä¸ªå¾ªç¯å˜é‡ï¼ˆæ³¨æ„å˜é‡çš„é¡ºåºï¼‰ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro repeat count&gt;</span></span>
<span class="line"><span>  &lt;#list 1..count as x&gt;</span></span>
<span class="line"><span>    &lt;#nested x, x/2, x==count&gt;</span></span>
<span class="line"><span>  &lt;/#list&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span>&lt;@repeat count=4 ; c, halfc, last&gt;</span></span>
<span class="line"><span>  ${c}. ${halfc}&lt;#if last&gt; Last!&lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/@repeat&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>1. 0.5</span></span>
<span class="line"><span>2. 1</span></span>
<span class="line"><span>3. 1.5</span></span>
<span class="line"><span>4. 2 Last!</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åœ¨è‡ªå®šä¹‰æŒ‡ä»¤çš„å¼€å§‹æ ‡ç­¾ï¼ˆåˆ†å·ä¹‹åï¼‰ä¸ºå¾ªç¯å˜é‡æŒ‡å®šä¸åŒçš„æ•°å­—æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œ è€Œä¸èƒ½åœ¨ <code>nested</code> æŒ‡ä»¤ä¸Šä½¿ç”¨ã€‚å¦‚æœåœ¨åˆ†å·ä¹‹åæŒ‡å®šçš„å¾ªç¯å˜é‡å°‘ï¼Œ é‚£ä¹ˆå°±çœ‹ä¸åˆ° <code>nested</code> æŒ‡ä»¤æä¾›çš„æœ€åçš„å€¼ï¼Œ å› ä¸ºæ²¡æœ‰å¾ªç¯å˜é‡æ¥å­˜å‚¨è¿™äº›å€¼ï¼Œä¸‹é¢è¿™æ ·ä½¿ç”¨æ˜¯å¯ä»¥çš„ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@repeat count=4 ; c, halfc, last&gt;</span></span>
<span class="line"><span>  ${c}. ${halfc}&lt;#if last&gt; Last!&lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/@repeat&gt;</span></span>
<span class="line"><span>&lt;@repeat count=4 ; c, halfc&gt;</span></span>
<span class="line"><span>  ${c}. ${halfc}</span></span>
<span class="line"><span>&lt;/@repeat&gt;</span></span>
<span class="line"><span>&lt;@repeat count=4&gt;</span></span>
<span class="line"><span>  Just repeat it...</span></span>
<span class="line"><span>&lt;/@repeat&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å¦‚æœåœ¨åˆ†å·åé¢æŒ‡å®šäº†æ¯” <code>nested</code> æŒ‡ä»¤è¿˜å¤šçš„å˜é‡ï¼Œ é‚£ä¹ˆæœ€åçš„å¾ªç¯å˜é‡å°†ä¸ä¼šè¢«åˆ›å»ºï¼ˆåœ¨åµŒå¥—å†…å®¹ä¸­ä¸ä¼šè¢«å®šä¹‰ï¼‰ã€‚</p>
<h2 id="6-5-é€’å½’ä¸­ä½¿ç”¨åµŒå¥—å†…å®¹"><a class="header-anchor" href="#6-5-é€’å½’ä¸­ä½¿ç”¨åµŒå¥—å†…å®¹"></a>6.5  é€’å½’ä¸­ä½¿ç”¨åµŒå¥—å†…å®¹</h2>
<p>æ„å»ºçš„æ¨¡æ¿å‚æ•°ï¼š</p>
<figure class="highlight java line-numbers" data-language="JAVA">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">private</span><span style="color:#E5C07B"> Map</span><span style="color:#56B6C2">&lt;</span><span style="color:#E06C75">String</span><span style="color:#ABB2BF">,</span><span style="color:#E06C75"> Object</span><span style="color:#56B6C2">&gt;</span><span style="color:#61AFEF"> buildTemplateParam</span><span style="color:#E06C75">() {</span></span>
<span class="line"><span style="color:#C678DD">    var</span><span style="color:#E06C75"> entityMap </span><span style="color:#56B6C2">=</span><span style="color:#E5C07B"> Map</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">of</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379">            "1"</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">new</span><span style="color:#61AFEF"> Entity</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Son"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"son"</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#98C379">            "2"</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">new</span><span style="color:#61AFEF"> Entity</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Parent"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"parent"</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#98C379">            "3"</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">new</span><span style="color:#61AFEF"> Entity</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Grandson"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"grandson"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    );</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> Map</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">of</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379">            "entityMap"</span><span style="color:#ABB2BF">, entityMap,</span></span>
<span class="line"><span style="color:#98C379">            "path"</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">List</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">of</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"2"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"1"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"3"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    );</span></span>
<span class="line"><span style="color:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> * æ¨¡æ¿ä½¿ç”¨å‚æ•°ï¼Œä¸å¯ä¿®æ”¹ public çš„è®¿é—®ä¿®é¥°ç¬¦</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF">@</span><span style="color:#E5C07B">Getter</span></span>
<span class="line"><span style="color:#ABB2BF">@</span><span style="color:#E5C07B">AllArgsConstructor</span></span>
<span class="line"><span style="color:#C678DD">public</span><span style="color:#C678DD"> static</span><span style="color:#C678DD"> class</span><span style="color:#E5C07B"> Entity</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    private</span><span style="color:#E5C07B"> String</span><span style="color:#E06C75"> type</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD">    private</span><span style="color:#E5C07B"> String</span><span style="color:#E06C75"> name</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åœ¨å¤„ç†ç±»ä¼¼ <code>ä¸»-å­-å­™</code> çš„èšåˆç»“æ„æ—¶ï¼Œç»å¸¸éœ€è¦é€’å½’è°ƒç”¨å®ï¼Œè€Œåœ¨å¤„ç†æœ€åä¸€å±‚æ¨¡æ¿å‚æ•°æ—¶ï¼Œæ‰§è¡ŒåµŒå¥—å†…å®¹ã€‚</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;@precessChildrenAttribute entityMap "dto" path 0 ; nestedParam&gt;</span></span>
<span class="line"><span>    ${nestedParam}.addError("Error Info");</span></span>
<span class="line"><span>&lt;/@precessChildrenAttribute&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#macro precessChildrenAttribute entityMap paramName path index &gt;</span></span>
<span class="line"><span>    &lt;#if index lt path?size&gt;</span></span>
<span class="line"><span>        &lt;#local cur = entityMap[path[index]]</span></span>
<span class="line"><span>                , curCapName = cur.name?cap_first</span></span>
<span class="line"><span>                , subEntity = "item" + cur.name?cap_first&gt;</span></span>
<span class="line"><span>        if (${paramName}.get${curCapName}DtoList() != null) {</span></span>
<span class="line"><span>            for(${cur.type} ${subEntity} : ${paramName}.get${curCapName}DtoList()) {</span></span>
<span class="line"><span>                if (${subEntity} != null) {</span></span>
<span class="line"><span>                    &lt;#-- é€’å½’è°ƒç”¨å®ï¼Œè°ƒç”¨æ—¶å£°æ˜å¾ªç¯å˜é‡ --&gt;</span></span>
<span class="line"><span>                    &lt;@precessChildrenAttribute entityMap subEntity path index + 1 ; nestedParam&gt;</span></span>
<span class="line"><span>                        &lt;#-- åµŒå¥—å†…å®¹ä½¿ç”¨è°ƒç”¨å®æ—¶å£°æ˜çš„å¾ªç¯å˜é‡ --&gt;</span></span>
<span class="line"><span>                        &lt;#nested nestedParam&gt;</span></span>
<span class="line"><span>                    &lt;/@precessChildrenAttribute&gt;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    &lt;#elseif index == path?size&gt;</span></span>
<span class="line"><span>        &lt;#-- æœ€åè°ƒç”¨çš„åµŒå¥—å†…å®¹ï¼Œä¼ å…¥å®é™…çš„å‚æ•° --&gt;</span></span>
<span class="line"><span>        &lt;#nested paramName&gt;</span></span>
<span class="line"><span>    &lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight java line-numbers" data-language="JAVA">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">if</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">dto</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getParentDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#56B6C2"> !=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">    for</span><span style="color:#E06C75">(</span><span style="color:#E5C07B">Parent</span><span style="color:#E06C75"> itemParent </span><span style="color:#C678DD">:</span><span style="color:#E5C07B"> dto</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getParentDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">        if</span><span style="color:#E06C75"> (itemParent </span><span style="color:#56B6C2">!=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">            if</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">itemParent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getSonDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#56B6C2"> !=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                for</span><span style="color:#E06C75">(</span><span style="color:#E5C07B">Son</span><span style="color:#E06C75"> itemSon </span><span style="color:#C678DD">:</span><span style="color:#E5C07B"> itemParent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getSonDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                    if</span><span style="color:#E06C75"> (itemSon </span><span style="color:#56B6C2">!=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                        if</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">itemSon</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getGrandsonDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#56B6C2"> !=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                            for</span><span style="color:#E06C75">(</span><span style="color:#E5C07B">Grandson</span><span style="color:#E06C75"> itemGrandson </span><span style="color:#C678DD">:</span><span style="color:#E5C07B"> itemSon</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getGrandsonDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                                if</span><span style="color:#E06C75"> (itemGrandson </span><span style="color:#56B6C2">!=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B">                                    itemGrandson</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addError</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Error Info"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75">                                }</span></span>
<span class="line"><span style="color:#E06C75">                            }</span></span>
<span class="line"><span style="color:#E06C75">                        }</span></span>
<span class="line"><span style="color:#E06C75">                    }</span></span>
<span class="line"><span style="color:#E06C75">                }</span></span>
<span class="line"><span style="color:#E06C75">            }</span></span>
<span class="line"><span style="color:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75">}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸­ï¼Œå®çš„å†…éƒ¨ä¸æ­¢ä¸€ä¸ª <code>&lt;#nested&gt;</code>ï¼Œå¹¶è¦æ±‚å®ƒä»¬ç”Ÿæˆä¸åŒçš„åµŒå¥—å†…å®¹ã€‚æ­¤æ—¶å¯ä»¥åœ¨è°ƒç”¨å®æ—¶é¢å¤–å®šä¹‰ä¸€ä¸ªå¾ªç¯å˜é‡ï¼Œå®ƒä½œä¸º <code>&lt;#nested&gt;</code> çš„æ ‡è¯†ï¼Œä»¥ä¾¿åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨å®æ—¶èƒ½å¤Ÿæ ¹æ®è¿™ä¸ªæ ‡è¯†ç”Ÿæˆä¸åŒå†…å®¹ã€‚</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#-- nestedPosition ä½œä¸ºåµŒå¥—å†…å®¹çš„æ ‡è¯† --&gt;</span></span>
<span class="line"><span>&lt;@precessChildrenAttribute entityMap "dto" path 0 ; param, subParam, nestedPosition&gt;</span></span>
<span class="line"><span>    &lt;#-- æ ‡è¯†ä¸º if æ—¶ç”Ÿæˆä¸‹è¿°å†…å®¹ --&gt;</span></span>
<span class="line"><span>    &lt;#if nestedPosition == "if"&gt;</span></span>
<span class="line"><span>        ${param}.addError("Error Info");</span></span>
<span class="line"><span>    &lt;#else &gt;</span></span>
<span class="line"><span>        &lt;#-- å¦åˆ™ç”Ÿæˆä¸‹è¿°å†…å®¹ --&gt;</span></span>
<span class="line"><span>        ${subParam}.addError("Error Info");</span></span>
<span class="line"><span>    &lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/@precessChildrenAttribute&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#macro precessChildrenAttribute entityMap paramName path index &gt;</span></span>
<span class="line"><span>    &lt;#if index lt path?size&gt;</span></span>
<span class="line"><span>        &lt;#local cur = entityMap[path[index]]</span></span>
<span class="line"><span>                , curCapName = cur.name?cap_first</span></span>
<span class="line"><span>                , subEntity = "item" + cur.name?cap_first&gt;</span></span>
<span class="line"><span>        if (CollectionUtils.isEmpty(${paramName}.get${curCapName}DtoList())) {</span></span>
<span class="line"><span>            &lt;#-- åµŒå¥—å†…å®¹æ ‡è¯†åœ¨å®šä¹‰å®å£°æ˜ &lt;#nested&gt; æ—¶ä¼ å…¥ --&gt;</span></span>
<span class="line"><span>            &lt;#nested paramName subEntity "if" &gt;</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>            for (${cur.type} ${subEntity} : ${paramName}.get${curCapName}DtoList()) {</span></span>
<span class="line"><span>                if (${subEntity} != null) {</span></span>
<span class="line"><span>                    &lt;#-- é€’å½’è°ƒç”¨å®æ—¶ï¼Œå¾ªç¯å˜é‡ä¸€ä¸ªä¸èƒ½å°‘ --&gt;</span></span>
<span class="line"><span>                    &lt;@precessChildrenAttribute entityMap subEntity path index + 1 ;  param, subParam, nestedPosition&gt;</span></span>
<span class="line"><span>                        &lt;#nested param, subParam, nestedPosition&gt;</span></span>
<span class="line"><span>                    &lt;/@precessChildrenAttribute&gt;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    &lt;#elseif index == path?size&gt;</span></span>
<span class="line"><span>        &lt;#-- åµŒå¥—å†…å®¹æ ‡è¯†åœ¨å®šä¹‰å®å£°æ˜ &lt;#nested&gt; æ—¶ä¼ å…¥ --&gt;</span></span>
<span class="line"><span>        &lt;#nested "" paramName ""&gt;</span></span>
<span class="line"><span>    &lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight java line-numbers" data-language="JAVA">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">if</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">CollectionUtils</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isEmpty</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">dto</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getParentDtoList</span><span style="color:#ABB2BF">())</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B">    dto</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addError</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Error Info"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75">} </span><span style="color:#C678DD">else</span><span style="color:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD">    for</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">Parent</span><span style="color:#E06C75"> itemParent </span><span style="color:#C678DD">:</span><span style="color:#E5C07B"> dto</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getParentDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">        if</span><span style="color:#E06C75"> (itemParent </span><span style="color:#56B6C2">!=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">            if</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">CollectionUtils</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isEmpty</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">itemParent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getSonDtoList</span><span style="color:#ABB2BF">())</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B">                itemParent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addError</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Error Info"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75">            } </span><span style="color:#C678DD">else</span><span style="color:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD">                for</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">Son</span><span style="color:#E06C75"> itemSon </span><span style="color:#C678DD">:</span><span style="color:#E5C07B"> itemParent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getSonDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                    if</span><span style="color:#E06C75"> (itemSon </span><span style="color:#56B6C2">!=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                        if</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">CollectionUtils</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isEmpty</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">itemSon</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getGrandsonDtoList</span><span style="color:#ABB2BF">())</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B">                            itemSon</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addError</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Error Info"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75">                        } </span><span style="color:#C678DD">else</span><span style="color:#E06C75"> {</span></span>
<span class="line"><span style="color:#C678DD">                            for</span><span style="color:#E06C75"> (</span><span style="color:#E5C07B">Grandson</span><span style="color:#E06C75"> itemGrandson </span><span style="color:#C678DD">:</span><span style="color:#E5C07B"> itemSon</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getGrandsonDtoList</span><span style="color:#ABB2BF">()</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD">                                if</span><span style="color:#E06C75"> (itemGrandson </span><span style="color:#56B6C2">!=</span><span style="color:#D19A66"> null</span><span style="color:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B">                                    itemGrandson</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addError</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Error Info"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E06C75">                                }</span></span>
<span class="line"><span style="color:#E06C75">                            }</span></span>
<span class="line"><span style="color:#E06C75">                        }</span></span>
<span class="line"><span style="color:#E06C75">                    }</span></span>
<span class="line"><span style="color:#E06C75">                }</span></span>
<span class="line"><span style="color:#E06C75">            }</span></span>
<span class="line"><span style="color:#E06C75">        }</span></span>
<span class="line"><span style="color:#E06C75">    }</span></span>
<span class="line"><span style="color:#E06C75">}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h1 id="7-åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡"><a class="header-anchor" href="#7-åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡"></a>7. åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡</h1>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæ¨¡æ¿å¯ä»¥ä½¿ç”¨åœ¨æ•°æ®æ¨¡å‹ä¸­å®šä¹‰çš„å˜é‡ã€‚ åœ¨æ•°æ®æ¨¡å‹ä¹‹å¤–ï¼Œæ¨¡æ¿æœ¬èº«ä¹Ÿå¯ä»¥å®šä¹‰å˜é‡æ¥ä½¿ç”¨ï¼Œè¿™äº›ä¸´æ—¶å˜é‡å¯ä»¥ä½¿ç”¨ FTL æŒ‡ä»¤æ¥åˆ›å»ºå’Œæ›¿æ¢ã€‚è¯·æ³¨æ„æ¯ä¸€æ¬¡çš„æ¨¡æ¿æ‰§è¡Œå·¥ä½œéƒ½ç»´æŠ¤å®ƒè‡ªå·±çš„ç§æœ‰å˜é‡ï¼Œ åŒæ—¶æ¥æ¸²æŸ“é¡µé¢ã€‚å˜é‡çš„åˆå§‹å€¼æ˜¯ç©ºï¼Œå½“æ¨¡æ¿æ‰§è¡Œå·¥ä½œç»“æŸè¿™äº›å˜é‡ä¾¿è¢«é”€æ¯äº†ã€‚</p>
<p>å¯ä»¥è®¿é—®ä¸€ä¸ªåœ¨æ¨¡æ¿é‡Œå®šä¹‰çš„å˜é‡ï¼Œå°±åƒæ˜¯è®¿é—®æ•°æ®æ¨¡å‹æ ¹ root ä¸Šçš„å˜é‡ä¸€æ ·ã€‚ è¿™ä¸ªå˜é‡æ¯”å®šä¹‰åœ¨æ•°æ®æ¨¡å‹ä¸­çš„åŒåå‚æ•°æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ å¦‚æœæ°å·§å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>foo</code> çš„å˜é‡ï¼Œè€Œåœ¨æ•°æ®æ¨¡å‹ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåä¸º <code>foo</code> çš„å˜é‡ï¼Œ é‚£ä¹ˆæ¨¡æ¿ä¸­çš„å˜é‡å°±ä¼šå°†æ•°æ®æ¨¡å‹æ ¹ä¸Šçš„å˜é‡éšè—ï¼ˆä¸æ˜¯è¦†ç›–ï¼ï¼‰ã€‚ ä¾‹å¦‚ï¼Œ<code>${foo}</code> å°†ä¼šè¾“å‡ºåœ¨æ¨¡æ¿ä¸­å®šä¹‰çš„å˜é‡ã€‚</p>
<p>åœ¨æ¨¡æ¿ä¸­å¯ä»¥å®šä¹‰ä¸‰ç§ç±»å‹çš„å˜é‡ï¼š</p>
<ul>
<li><strong>ã€Œç®€å•ã€å˜é‡</strong>ï¼š å®ƒèƒ½ä»æ¨¡æ¿ä¸­çš„ä»»ä½•ä½ç½®æ¥è®¿é—®ï¼Œæˆ–è€…ä»ä½¿ç”¨ <code>include</code> æŒ‡ä»¤å¼•å…¥çš„æ¨¡æ¿è®¿é—®ã€‚å¯ä»¥ä½¿ç”¨ <code>assign</code> æŒ‡ä»¤æ¥åˆ›å»ºæˆ–æ›¿æ¢è¿™äº›å˜é‡ã€‚å› ä¸ºå®å’Œæ–¹æ³•åªæ˜¯å˜é‡ï¼Œé‚£ä¹ˆ <code>macro</code> æŒ‡ä»¤å’Œ <code>function</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥ç”¨æ¥è®¾ç½®å˜é‡ï¼Œå°±åƒ <code>assign</code> é‚£æ ·ã€‚</li>
<li><strong>å±€éƒ¨å˜é‡</strong>ï¼šå®ƒä»¬åªèƒ½è¢«è®¾ç½®åœ¨å®å®šä¹‰ä½“å†…ï¼Œ è€Œä¸”åªåœ¨å®å†…å¯è§ã€‚ä¸€ä¸ªå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸåªæ˜¯å®çš„è°ƒç”¨è¿‡ç¨‹ã€‚å¯ä»¥ä½¿ç”¨ <code>local</code> æŒ‡ä»¤åœ¨å®å®šä¹‰ä½“å†…åˆ›å»ºæˆ–æ›¿æ¢å±€éƒ¨å˜é‡ã€‚</li>
<li><strong>å¾ªç¯å˜é‡</strong>ï¼šå¾ªç¯å˜é‡æ˜¯ç”±å¦‚ <code>list</code> æŒ‡ä»¤è‡ªåŠ¨åˆ›å»ºçš„ï¼Œè€Œä¸”å®ƒä»¬åªåœ¨æŒ‡ä»¤çš„å¼€å§‹å’Œç»“æŸæ ‡è®°å†…æœ‰æ•ˆã€‚å®çš„å‚æ•°æ˜¯å±€éƒ¨å˜é‡è€Œä¸æ˜¯å¾ªç¯å˜é‡ã€‚</li>
<li><strong>å…¨å±€å˜é‡</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªé«˜çº§è¯é¢˜äº†ï¼Œ å¹¶ä¸”è¿™ç§å˜é‡æœ€å¥½åˆ«ç”¨ã€‚å³ä¾¿å®ƒä»¬å±äºä¸åŒçš„å‘½åç©ºé—´ï¼Œ å…¨å±€å˜é‡ä¹Ÿè¢«æ‰€æœ‰æ¨¡æ¿å…±äº«ï¼Œå› ä¸ºå®ƒä»¬æ˜¯è¢« <code>import</code>è¿›æ¥çš„ï¼Œ ä¸åŒäº <code>include</code> è¿›æ¥çš„ã€‚é‚£ä¹ˆå®ƒä»¬çš„å¯è§åº¦å°±åƒæ•°æ®æ¨¡å‹é‚£æ ·ã€‚ å…¨å±€å˜é‡é€šè¿‡ <code>global</code>æŒ‡ä»¤æ¥å®šä¹‰ã€‚</li>
</ul>
<p>ä½¿ç”¨ <code>assign</code> åˆ›å»ºå’Œæ›¿æ¢å˜é‡ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assign x = 1&gt;  &lt;#-- create variable x --&gt;</span></span>
<span class="line"><span>${x}</span></span>
<span class="line"><span>&lt;#assign x = x + 3&gt; &lt;#-- replace variable x --&gt;</span></span>
<span class="line"><span>${x}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¾“å‡ºä¸ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>1</span></span>
<span class="line"><span>4</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å±€éƒ¨å˜é‡ä¹Ÿä¼šéšè—ï¼ˆä¸æ˜¯è¦†ç›–ï¼‰åŒåçš„ ã€Œç®€å•ã€ å˜é‡ï¼Œå¾ªç¯å˜é‡ä¹Ÿä¼šéšè—ï¼ˆä¸æ˜¯è¦†ç›–ï¼‰åŒåçš„ ã€Œç®€å•ã€ å˜é‡ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assign x = "plain"&gt;</span></span>
<span class="line"><span>1. ${x}  </span></span>
<span class="line"><span>&lt;@test/&gt;</span></span>
<span class="line"><span>6. ${x}  </span></span>
<span class="line"><span>&lt;#list ["loop"] as x&gt;</span></span>
<span class="line"><span>    7. ${x}  </span></span>
<span class="line"><span>    &lt;#assign x = "plain2"&gt; </span></span>
<span class="line"><span>    8. ${x}  </span></span>
<span class="line"><span>&lt;/#list&gt;</span></span>
<span class="line"><span>9. ${x}  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#macro test&gt;</span></span>
<span class="line"><span>  2. ${x} </span></span>
<span class="line"><span>  &lt;#local x = "local"&gt;</span></span>
<span class="line"><span>  3. ${x}  </span></span>
<span class="line"><span>  &lt;#list ["loop"] as x&gt;</span></span>
<span class="line"><span>    4. ${x}  </span></span>
<span class="line"><span>  &lt;/#list&gt;</span></span>
<span class="line"><span>  5. ${x}  </span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>1. plain</span></span>
<span class="line"><span>  2. plain</span></span>
<span class="line"><span>  3. local</span></span>
<span class="line"><span>    4. loop</span></span>
<span class="line"><span>  5. local</span></span>
<span class="line"><span>6. plain</span></span>
<span class="line"><span>    7. loop</span></span>
<span class="line"><span>    8. loop</span></span>
<span class="line"><span>9. plain2</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å†…éƒ¨å¾ªç¯å˜é‡å¯ä»¥éšè—å¤–éƒ¨å¾ªç¯å˜é‡ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#list ["loop 1"] as x&gt;</span></span>
<span class="line"><span>  ${x}</span></span>
<span class="line"><span>  &lt;#list ["loop 2"] as x&gt;</span></span>
<span class="line"><span>    ${x}</span></span>
<span class="line"><span>    &lt;#list ["loop 3"] as x&gt;</span></span>
<span class="line"><span>      ${x}</span></span>
<span class="line"><span>    &lt;/#list&gt;</span></span>
<span class="line"><span>    ${x}</span></span>
<span class="line"><span>  &lt;/#list&gt;</span></span>
<span class="line"><span>  ${x}</span></span>
<span class="line"><span>&lt;/#list&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>loop 1</span></span>
<span class="line"><span>  loop 2</span></span>
<span class="line"><span>    loop 3</span></span>
<span class="line"><span>  loop 2</span></span>
<span class="line"><span>loop 1</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¯·æ³¨æ„ï¼Œå¾ªç¯å˜é‡çš„è®¾ç½®æ˜¯é€šè¿‡æŒ‡ä»¤è°ƒç”¨æ—¶åˆ›å»ºçš„ï¼ˆæœ¬ä¾‹ä¸­çš„ <code>&lt;list ...&gt;</code> æ ‡ç­¾ï¼‰ã€‚æ²¡æœ‰å…¶ä»–çš„æ–¹å¼å»æ”¹å˜å¾ªç¯å˜é‡çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½ä½¿ç”¨å®šä¹‰æŒ‡ä»¤æ¥æ”¹å˜å®ƒçš„å€¼ï¼‰ï¼Œä½†å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¾ªç¯å˜é‡æ¥æš‚æ—¶éšè—å¦å¤–ä¸€ä¸ªã€‚</p>
<p>æœ‰æ—¶ä¼šå‘ç”Ÿä¸€ä¸ªå˜é‡éšè—æ•°æ®æ¨¡å‹ä¸­çš„åŒåå˜é‡ï¼Œ ä½†æ˜¯å¦‚æœæƒ³è®¿é—®æ•°æ®æ¨¡å‹ä¸­çš„å˜é‡ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ ç‰¹æ®Šå˜é‡ <code>globals</code>ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬åœ¨æ•°æ®æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªåä¸º <code>user</code> çš„å˜é‡ï¼Œå€¼ä¸º <code>Big Joe</code>ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#assign user = "Joe Hider"&gt;</span></span>
<span class="line"><span>${user}          &lt;#-- prints: Joe Hider --&gt;</span></span>
<span class="line"><span>${.globals.user} &lt;#-- prints: Big Joe --&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>é€šè¿‡ <code>global </code>æŒ‡ä»¤è®¾ç½®çš„å˜é‡å¯ä»¥éšè—æ•°æ®æ¨¡å‹ä¸­çš„åŒåå˜é‡ã€‚é€šå¸¸ï¼Œå…¨å±€å˜é‡çš„è®¾ç½®ä¼šæœ‰ç²¾ç¡®çš„ç›®çš„ï¼Œä½†ä»ç„¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ¥è®¿é—®æ•°æ®æ¨¡å‹å˜é‡ï¼š<code>.data_model.user</code>ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªå‘</p>
</blockquote>
<p>ä½¿ç”¨ <code>local</code> æˆ– <code>assign</code> æŒ‡ä»¤åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#local name = value&gt;</span></span>
<span class="line"><span>&lt;#-- æˆ–è€… --&gt;</span></span>
<span class="line"><span>&lt;#local name&gt;</span></span>
<span class="line"><span>  capture this</span></span>
<span class="line"><span>&lt;/#local&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å¦‚æœéœ€è¦åœ¨ä¸åŒçš„æ¡ä»¶ä¸‹å®šä¹‰ä¸åŒçš„å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#local name&gt;</span></span>
<span class="line"><span>    &lt;#if xxx&gt;</span></span>
<span class="line"><span>        value1</span></span>
<span class="line"><span>    &lt;#else&gt;</span></span>
<span class="line"><span>        value2</span></span>
<span class="line"><span>    &lt;/#if&gt;</span></span>
<span class="line"><span>&lt;/#local&gt;</span></span>
<span class="line"><span>&lt;#-- æˆ–è€… --&gt;</span></span>
<span class="line"><span>&lt;#if xxx&gt;</span></span>
<span class="line"><span>    &lt;#local name = value1&gt;</span></span>
<span class="line"><span>&lt;#else&gt;</span></span>
<span class="line"><span>    &lt;#local name = value2&gt;</span></span>
<span class="line"><span>&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åœ¨ä¸€èˆ¬çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸¤ç§æ–¹å¼å¹¶æ²¡æœ‰åŒºåˆ«ï¼Œä½†å¦‚æœåç»­è¦ä½¿ç”¨å®šä¹‰çš„å˜é‡è¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œé‚£è¿™ä¸¤ç§æ–¹å¼å°±æœ‰äº›åŒºåˆ«äº†ã€‚</p>
<p>å‡è®¾å½“æ»¡è¶³æŸäº›æ¡ä»¶æ—¶ï¼Œå®šä¹‰çš„å˜é‡å€¼ä¸º <code>value1</code>ï¼Œå¦åˆ™æ˜¯ç©ºä¸²ï¼Œå³ <code>value2</code> æ˜¯ç©ºä¸²ã€‚åç»­ä½¿ç”¨å®šä¹‰çš„å˜é‡ <code>name</code> è¿›è¡Œ <strong>ç©ºä¸²</strong> åˆ¤æ–­ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#if StringUtils.isNotEmpty(name)&gt;&lt;/#if&gt;</span></span>
<span class="line"><span>&lt;#-- æˆ–è€… --&gt;</span></span>
<span class="line"><span>&lt;#if name?? &amp;&amp; name?length gt 0&gt;&lt;/#if&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ä½†æœ€ç»ˆå¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯åŸæœ¬æœŸæœ›çš„ã€‚</p>
<p>è¿™æ˜¯å› ä¸º <strong>é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼å®šä¹‰çš„å˜é‡æ‰€æŒ‡å‘çš„å€¼çš„ä¸¤ç«¯å­˜åœ¨ä¸€äº›ç©ºç™½å­—ç¬¦ã€‚</strong></p>
<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼æ¥å®šä¹‰å˜é‡ï¼ˆæ›´æ¨èï¼‰ï¼Œæˆ–è€…åœ¨ä½¿ç”¨å®šä¹‰çš„å˜é‡è¿›è¡Œé€»è¾‘åˆ¤æ–­å‰ï¼Œç§»é™¤å€¼ä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦ã€‚</p>
<h1 id="8-å‘½åç©ºé—´"><a class="header-anchor" href="#8-å‘½åç©ºé—´"></a>8. å‘½åç©ºé—´</h1>
<h2 id="8-1-å‘½åç©ºé—´å’Œåº“"><a class="header-anchor" href="#8-1-å‘½åç©ºé—´å’Œåº“"></a>8.1 å‘½åç©ºé—´å’Œåº“</h2>
<p>å½“è¿è¡Œ FTL æ¨¡æ¿æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>assign</code> å’Œ <code>macro</code> æŒ‡ä»¤åˆ›å»ºçš„å˜é‡çš„é›†åˆï¼ˆå¯èƒ½æ˜¯ç©ºçš„ï¼‰ã€‚åƒè¿™æ ·çš„å˜é‡é›†åˆè¢«ç§°ä¸º <strong>å‘½åç©ºé—´</strong>ã€‚ ç®€å•çš„æƒ…å†µä¸‹å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªå‘½åç©ºé—´ï¼Œç§°ä¹‹ä¸º <strong>ä¸»å‘½åç©ºé—´</strong>ã€‚å› ä¸ºé€šå¸¸åªä½¿ç”¨è¯¥å‘½åç©ºé—´ï¼Œ æ‰€ä»¥å°±æ²¡æœ‰æ„è¯†åˆ°è¿™ç‚¹ã€‚</p>
<p>å¦‚æœæƒ³åˆ›å»ºå¯ä»¥é‡å¤ä½¿ç”¨çš„å®ï¼Œå‡½æ•°å’Œå…¶ä»–å˜é‡çš„é›†åˆï¼Œé€šå¸¸ç”¨æœ¯è¯­æ¥è¯´å°±æ˜¯å¼•ç”¨ <strong>åº“</strong>ã€‚</p>
<p>ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´æ˜¯å¿…ç„¶çš„ã€‚åªè¦è€ƒè™‘ä½ åœ¨ä¸€äº›é¡¹ç›®ä¸­ï¼Œ æˆ–è€…æƒ³å’Œä»–äººå…±äº«ä½¿ç”¨çš„æ—¶å€™ï¼Œä½ æ˜¯å¦æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å®çš„é›†åˆã€‚ä½†è¦ç¡®ä¿åº“ä¸­æ²¡æœ‰å®ï¼ˆæˆ–å…¶ä»–å˜é‡ï¼‰åå’Œæ•°æ®æ¨¡å‹ä¸­å˜é‡åŒåï¼Œ è€Œä¸”ä¹Ÿä¸èƒ½å’Œæ¨¡æ¿ä¸­å¼•ç”¨å…¶ä»–åº“ä¸­çš„å˜é‡åŒåæ˜¯ä¸å¯èƒ½çš„ã€‚é€šå¸¸æ¥è¯´ï¼Œå˜é‡å› ä¸ºåç§°å†²çªæ—¶ä¹Ÿä¼šç›¸äº’å†²çªã€‚æ‰€ä»¥è¦ä¸ºæ¯ä¸ªåº“ä¸­çš„å˜é‡ä½¿ç”¨ä¸åŒçš„å‘½åç©ºé—´ã€‚</p>
<h2 id="8-2-åˆ›å»ºä¸€ä¸ªåº“"><a class="header-anchor" href="#8-2-åˆ›å»ºä¸€ä¸ªåº“"></a>8.2 åˆ›å»ºä¸€ä¸ªåº“</h2>
<p>å‡è®¾éœ€è¦é€šç”¨çš„å˜é‡ <code>copyright</code> å’Œ <code>mail</code>ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro copyright date&gt;</span></span>
<span class="line"><span>  &lt;p&gt;Copyright (C) ${date} Julia Smith. All rights reserved.&lt;/p&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#assign mail = "jsmith@acme.com"&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>æŠŠä¸Šé¢çš„è¿™äº›å®šä¹‰å­˜å‚¨åœ¨æ–‡ä»¶ <code>lib/my_test.ftl</code> ä¸­ï¼ˆç›®å½•æ˜¯å­˜æ”¾æ¨¡æ¿çš„ä½ç½®ï¼‰ï¼Œå‡è®¾æƒ³åœ¨ <code>aWebPage.ftl</code> ä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>&lt;# import&gt;</code> æŒ‡ä»¤ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#import "/lib/my_test.ftl" as my&gt; </span></span>
<span class="line"><span>&lt;@my.copyright date="1999-2002"/&gt;</span></span>
<span class="line"><span>${my.mail}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span> &lt;p&gt;Copyright (C) 1999-2002 Julia Smith. All rights reserved.&lt;/p&gt;</span></span>
<span class="line"><span>jsmith@acme.com</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°±ç®—åœ¨ä¸»å‘½åç©ºé—´ä¸­æœ‰ä¸€ä¸ªå˜é‡ï¼Œåä¸º <code>mail</code> æˆ– <code>copyright</code>ï¼Œä¹Ÿä¸ä¼šå¼•èµ·æ··ä¹±ï¼Œå› ä¸ºä¸¤ä¸ªæ¨¡æ¿ä½¿ç”¨äº†ä¸åŒçš„å‘½åç©ºé—´ã€‚</p>
<h2 id="8-2-åœ¨å¼•å…¥çš„å‘½åç©ºé—´ä¸­ç¼–å†™å˜é‡"><a class="header-anchor" href="#8-2-åœ¨å¼•å…¥çš„å‘½åç©ºé—´ä¸­ç¼–å†™å˜é‡"></a>8.2 åœ¨å¼•å…¥çš„å‘½åç©ºé—´ä¸­ç¼–å†™å˜é‡</h2>
<p>å¶å°”æƒ³è¦åœ¨ä¸€ä¸ªè¢«åŒ…å«çš„å‘½åç©ºé—´ä¸Šåˆ›å»ºæˆ–æ›¿æ¢ä¸€ä¸ªå˜é‡ã€‚ é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>assign</code> æŒ‡ä»¤ï¼Œ å¦‚æœç”¨åˆ°äº†å®ƒçš„ <code>namespace</code> å˜é‡ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#import "/lib/my_test.ftl" as my&gt;</span></span>
<span class="line"><span>${my.mail}</span></span>
<span class="line"><span>&lt;#assign mail="jsmith@other.com" in my&gt;</span></span>
<span class="line"><span>${my.mail}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>jsmith@acme.com</span></span>
<span class="line"><span>jsmith@other.com</span></span></code></pre></td></tr></tbody></table>
      </figure>
<h2 id="8-3-å‘½åç©ºé—´å’Œæ•°æ®æ¨¡å‹"><a class="header-anchor" href="#8-3-å‘½åç©ºé—´å’Œæ•°æ®æ¨¡å‹"></a>8.3 å‘½åç©ºé—´å’Œæ•°æ®æ¨¡å‹</h2>
<p>æ•°æ®æ¨¡å‹ä¸­çš„å˜é‡åœ¨ä»»ä½•ä½ç½®éƒ½æ˜¯å¯è§çš„ã€‚ä¾‹å¦‚ï¼Œ å¦‚æœåœ¨æ•°æ®æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªåä¸º <code>user</code> çš„å˜é‡ï¼Œé‚£ä¹ˆ <code>lib/my_test.ftl</code> ä¹Ÿèƒ½è®¿é—®å®ƒï¼Œ <code>aWebPage.ftl</code> å½“ç„¶ä¹Ÿèƒ½ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro copyright date&gt;</span></span>
<span class="line"><span>  &lt;p&gt;Copyright (C) ${date} ${user}. All rights reserved.&lt;/p&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#assign mail = "${user}@acme.com"&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å¦‚æœ <code>user</code> æ˜¯ <code>Fred</code> çš„è¯ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#import "/lib/my_test.ftl" as my&gt;</span></span>
<span class="line"><span>&lt;@my.copyright date="1999-2002"/&gt;</span></span>
<span class="line"><span>${my.mail}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>  &lt;p&gt;Copyright (C) 1999-2002 Fred. All rights reserved.&lt;/p&gt;</span></span>
<span class="line"><span>Fred@acme.com</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ä¸è¦å¿˜äº†åœ¨æ¨¡æ¿çš„å‘½åç©ºé—´ï¼ˆå¯ä»¥ä½¿ç”¨ <code>assign</code> æˆ– <code>macro</code> æŒ‡ä»¤æ¥åˆ›å»ºçš„å˜é‡ï¼‰ä¸­çš„å˜é‡æœ‰ç€æ¯”æ•°æ®æ¨¡å‹ä¸­çš„å˜é‡æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å› æ­¤ï¼Œæ•°æ®æ¨¡å‹çš„å†…å®¹ä¸ä¼šå¹²æ¶‰åˆ°ç”±åº“åˆ›å»ºçš„å˜é‡ã€‚</p>
<h2 id="8-4-å‘½åç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸ"><a class="header-anchor" href="#8-4-å‘½åç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸ"></a>8.4 å‘½åç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>å‘½åç©ºé—´ç”±ä½¿ç”¨ <code>import</code> æŒ‡ä»¤ä¸­æ‰€å†™çš„è·¯å¾„æ¥è¯†åˆ«ã€‚å¦‚æœæƒ³å¤šæ¬¡ <code>import</code> è¿™ä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆåªä¼šä¸ºç¬¬ä¸€æ¬¡ <code>import</code> å¼•ç”¨åˆ›å»ºå‘½åç©ºé—´å¹¶æ‰§è¡Œæ¨¡æ¿ã€‚åé¢ç›¸åŒè·¯å¾„çš„ <code>import</code> åªæ˜¯åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨å½“ä½œè®¿é—®ç›¸åŒå‘½åç©ºé—´çš„ã€Œé—¨ã€ã€‚</p>
<p><code>my_test.ftl</code> ä¸­æœ‰ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#macro copyright date&gt;</span></span>
<span class="line"><span>  &lt;p&gt;Copyright (C) ${date} Julia Smith. All rights reserved.&lt;/p&gt;</span></span>
<span class="line"><span>&lt;/#macro&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;#assign mail = "jsmith@acme.com"&gt;</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>åœ¨ <code>aWebPage.ftl</code> ä¸­ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>&lt;#import "/lib/my_test.ftl" as my&gt;</span></span>
<span class="line"><span>&lt;#import "/lib/my_test.ftl" as foo&gt;</span></span>
<span class="line"><span>&lt;#import "/lib/my_test.ftl" as bar&gt;</span></span>
<span class="line"><span>${my.mail}, ${foo.mail}, ${bar.mail}</span></span>
<span class="line"><span>&lt;#assign mail="jsmith@other.com" in my&gt;</span></span>
<span class="line"><span>${my.mail}, ${foo.mail}, ${bar.mail}</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å°†ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>jsmith@acme.com, jsmith@acme.com, jsmith@acme.com</span></span>
<span class="line"><span>jsmith@other.com, jsmith@other.com, jsmith@other.com</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>è¯·æ³¨æ„ï¼Œå‘½åç©ºé—´æ˜¯ä¸åˆ†å±‚æ¬¡çš„ï¼Œå®ƒä»¬ç›¸äº’ä¹‹é—´æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ã€‚ é‚£ä¹ˆï¼Œå¦‚æœåœ¨å‘½åç©ºé—´ N1 ä¸­ <code>import</code> å‘½åç©ºé—´ N2ï¼Œ é‚£ N2 ä¹Ÿä¸åœ¨ N1 ä¸­ï¼ŒN1 åªæ˜¯å¯ä»¥é€šè¿‡å“ˆå¸Œè¡¨æ¥è®¿é—® N2ã€‚è¿™å’Œåœ¨ä¸»å‘½åç©ºé—´ä¸­ <code>import</code> N2ï¼Œç„¶åç›´æ¥è®¿é—®å‘½åç©ºé—´ N2 æ˜¯ä¸€æ ·çš„è¿‡ç¨‹ã€‚</p>
<p>æ¯ä¸€æ¬¡æ¨¡æ¿çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„å‘½åç©ºé—´çš„é›†åˆã€‚æ¯ä¸€æ¬¡æ¨¡æ¿æ‰§è¡Œå·¥ä½œéƒ½æ˜¯ä¸€ä¸ªåˆ†ç¦»ä¸”æœ‰åºçš„è¿‡ç¨‹ï¼Œå®ƒä»¬ä»…ä»…å­˜åœ¨ä¸€æ®µå¾ˆçŸ­çš„æ—¶é—´ï¼ŒåŒæ—¶é¡µé¢ç”¨ä»¥æ¸²æŸ“å†…å®¹ï¼Œç„¶åå°±å’Œæ‰€æœ‰å¡«å……è¿‡çš„å‘½åç©ºé—´ä¸€èµ·æ¶ˆå¤±äº†ã€‚å› æ­¤ï¼Œæ— è®ºä½•æ—¶æˆ‘ä»¬è¯´ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>import</code>ï¼Œä¸€ä¸ªå•ä¸€æ¨¡æ¿æ‰§è¡Œå·¥ä½œçš„å†…å®¹éƒ½æ˜¯è¿™æ ·ã€‚</p>
<h2 id="8-5-ä¸ºä»–äººç¼–å†™åº“"><a class="header-anchor" href="#8-5-ä¸ºä»–äººç¼–å†™åº“"></a>8.5 ä¸ºä»–äººç¼–å†™åº“</h2>
<p>å¦‚æœæƒ³å°†ä¸€ä¸ªåº“æ”¾åœ¨ç½‘ç»œä¸Šï¼Œä¸ºäº†é˜²æ­¢å’Œå…¶ä»–ä½œè€…ä½¿ç”¨åº“çš„å‘½åç›¸å†²çªï¼Œè€Œä¸”å¼•å…¥å…¶ä»–åº“æ—¶è¦ä¹¦å†™ç®€å•ï¼Œå¯ä»¥æŒ‡å®šåº“è·¯å¾„çš„æ ¼å¼ã€‚</p>
<p>è¿™ä¸ªæ ‡å‡†æ˜¯ï¼š åº“çš„è·¯å¾„å¿…é¡»å¯¹æ¨¡æ¿å’Œå…¶ä»–åº“å¯ç”¨ï¼ˆå¯å¼•ç”¨ï¼‰ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>/lib/yourcompany.com/your_library.ftl</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>å‡è®¾æˆ‘ä»¬ä¸º Example å…¬å¸å·¥ä½œï¼Œå®ƒä»¬æ‹¥æœ‰ <code>www.example.com</code> ç½‘çš„ä¸»é¡µï¼Œ æˆ‘å¼€å‘äº†ä¸€ä¸ªéƒ¨ä»¶åº“ï¼Œé‚£ä¹ˆè¦å¼•å…¥æ‰€å†™çš„ FTL çš„è·¯å¾„åº”è¯¥æ˜¯ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>/lib/example.com/widget.ftl</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œwww å·²ç»è¢«çœç•¥äº†ã€‚ç¬¬ä¸‰æ¬¡è·¯å¾„åˆ†å‰²åçš„éƒ¨åˆ†å¯ä»¥åŒ…å«å­ç›®å½•ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š</p>
<figure class="highlight plaintext line-numbers" data-language="PLAINTEXT">
        <table style="background-color: #282c34"><tbody><tr><td class="gutter" style="background-color: #282c34"><pre style="background-color: #282c34"><span class="line">1</span><br></pre></td><td class="code" style="background-color: #282c34"><pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>/lib/example.com/commons/string.ftl</span></span></code></pre></td></tr></tbody></table>
      </figure>
<p>ä¸€ä¸ªé‡è¦çš„è§„åˆ™å°±æ˜¯è·¯å¾„ä¸åº”è¯¥åŒ…å«å¤§å†™å­—æ¯ï¼Œä¸ºäº†åˆ†éš”è¯è¯­ï¼Œ ä½¿ç”¨ä¸‹åˆ’çº¿ <code>_</code>ï¼Œå°±åƒ <code>wml_form</code>ï¼ˆè€Œä¸æ˜¯ <code>wmlForm</code> è¿™æ ·çš„é©¼å³°å‘½åï¼‰</p>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„å·¥ä½œä¸æ˜¯ä¸ºå…¬å¸æˆ–ç»„ç»‡å¼€å‘åº“ï¼Œä½ åº”è¯¥ä½¿ç”¨é¡¹ç›®ä¸»é¡µçš„ URLï¼Œæ¯”å¦‚ <code>/lib/example.sourceforge.net/example.ftl</code>ï¼Œæˆ– <code>/lib/geocities.com/jsmith/example.ftl</code>ã€‚</p>
<h1 id="9-å…¶ä»–"><a class="header-anchor" href="#9-å…¶ä»–"></a>9. å…¶ä»–</h1>
<p>è¿™ä¸¤ä¸ªå†…å®¹ä¸æ˜¯å¾ˆé‡è¦ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒæ–‡æ¡£ï¼š</p>
<p><a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/dgui_misc_whitespace.html">ç©ºç™½å¤„ç†</a></p>
<p><a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/dgui_misc_alternativesyntax.html">æ›¿æ¢(æ–¹æ‹¬å·)è¯­æ³•</a></p>
</body></html></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://mofan212.github.io">é»˜çƒ¦</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://mofan212.github.io/posts/FreeMarker-Template-Author's-Guide/">https://mofan212.github.io/posts/FreeMarker-Template-Author's-Guide/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://mofan212.github.io" target="_blank">Mofan</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/FreeMarker/">FreeMarker</a></div><div class="post-share"><div class="social-share" data-image="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/68.png" data-sites="wechat,qq,weibo,facebook,x"></div><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/AliPay.png" target="_blank"><img class="post-qr-code-img" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/AliPay.png" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li><li class="reward-item"><a href="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/WeChatPay.png" target="_blank"><img class="post-qr-code-img" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/WeChatPay.png" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/The-Basis-Of-ElasticSearch/" title="Elasticsearch å…¥é—¨"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/67.png" onerror="onerror=null;src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">Elasticsearch å…¥é—¨</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä»‹ç»äº† ES çš„å®‰è£…ä¸ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼Œåœ¨æ–‡æœ«å®ç°äº†ä¸€ä¸ªäº¬ä¸œæœç´¢çš„å° Demoã€‚</div></div></div></a><a class="pagination-related" href="/posts/The-Basis-Of-Dubbo/" title="ã€RPCæ¡†æ¶ã€‘Dubbo å…¥é—¨"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/69.png" onerror="onerror=null;src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">ã€RPCæ¡†æ¶ã€‘Dubbo å…¥é—¨</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä»‹ç»äº† Dubbo åŸºæœ¬çŸ¥è¯†ã€é…ç½®ã€é«˜å¯ç”¨å’ŒåŸç†å››ä¸ªéƒ¨åˆ†çš„å†…å®¹ã€‚</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/avatar.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">é»˜çƒ¦</div><div class="author-info-description">å½©ç¬”çš„æ‰“æ€ªå‡çº§ä¹‹è·¯...</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">174</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">54</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">37</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mofan212"><i class="fab fa-github"></i><span>follow me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:cy.mofan@foxmail.com" target="_blank" title="é‚®ç®±"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æœ¬ç«™æ‰€æœ‰åšæ–‡å‡æ˜¯åšä¸»çš„å­¦ä¹ ç¬”è®°ä¸ä¸ªäººç†è§£ã€‚<strong><font style="color:red">é™¤ç‰¹åˆ«æ³¨æ˜å¤–ï¼Œ</font>å¦‚éœ€è½¬è½½ï¼Œè¯·åœ¨æ–‡ç« å¤´éƒ¨é†’ç›®å¤„é™„å¸¦åŸæ–‡é“¾æ¥å¹¶<a href="./mine/" style="color:#49B1F5;text-decoration:underline">å‘ŠçŸ¥æˆ‘</a></strong>ä½ å°†è½¬è½½ã€‚ğŸ˜Š</br><strong><font style="color:red">ä¸¥ç¦æœªéµå¾ªè§„èŒƒçš„è½¬è½½ã€‚</font></strong>ğŸ˜¡</br><strong>æ­»å»çš„è¯„è®ºç³»ç»Ÿå¤æ´»å•¦ï¼æ¬¢è¿åˆ°ç•™è¨€æ¿ç•…æ‰€æ¬²è¨€ï¼</strong>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´é«˜æ•ˆçš„<a target="_blank" href="https://space.bilibili.com/23658864/dynamic" style="color:#49B1F5;text-decoration:underline"> å“”å“©å“”å“©ç§ä¿¡ </a>æˆ–<a href="mailto:cy.mofan@foxmail.com" style="color:#49B1F5;text-decoration:underline" target="_blank">é‚®ç®±</a>ã€‚ ğŸ˜‰</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0-%E5%89%8D%E8%A8%80"><span class="toc-text">0. å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-FreeMarker-%E5%85%A5%E9%97%A8"><span class="toc-text">1. FreeMarker å…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E6%A8%A1%E6%9D%BF-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B-%E8%BE%93%E5%87%BA"><span class="toc-text">1.1 æ¨¡æ¿ + æ•°æ®æ¨¡å‹ &#x3D; è¾“å‡º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-text">1.2 æ•°æ®æ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%8C%87%E4%BB%A4"><span class="toc-text">1.3 æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-text">1.4 å†…å»ºå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E5%A4%84%E7%90%86%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-text">1.5 å¤„ç†ä¸å­˜åœ¨çš„å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%95%B0%E5%80%BC%E4%B8%8E%E7%B1%BB%E5%9E%8B"><span class="toc-text">2. æ•°å€¼ä¸ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%9F%BA%E6%9C%AC%E5%86%85%E5%AE%B9"><span class="toc-text">2.1 åŸºæœ¬å†…å®¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.2 ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%A8%A1%E6%9D%BF%E6%80%BB%E4%BD%93%E7%BB%93%E6%9E%84"><span class="toc-text">3. æ¨¡æ¿æ€»ä½“ç»“æ„</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">4. è¡¨è¾¾å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%AE%9A%E5%80%BC"><span class="toc-text">4.1 ç›´æ¥æŒ‡å®šå€¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E6%A3%80%E7%B4%A2%E5%8F%98%E9%87%8F"><span class="toc-text">4.2 æ£€ç´¢å˜é‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="toc-text">4.3 å­—ç¬¦ä¸²æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%BA%8F%E5%88%97%E6%93%8D%E4%BD%9C"><span class="toc-text">4.4 åºåˆ—æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E5%93%88%E5%B8%8C%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">4.5 å“ˆå¸Œè¡¨æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97"><span class="toc-text">4.6 ç®—æ•°è¿ç®—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97"><span class="toc-text">4.7 æ¯”è¾ƒè¿ç®—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C"><span class="toc-text">4.8 é€»è¾‘æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-text">4.9 å†…å»ºå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-10-%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8"><span class="toc-text">4.10 æ–¹æ³•è°ƒç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-11-%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4.11 èµ‹å€¼è¿ç®—ç¬¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-12-%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">4.12 æ“ä½œç¬¦ä¼˜å…ˆçº§</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E6%8F%92%E5%80%BC"><span class="toc-text">5. æ’å€¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">6. è‡ªå®šä¹‰æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%9F%BA%E6%9C%AC%E5%86%85%E5%AE%B9"><span class="toc-text">6.1 åŸºæœ¬å†…å®¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E5%8F%82%E6%95%B0"><span class="toc-text">6.2 å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%B5%8C%E5%A5%97%E5%86%85%E5%AE%B9"><span class="toc-text">6.3 åµŒå¥—å†…å®¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E5%AE%8F%E5%92%8C%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F"><span class="toc-text">6.4 å®å’Œå¾ªç¯å˜é‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E9%80%92%E5%BD%92%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B5%8C%E5%A5%97%E5%86%85%E5%AE%B9"><span class="toc-text">6.5  é€’å½’ä¸­ä½¿ç”¨åµŒå¥—å†…å®¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%9C%A8%E6%A8%A1%E6%9D%BF%E4%B8%AD%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-text">7. åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-text">8. å‘½åç©ºé—´</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E5%BA%93"><span class="toc-text">8.1 å‘½åç©ºé—´å’Œåº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BA%93"><span class="toc-text">8.2 åˆ›å»ºä¸€ä¸ªåº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%9C%A8%E5%BC%95%E5%85%A5%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%AD%E7%BC%96%E5%86%99%E5%8F%98%E9%87%8F"><span class="toc-text">8.2 åœ¨å¼•å…¥çš„å‘½åç©ºé—´ä¸­ç¼–å†™å˜é‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-text">8.3 å‘½åç©ºé—´å’Œæ•°æ®æ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">8.4 å‘½åç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E4%B8%BA%E4%BB%96%E4%BA%BA%E7%BC%96%E5%86%99%E5%BA%93"><span class="toc-text">8.5 ä¸ºä»–äººç¼–å†™åº“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%85%B6%E4%BB%96"><span class="toc-text">9. å…¶ä»–</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/Git/" title="Gitç†è®ºä¸ä½¿ç”¨"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/3.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="Gitç†è®ºä¸ä½¿ç”¨"/></a><div class="content"><a class="title" href="/posts/Git/" title="Gitç†è®ºä¸ä½¿ç”¨">Gitç†è®ºä¸ä½¿ç”¨</a><time datetime="2026-01-26T16:00:00.000Z" title="æ›´æ–°äº 2026-01-27 00:00:00">2026-01-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Something-About-Blog/" title="åšå®¢æ­å»ºä¸ç»´æŠ¤"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/42.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="åšå®¢æ­å»ºä¸ç»´æŠ¤"/></a><div class="content"><a class="title" href="/posts/Something-About-Blog/" title="åšå®¢æ­å»ºä¸ç»´æŠ¤">åšå®¢æ­å»ºä¸ç»´æŠ¤</a><time datetime="2026-01-24T16:00:00.000Z" title="æ›´æ–°äº 2026-01-25 00:00:00">2026-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Java-Memory-Model/" title="Java å†…å­˜æ¨¡å‹"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/174.png" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="Java å†…å­˜æ¨¡å‹"/></a><div class="content"><a class="title" href="/posts/Java-Memory-Model/" title="Java å†…å­˜æ¨¡å‹">Java å†…å­˜æ¨¡å‹</a><time datetime="2026-01-02T16:00:00.000Z" title="æ›´æ–°äº 2026-01-03 00:00:00">2026-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Java-Bytecode-And-Class-Loading/" title="å­—èŠ‚ç ä¸ç±»åŠ è½½"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/173.png" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="å­—èŠ‚ç ä¸ç±»åŠ è½½"/></a><div class="content"><a class="title" href="/posts/Java-Bytecode-And-Class-Loading/" title="å­—èŠ‚ç ä¸ç±»åŠ è½½">å­—èŠ‚ç ä¸ç±»åŠ è½½</a><time datetime="2026-01-01T16:00:00.000Z" title="æ›´æ–°äº 2026-01-02 00:00:00">2026-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Annotation-And-Reflection/" title="æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/20.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„"/></a><div class="content"><a class="title" href="/posts/Annotation-And-Reflection/" title="æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„">æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„</a><time datetime="2026-01-01T16:00:00.000Z" title="æ›´æ–°äº 2026-01-02 00:00:00">2026-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Class-Resource-Loading-In-Java/" title="Java çš„ç±»èµ„æºåŠ è½½"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/103.png" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="Java çš„ç±»èµ„æºåŠ è½½"/></a><div class="content"><a class="title" href="/posts/Class-Resource-Loading-In-Java/" title="Java çš„ç±»èµ„æºåŠ è½½">Java çš„ç±»èµ„æºåŠ è½½</a><time datetime="2026-01-01T16:00:00.000Z" title="æ›´æ–°äº 2026-01-02 00:00:00">2026-01-02</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2020 - 2026 By é»˜çƒ¦</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="https://testingcf.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://testingcf.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://testingcf.jsdelivr.net/npm/vanilla-lazyload@latest/dist/lazyload.iife.min.js"></script><script src="https://testingcf.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const parseViewBox = viewBox => {
    if (!viewBox) return null
    const parts = viewBox.trim().split(/[\s,]+/).map(n => Number(n))
    if (parts.length !== 4 || parts.some(n => Number.isNaN(n))) return null
    return parts
  }

  const getSvgViewBox = svg => {
    const attr = parseViewBox(svg.getAttribute('viewBox'))
    if (attr) return attr

    // Fallback: use bbox to build a viewBox
    try {
      const bbox = svg.getBBox()
      if (bbox && bbox.width && bbox.height) return [bbox.x, bbox.y, bbox.width, bbox.height]
    } catch (e) {
      // getBBox may fail on some edge cases; ignore
    }

    const w = Number(svg.getAttribute('width')) || 0
    const h = Number(svg.getAttribute('height')) || 0
    if (w > 0 && h > 0) return [0, 0, w, h]
    return [0, 0, 100, 100]
  }

  const setSvgViewBox = (svg, vb) => {
    svg.setAttribute('viewBox', `${vb[0]} ${vb[1]} ${vb[2]} ${vb[3]}`)
  }

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v))

  const openSvgInNewTab = ({ source, initViewBox }) => {
    const getClonedSvg = () => {
      if (typeof source === 'string') {
        const template = document.createElement('template')
        template.innerHTML = source.trim()
        const svg = template.content.querySelector('svg')
        return svg ? svg.cloneNode(true) : null
      }
      if (source && typeof source.cloneNode === 'function') {
        return source.cloneNode(true)
      }
      return null
    }

    const clone = getClonedSvg()
    if (!clone) return
    if (initViewBox && initViewBox.length === 4) {
      clone.setAttribute('viewBox', initViewBox.join(' '))
    }
    if (!clone.getAttribute('xmlns')) clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg')
    if (!clone.getAttribute('xmlns:xlink') && clone.outerHTML.includes('xlink:')) {
      clone.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink')
    }
    // inject background to match current theme
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark'
    const bg = getComputedStyle(document.body).backgroundColor || (isDark ? '#1e1e1e' : '#ffffff')
    if (!clone.style.background) clone.style.background = bg

    const serializer = new XMLSerializer()
    const svgSource = serializer.serializeToString(clone)
    const htmlSource = `<!doctype html><html><head><meta charset="utf-8" />
      <style>
        html, body { width: 100%; height: 100%; margin: 0; display: flex; align-items: center; justify-content: center; background: ${bg}; }
        svg { max-width: 100%; max-height: 100%; height: auto; width: auto; }
      </style>
      </head><body>${svgSource}</body></html>`
    const blob = new Blob([htmlSource], { type: 'text/html;charset=utf-8' })
    const url = URL.createObjectURL(blob)
    window.open(url, '_blank', 'noopener')
    setTimeout(() => URL.revokeObjectURL(url), 30000)
  }

  const attachMermaidViewerButton = wrap => {
    let btn = wrap.querySelector('.mermaid-open-btn')
    if (!btn) {
      btn = document.createElement('button')
      btn.type = 'button'
      btn.className = 'mermaid-open-btn'
      wrap.appendChild(btn)
    }

    btn.innerHTML = '<i class="fa fa-search fa-fw" aria-hidden="true"></i>'

    if (!btn.__mermaidViewerBound) {
      btn.addEventListener('click', e => {
        e.preventDefault()
        e.stopPropagation()
        const svg = wrap.__mermaidOriginalSvg || wrap.querySelector('svg')
        if (!svg) return
        const initViewBox = wrap.__mermaidInitViewBox
        if (typeof svg === 'string') {
          openSvgInNewTab({ source: svg, initViewBox })
          return
        }
        openSvgInNewTab({ source: svg, initViewBox })
      })
      btn.__mermaidViewerBound = true
    }
  }

  // Zoom around a point (px, py) in the SVG viewport (in viewBox coordinates)
  const zoomAtPoint = (vb, factor, px, py) => {
    const w = vb[2] * factor
    const h = vb[3] * factor
    const nx = px - (px - vb[0]) * factor
    const ny = py - (py - vb[1]) * factor
    return [nx, ny, w, h]
  }

  const initMermaidGestures = wrap => {
    const svg = wrap.querySelector('svg')
    if (!svg) return

    // Ensure viewBox exists so gestures always work
    const initVb = getSvgViewBox(svg)
    wrap.__mermaidInitViewBox = initVb
    wrap.__mermaidCurViewBox = initVb.slice()
    setSvgViewBox(svg, initVb)

    // Avoid binding multiple times on themeChange/pjax
    if (wrap.__mermaidGestureBound) return
    wrap.__mermaidGestureBound = true

    // Helper: map client (viewport) coordinate -> viewBox coordinate
    const clientToViewBox = (clientX, clientY) => {
      const rect = svg.getBoundingClientRect()
      const vb = wrap.__mermaidCurViewBox || getSvgViewBox(svg)
      const x = vb[0] + (clientX - rect.left) * (vb[2] / rect.width)
      const y = vb[1] + (clientY - rect.top) * (vb[3] / rect.height)
      return { x, y, rect, vb }
    }

    const state = {
      pointers: new Map(),
      startVb: null,
      startDist: 0,
      startCenter: null
    }

    const clampVb = vb => {
      const init = wrap.__mermaidInitViewBox || vb
      const minW = init[2] * 0.1
      const maxW = init[2] * 10
      const minH = init[3] * 0.1
      const maxH = init[3] * 10
      vb[2] = clamp(vb[2], minW, maxW)
      vb[3] = clamp(vb[3], minH, maxH)
      return vb
    }

    const setCurVb = vb => {
      vb = clampVb(vb)
      wrap.__mermaidCurViewBox = vb
      setSvgViewBox(svg, vb)
    }

    const onPointerDown = e => {
      // Allow only primary button for mouse
      if (e.pointerType === 'mouse' && e.button !== 0) return
      svg.setPointerCapture(e.pointerId)
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      if (state.pointers.size === 1) {
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      } else if (state.pointers.size === 2) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        state.startDist = Math.hypot(dx, dy)
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        state.startCenter = { x: (pts[0].x + pts[1].x) / 2, y: (pts[0].y + pts[1].y) / 2 }
      }
    }

    const onPointerMove = e => {
      if (!state.pointers.has(e.pointerId)) return
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      // Pan with 1 pointer
      if (state.pointers.size === 1 && state.startVb) {
        const p = [...state.pointers.values()][0]
        const prev = { x: e.clientX - e.movementX, y: e.clientY - e.movementY }
        // movementX/Y unreliable on touch, compute from stored last position
        const last = wrap.__mermaidLastSinglePointer || p
        const dxClient = p.x - last.x
        const dyClient = p.y - last.y
        wrap.__mermaidLastSinglePointer = p

        const { rect } = clientToViewBox(p.x, p.y)
        const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        const dx = dxClient * (vb[2] / rect.width)
        const dy = dyClient * (vb[3] / rect.height)
        setCurVb([vb[0] - dx, vb[1] - dy, vb[2], vb[3]])
        return
      }

      // Pinch zoom with 2 pointers
      if (state.pointers.size === 2 && state.startVb && state.startDist > 0) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        const dist = Math.hypot(dx, dy)
        if (!dist) return
        const factor = state.startDist / dist // dist bigger => zoom in (viewBox smaller)

        const cx = (pts[0].x + pts[1].x) / 2
        const cy = (pts[0].y + pts[1].y) / 2
        const centerClient = { x: cx, y: cy }

        const pxy = clientToViewBox(centerClient.x, centerClient.y)
        const cpx = pxy.x
        const cpy = pxy.y

        const vb = zoomAtPoint(state.startVb, factor, cpx, cpy)
        setCurVb(vb)
      }
    }

    const onPointerUpOrCancel = e => {
      state.pointers.delete(e.pointerId)
      if (state.pointers.size === 0) {
        state.startVb = null
        state.startDist = 0
        state.startCenter = null
        wrap.__mermaidLastSinglePointer = null
      } else if (state.pointers.size === 1) {
        // reset single pointer baseline to avoid jump
        wrap.__mermaidLastSinglePointer = [...state.pointers.values()][0]
      }
    }

    // Wheel zoom (mouse/trackpad)
    const onWheel = e => {
      // ctrlKey on mac trackpad pinch; we treat both as zoom
      e.preventDefault()
      const delta = e.deltaY
      const zoomFactor = delta > 0 ? 1.1 : 0.9
      const { x, y } = clientToViewBox(e.clientX, e.clientY)
      const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      setCurVb(zoomAtPoint(vb, zoomFactor, x, y))
    }

    const onDblClick = () => {
      const init = wrap.__mermaidInitViewBox
      if (!init) return
      wrap.__mermaidCurViewBox = init.slice()
      setSvgViewBox(svg, init)
    }

    svg.addEventListener('pointerdown', onPointerDown)
    svg.addEventListener('pointermove', onPointerMove)
    svg.addEventListener('pointerup', onPointerUpOrCancel)
    svg.addEventListener('pointercancel', onPointerUpOrCancel)
    svg.addEventListener('wheel', onWheel, { passive: false })
    svg.addEventListener('dblclick', onDblClick)
  }

  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild

      // Clear old render (themeChange/pjax will rerun)
      const oldSvg = item.querySelector('svg')
      if (oldSvg) oldSvg.remove()
      item.__mermaidGestureBound = false

      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
        if (true) initMermaidGestures(item)
        item.__mermaidOriginalSvg = svg
        if (true) attachMermaidViewerButton(item)
      }


      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://gcore.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://testingcf.jsdelivr.net/gh/mofan212/blog-static-resources@master/js/mine.min.js"></script><script src="/js/tip_portal.js"></script><script defer="defer" id="ribbon" src="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="click-show-text" src="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="Azathoth,Yog-Sothoth,Shub-Niggurath,Nyarlathotep,Cthulhu,Hastur,Abhoth,Ghroth,Tsathoggua,Cthugha,Deep Ones,Dagon,Chaugnar Faugn,Mordiggian,Shoggoth,Old One,Mi-Go,Great Race of Yith,Flying Polyp,Hounds of Tindalos,Dhole" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="docsearch-wrap"><div id="docsearch" style="display:none"></div><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@docsearch/css/dist/style.min.css"/><script src="https://testingcf.jsdelivr.net/npm/@docsearch/js/dist/umd/index.min.js"></script><script>(() => {
  docsearch(Object.assign({
    appId: 'BAFEL7A6K1',
    apiKey: '89fcb5961984c5c054bf04149f345f38',
    indexName: 'mofan212io',
    container: '#docsearch',
    placeholder: 'è¾“å…¥å…³é”®å­—è¿›è¡Œæœç´¢',
  }, null))

  const handleClick = () => {
    document.querySelector('.DocSearch-Button').click()
  }

  const searchClickFn = () => {
    btf.addEventListenerPjax(document.querySelector('#search-button > .search'), 'click', handleClick)
  }

  searchClickFn()
  window.addEventListener('pjax:complete', searchClickFn)
})()</script></div></div></body></html>