<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼ | Mofan</title><meta name="author" content="é»˜çƒ¦,cy.mofan@foxmail.com"><meta name="copyright" content="é»˜çƒ¦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æœ¬æ–‡ä¸»è¦å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„å»ºé€ è€…æ¨¡å¼è¿›è¡Œäº†ä»‹ç»ï¼ŒåŒæ—¶ä¹Ÿä»‹ç»äº† Lombok ä¸­ @Builder æ³¨è§£çš„ä½¿ç”¨ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼">
<meta property="og:url" content="https://mofan212.github.io/posts/Design-Pattern-Builder-Pattern/">
<meta property="og:site_name" content="Mofan">
<meta property="og:description" content="æœ¬æ–‡ä¸»è¦å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„å»ºé€ è€…æ¨¡å¼è¿›è¡Œäº†ä»‹ç»ï¼ŒåŒæ—¶ä¹Ÿä»‹ç»äº† Lombok ä¸­ @Builder æ³¨è§£çš„ä½¿ç”¨ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/81.png">
<meta property="article:published_time" content="2021-02-02T16:00:00.000Z">
<meta property="article:modified_time" content="2024-03-10T16:00:00.000Z">
<meta property="article:author" content="é»˜çƒ¦">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Design-Pattern">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/81.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼",
  "url": "https://mofan212.github.io/posts/Design-Pattern-Builder-Pattern/",
  "image": "https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/81.png",
  "datePublished": "2021-02-02T16:00:00.000Z",
  "dateModified": "2024-03-10T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "é»˜çƒ¦",
      "url": "https://mofan212.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/favicon.png"><link rel="canonical" href="https://mofan212.github.io/posts/Design-Pattern-Builder-Pattern/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: é»˜çƒ¦","link":"é“¾æ¥: ","source":"æ¥æº: Mofan","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  infinitegrid: {
    js: 'https://testingcf.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="referrer" content="no-referrer-when-downgrade" /><link rel="stylesheet" href="https://testingcf.jsdelivr.net/gh/mofan212/blog-static-resources@master/css/myStyle.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-screen-webfont@1.7.0/style.css" /><link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono-nl.min.css" /><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Mofan" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://testingcf.jsdelivr.net/gh/mofan212/blog-static-resources/css/minimal.min.css"/><script src="https://testingcf.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/avatar.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">174</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">54</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">37</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-book-reader"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/schedule/"><i class="fa-fw fas fa-list-alt"></i><span> è®¡åˆ’</span></a></div><div class="menus_item"><a class="site-page" href="/update/"><i class="fa-fw fas fa-tools"></i><span> ç»´æŠ¤</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-comments"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-sitemap"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/mine/"><i class="fa-fw fa fa-id-card"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child" href="/reward/"><i class="fa-fw fa-solid fa-coins"></i><span> èµåŠ©</span></a></li><li><a class="site-page child" href="/milestones/"><i class="fa-fw fa-solid fa-monument"></i><span> é‡Œç¨‹ç¢‘</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> å¼€å¾€</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/post_top_img.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Mofan</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-book-reader"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/schedule/"><i class="fa-fw fas fa-list-alt"></i><span> è®¡åˆ’</span></a></div><div class="menus_item"><a class="site-page" href="/update/"><i class="fa-fw fas fa-tools"></i><span> ç»´æŠ¤</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-comments"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-sitemap"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/mine/"><i class="fa-fw fa fa-id-card"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child" href="/reward/"><i class="fa-fw fa-solid fa-coins"></i><span> èµåŠ©</span></a></li><li><a class="site-page child" href="/milestones/"><i class="fa-fw fa-solid fa-monument"></i><span> é‡Œç¨‹ç¢‘</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> å¼€å¾€</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-02-02T16:00:00.000Z" title="å‘è¡¨äº 2021-02-03 00:00:00">2021-02-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-03-10T16:00:00.000Z" title="æ›´æ–°äº 2024-03-11 00:00:00">2024-03-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Design-Pattern/">Design-Pattern</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">6.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>28åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;è·ç¦»æœ¬æ–‡ä¸Šæ¬¡æ›´æ–°å·²ç»è¿‡å»&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œè¯·æ³¨æ„æ—¶æ•ˆæ€§ã€‚&quot;,&quot;postUpdate&quot;:&quot;2024-03-11 00:00:00&quot;}" hidden></div><p>Java è®¾è®¡æ¨¡å¼å­¦ä¹ ç½‘ç«™ï¼š<a target="_blank" rel="noopener" href="http://c.biancheng.net/design_pattern/">Javaè®¾è®¡æ¨¡å¼ï¼š23ç§è®¾è®¡æ¨¡å¼å…¨é¢è§£æï¼ˆè¶…çº§è¯¦ç»†ï¼‰</a></p>
<p>çŸ¥ä¹ä¸“æ ï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/58093669">ç§’æ‡‚è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder patternï¼‰</a></p>
<p>ã€ŠEffective Java ä¸­æ–‡ç‰ˆï¼ˆåŸä¹¦ç¬¬ 3 ç‰ˆï¼‰ã€‹ â€”â€” ä¿é»æ•è¯‘</p>
<h1 id="1-æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹"><a class="header-anchor" href="#1-æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹"></a>1. æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹</h1>
<p>å‚è€ƒé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/1354.html">å»ºé€ è€…æ¨¡å¼ï¼ˆBulideræ¨¡å¼ï¼‰è¯¦è§£</a></p>
<p>å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ï¼ˆåˆç§°æ„å»ºè€…æ¨¡å¼ï¼‰ï¼šå°†å¤æ‚å¯¹è±¡çš„æ„é€ è¿‡ç¨‹ä¸å…¶è¡¨ç¤ºå½¢å¼åˆ†ç¦»ï¼Œä½¿åŒä¸€æ„é€ è¿‡ç¨‹åˆ›å»ºå‡ºä¸åŒçš„è¡¨ç¤ºå½¢å¼ã€‚å®ƒæ˜¯å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„å¯¹è±¡ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥æ„å»ºè€Œæˆã€‚å®ƒå°†å˜ä¸ä¸å˜ç›¸åˆ†ç¦»ï¼Œå³äº§å“çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸å˜çš„ï¼Œä½†æ¯ä¸€éƒ¨åˆ†æ˜¯å¯ä»¥çµæ´»é€‰æ‹©çš„ã€‚</p>
<blockquote>
<p>ä¼˜ç‚¹</p>
</blockquote>
<ol>
<li>å°è£…æ€§å¥½ï¼Œæ„å»ºå’Œè¡¨ç¤ºåˆ†ç¦»</li>
<li>æ‰©å±•æ€§å¥½ï¼Œå„ä¸ªå…·ä½“çš„å»ºé€ è€…ç›¸äº’ç‹¬ç«‹ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è§£è€¦</li>
<li>å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå»ºé€ è€…å¯ä»¥å¯¹åˆ›å»ºè¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸å¯¹å…¶å®ƒæ¨¡å—äº§ç”Ÿä»»ä½•å½±å“ï¼Œä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹</p>
</blockquote>
<ol>
<li>äº§å“çš„ç»„æˆéƒ¨åˆ†å¿…é¡»ç›¸åŒï¼Œè¿™é™åˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´</li>
<li>å¦‚æœäº§å“çš„å†…éƒ¨ç»“æ„å¤æ‚ï¼Œå½“äº§å“å†…éƒ¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå»ºé€ è€…ä¹Ÿè¦åŒæ­¥ä¿®æ”¹ï¼ŒåæœŸç»´æŠ¤æˆæœ¬è¾ƒå¤§</li>
<li>ä¸ºäº†åˆ›å»ºå¯¹è±¡ï¼Œå¿…é¡»å…ˆåˆ›å»ºå®ƒçš„æ„å»ºå™¨ï¼Œåœ¨ååˆ†æ³¨é‡æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€ç¬”æ€§èƒ½å¼€é”€</li>
</ol>
<p>å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å…³æ³¨ç‚¹ä¸åŒï¼šå»ºé€ è€…æ¨¡å¼æ³¨é‡é›¶éƒ¨ä»¶çš„ç»„è£…è¿‡ç¨‹ï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼æ›´æ³¨é‡é›¶éƒ¨ä»¶çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä½†ä¸¤è€…å¯ä»¥ç»“åˆä½¿ç”¨ã€‚</p>
<p>æ¯ä¸ªå­—éƒ½è®¤è¯†ï¼Œä½†æ˜¯åˆåœ¨ä¸€èµ·å°±ä¸ç†è§£äº†ï¼Œè¿™åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ ğŸ¤”</p>
<p>ä¸æ˜ç™½æ²¡æœ‰å…³ç³»ï¼Œè¿™æ®µæ–‡å­—å¯è®°å¯ä¸è®°ï¼Œå½“ç„¶è®°ä½æ›´å¥½ï¼Œä»¥åå’Œåˆ«äººè§£é‡Šå°±æœ‰è£…é€¼çš„èµ„æ ¼äº†ã€‚ğŸ¤£</p>
<h1 id="2-é€‚ç”¨åœºæ™¯"><a class="header-anchor" href="#2-é€‚ç”¨åœºæ™¯"></a>2. é€‚ç”¨åœºæ™¯</h1>
<p>è®¾è®¡æ¨¡å¼ï¼Œæœ€é‡è¦çš„æ˜¯å¦‚ä½•ä½¿ç”¨å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<p>åœ¨ã€ŠEffective Java ä¸­æ–‡ç‰ˆï¼ˆåŸä¹¦ç¬¬ 3 ç‰ˆï¼‰ã€‹ä¸€ä¹¦ä¸­çš„ç¬¬ 2 æ¡å°±è¯´åˆ°äº†ï¼šé‡åˆ°å¤šä¸ªæ„é€ å™¨ï¼ˆConstructorï¼‰å‚æ•°æ—¶è¦è€ƒè™‘ä½¿ç”¨æ„å»ºå™¨ï¼ˆBuilderï¼‰ã€‚</p>
<p>è¯´äººè¯å°±æ˜¯ï¼šå¦‚æœä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°å‚æ•°æœ‰å¤šä¸ªæ—¶ï¼Œè¦è€ƒè™‘ä½¿ç”¨æ„é€ å™¨ï¼ˆBuilderï¼‰ã€‚</p>
<p>å…¶å®è¿˜æ˜¯æœ‰ç‚¹æ¨¡ç³Šï¼Œå†è¯´äººè¯ï¼š<strong>å½“ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸ªæ•°è¶…è¿‡ 4 ä¸ªï¼Œè€Œä¸”æŸäº›å‚æ•°æ˜¯å¯é€‰çš„å‚æ•°ï¼Œè€ƒè™‘ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚</strong></p>
<p>é—®é¢˜åˆæ¥äº†ï¼š</p>
<ol>
<li>å»ºé€ è€…æ¨¡å¼è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Ÿ</li>
<li>æ€ä¹ˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Ÿ</li>
</ol>
<h1 id="3-è§£å†³çš„é—®é¢˜"><a class="header-anchor" href="#3-è§£å†³çš„é—®é¢˜"></a>3. è§£å†³çš„é—®é¢˜</h1>
<p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª <code>Person</code> ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Double height;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨åˆ›å»º <code>Person</code> å¯¹è±¡æ—¶ï¼Œæœ‰äº›å±æ€§æ˜¯å¿…å¡«çš„ï¼Œæ¯”å¦‚ <code>firstName</code>ã€<code>lastName</code> å’Œ <code>gender</code>ï¼Œå…¶ä½™å±æ€§æ˜¯å¯é€‰çš„ã€‚</p>
<p>é‚£ç°åœ¨æƒ³è¦åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„ <code>Person</code> å¯¹è±¡ï¼š</p>
<pre>
firstName  	---> é»˜
lastName 	---> çƒ¦
gender  	---> 1
age 		---> 19
height		---> 178.2
</pre>
<p>è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<h2 id="3-1-é‡å æ„é€ å™¨æ¨¡å¼"><a class="header-anchor" href="#3-1-é‡å æ„é€ å™¨æ¨¡å¼"></a>3.1 é‡å æ„é€ å™¨æ¨¡å¼</h2>
<p>åœ¨ã€ŠEffective Java ä¸­æ–‡ç‰ˆï¼ˆåŸä¹¦ç¬¬ 3 ç‰ˆï¼‰ã€‹ä¸€ä¹¦ä¸­ï¼Œé¦–å…ˆæåˆ°äº† <em>é‡å æ„é€ å™¨æ¨¡å¼</em>ï¼Œå³åˆ›å»ºä¸€ä¸ªåŒ…å«éœ€è¦è®¾ç½®çš„å‚æ•°çš„æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String firstName, String lastName, Integer gender, Integer age, Double height)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">    <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">    <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.height = height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½†è¿™ç§æ–¹å¼æ˜¯å¾ˆæ„šè ¢çš„ ğŸ˜‘</p>
</blockquote>
<ul>
<li>
<p>å¦‚æœéœ€æ±‚å‘ç”Ÿå˜æ›´ï¼Œæƒ³åˆ›å»ºä¸€ä¸ªè¿˜åŒ…å« <code>job</code> å±æ€§çš„å¯¹è±¡ï¼Œåˆ™åˆè¦æä¾›ä¸€ä¸ªåŒ…å« <code>job</code> å‚æ•°çš„æ„é€ å‡½æ•°ï¼›åŒæ ·ï¼Œå¦‚æœæƒ³åˆ›å»ºä¸€ä¸ªç¼ºå°‘æŸä¸ªå±æ€§çš„å¯¹è±¡ï¼Œä¹Ÿè¦å†æä¾›ä¸€ä¸ªæ„é€ å‡½æ•°ï¼›</p>
</li>
<li>
<p>ä½¿ç”¨æ„é€ å‡½æ•°æ—¶ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°æœ‰å¾ˆå¤šï¼Œä½†æœ‰å¾ˆå¤šç›¸åŒçš„ç±»å‹ï¼Œåœ¨è®¾ç½®æ—¶å¯èƒ½ä¼šæ··æ·†ã€‚æ¯”å¦‚ <code>gender</code> å’Œ <code>age</code> éƒ½æ˜¯ <code>Integer</code> ç±»å‹çš„ï¼Œå¦‚æœä¸å°å¿ƒå°†å®ƒä»¬çš„å€¼è®¾ç½®åäº†ï¼Œè¿™ä¸ªé”™è¯¯ä¸ä¼šåœ¨ç¼–è¯‘å™¨ä½“ç°ï¼Œåç»­éœ€è¦é¢å¤–çš„æ—¶é—´å»çº é”™ã€‚</p>
</li>
</ul>
<p>æ€»ä¹‹ï¼Œé‡‡ç”¨ <strong>é‡å æ„é€ å™¨æ¨¡å¼</strong> æ¥è§£å†³å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„æ–¹å¼ã€‚</p>
<h2 id="3-2-JavaBeans-æ¨¡å¼"><a class="header-anchor" href="#3-2-JavaBeans-æ¨¡å¼"></a>3.2 JavaBeans æ¨¡å¼</h2>
<p>åœ¨ã€ŠEffective Java ä¸­æ–‡ç‰ˆï¼ˆåŸä¹¦ç¬¬ 3 ç‰ˆï¼‰ã€‹ä¸€ä¹¦ä¸­ï¼Œç´§æ¥ç€åˆæåˆ°äº† <em>JavaBeans æ¨¡å¼</em>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼šå…ˆè°ƒç”¨ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼Œç„¶åä½¿ç”¨ Setter æ–¹æ³•æ¥è®¾ç½®å¿…é¡»ä¸å¯é€‰å‚æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFirstName</span><span class="params">(String firstName)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLastName</span><span class="params">(String lastName)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(Integer gender)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">(Double height)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.height = height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeight</span><span class="params">(Double weight)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.weight = weight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJob</span><span class="params">(String job)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.job = job;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™ç§æ–¹å¼ä¹Ÿå­˜åœ¨é—®é¢˜ ğŸ˜”</p>
</blockquote>
<p>å› ä¸ºå¯¹è±¡çš„å„ä¸ªå±æ€§å€¼æ˜¯åˆ†æ­¥è®¾ç½®çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¯¹è±¡çš„çŠ¶æ€å®¹æ˜“å‘ç”Ÿå˜åŒ–ï¼Œè¿›è€Œäº§ç”Ÿé”™è¯¯ã€‚</p>
<p>ã€ŠEffective Java ä¸­æ–‡ç‰ˆï¼ˆåŸä¹¦ç¬¬ 3 ç‰ˆï¼‰ã€‹ä¸­æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p>
<p>é—æ†¾çš„æ˜¯ï¼Œ JavaBeans æ¨¡å¼è‡ªèº«æœ‰ç€å¾ˆä¸¥é‡çš„ç¼ºç‚¹ ã€‚ å› ä¸ºæ„é€ è¿‡ç¨‹è¢«åˆ†åˆ°äº†å‡ ä¸ªè°ƒç”¨ä¸­ï¼Œåœ¨æ„é€ è¿‡ç¨‹ä¸­ JavaBean å¯èƒ½å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚ ç±»æ— æ³•ä»…ä»…é€šè¿‡æ£€éªŒæ„é€ å™¨å‚æ•°çš„æœ‰æ•ˆæ€§æ¥ä¿è¯ä¸€è‡´æ€§ ã€‚ è¯•å›¾ä½¿ç”¨å¤„äºä¸ä¸€è‡´çŠ¶æ€çš„å¯¹è±¡å°†ä¼šå¯¼è‡´å¤±è´¥ï¼Œè¿™ç§å¤±è´¥ä¸åŒ…å«é”™è¯¯çš„ä»£ç å¤§ç›¸å¾„åº­ï¼Œå› æ­¤è°ƒè¯•èµ·æ¥ååˆ†å›°éš¾ ã€‚ ä¸æ­¤ç›¸å…³çš„å¦ä¸€ç‚¹ä¸è¶³åœ¨äºï¼Œ JavaBeans æ¨¡å¼ä½¿å¾—æŠŠç±»åšæˆä¸å¯å˜çš„å¯èƒ½æ€§ä¸å¤å­˜åœ¨ ï¼Œè¿™å°±éœ€è¦ç¨‹åºå‘˜ä»˜å‡ºé¢å¤–çš„åŠªåŠ›æ¥ç¡®ä¿å®ƒçš„çº¿ç¨‹å®‰å…¨ ã€‚</p>
<p>é‚£æœ‰æ²¡æœ‰ç©¶ææ–¹æ¡ˆå‘¢ï¼Ÿ</p>
<p>å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼ ğŸ’ª</p>
<h1 id="4-å»ºé€ è€…æ¨¡å¼"><a class="header-anchor" href="#4-å»ºé€ è€…æ¨¡å¼"></a>4. å»ºé€ è€…æ¨¡å¼</h1>
<h2 id="4-1-å¦‚ä½•ä½¿ç”¨"><a class="header-anchor" href="#4-1-å¦‚ä½•ä½¿ç”¨"></a>4.1 å¦‚ä½•ä½¿ç”¨</h2>
<p>ä»¥ <code>Person</code>  ä¸ºä¾‹ï¼š</p>
<ol>
<li>åœ¨ <code>Person</code> ä¸­åˆ›å»ºä¸€ä¸ªé™æ€åµŒå¥—ç±» <code>Builder</code>ï¼Œå¹¶å°† <code>Person</code> ä¸­çš„å‚æ•°éƒ½å¤åˆ¶åˆ° <code>Builder</code> ç±»ä¸­</li>
<li>åœ¨ <code>Person</code> ä¸­æä¾›ä¸€ä¸ªé <code>public</code> çš„æ„é€ å‡½æ•°ï¼Œå‚æ•°ç±»å‹ä¸º <code>Builder</code></li>
<li>åœ¨ <code>Builder</code> ä¸­æä¾›ä¸€ä¸ª <code>public</code> çš„æ„é€ å‡½æ•°ï¼Œå‚æ•°ä¸ºæ„é€  <code>Person</code> å¯¹è±¡æ—¶çš„å¿…å¡«å‚æ•°</li>
<li>åœ¨ <code>Builder</code> ä¸­æä¾›å¤šä¸ªè®¾ç½®æ–¹æ³•ï¼Œç”¨äºå¯¹ Person ä¸­å¯é€‰å‚æ•°è¿›è¡Œèµ‹å€¼ï¼Œè¿”å›å€¼ä¸º <code>Builder</code> ç±»å‹çš„å®ä¾‹ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰</li>
<li>åœ¨ <code>Builder</code> ä¸­æä¾›ä¸€ä¸ª <code>build()</code> æ–¹æ³•ï¼ˆå½“ç„¶å«å•¥åéƒ½å¯ä»¥ï¼Œä½œä¸ºæ„å»ºæ–¹æ³•ï¼‰ï¼Œç”¨äºæ„å»ºæœ€ç»ˆçš„ <code>Person</code> å®ä¾‹å¹¶è¿”å›</li>
</ol>
<h2 id="4-2-ä»£ç å±•ç¤º"><a class="header-anchor" href="#4-2-ä»£ç å±•ç¤º"></a>4.2 ä»£ç å±•ç¤º</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Double height;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Person</span><span class="params">(Builder builder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.firstName = builder.firstName;</span><br><span class="line">        <span class="built_in">this</span>.lastName = builder.lastName;</span><br><span class="line">        <span class="built_in">this</span>.gender = builder.gender;</span><br><span class="line">        <span class="built_in">this</span>.age = builder.age;</span><br><span class="line">        <span class="built_in">this</span>.height = builder.height;</span><br><span class="line">        <span class="built_in">this</span>.weight = builder.weight;</span><br><span class="line">        <span class="built_in">this</span>.job = builder.job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFirstName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLastName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String firstName;</span><br><span class="line">        <span class="keyword">private</span> String lastName;</span><br><span class="line">        <span class="keyword">private</span> Integer gender;</span><br><span class="line">        <span class="keyword">private</span> Integer age;</span><br><span class="line">        <span class="keyword">private</span> Double height;</span><br><span class="line">        <span class="keyword">private</span> Double weight;</span><br><span class="line">        <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">(String firstName, String lastName, Integer gender)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">            <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">            <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="title function_">setHeight</span><span class="params">(Double height)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.height = height;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="title function_">setWeight</span><span class="params">(Double weight)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.weight = weight;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="title function_">setJob</span><span class="params">(String job)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.job = job;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Person <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBuilder</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>.Builder(<span class="string">&quot;é»˜&quot;</span>, <span class="string">&quot;çƒ¦&quot;</span>, <span class="number">1</span>)</span><br><span class="line">            .setAge(<span class="number">19</span>)</span><br><span class="line">            .setHeight(<span class="number">178.2</span>)</span><br><span class="line">            .build();</span><br><span class="line">    assertNotNull(person);</span><br><span class="line">    assertEquals(<span class="string">&quot;é»˜&quot;</span>, person.getFirstName());</span><br><span class="line">    assertEquals(<span class="string">&quot;çƒ¦&quot;</span>, person.getLastName());</span><br><span class="line">    assertEquals(<span class="number">1</span>, person.getGender().intValue());</span><br><span class="line">    assertEquals(<span class="number">19</span>, person.getAge().intValue());</span><br><span class="line">    assertEquals(<span class="number">178.2</span>, person.getHeight(), <span class="number">0.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°è¿™ç§æ–¹å¼æ˜¯åœ¨ Java ä¸­ç®€åŒ–çš„ä½¿ç”¨æ–¹å¼ï¼Œç»å…¸çš„å»ºé€ è€…æ¨¡å¼ä¸å…¶æœ‰æ‰€ä¸åŒï¼Œä¸æ„Ÿå…´è¶£å¯ä»¥è·³è¿‡ç¬¬ 5 èŠ‚ã€‚ğŸ˜œ</p>
<h1 id="5-ç»å…¸å»ºé€ è€…æ¨¡å¼"><a class="header-anchor" href="#5-ç»å…¸å»ºé€ è€…æ¨¡å¼"></a>5. ç»å…¸å»ºé€ è€…æ¨¡å¼</h1>
<h2 id="5-1-è§’è‰²ä¸ç»“æ„"><a class="header-anchor" href="#5-1-è§’è‰²ä¸ç»“æ„"></a>5.1 è§’è‰²ä¸ç»“æ„</h2>
<p>å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ç”±äº§å“ã€æŠ½è±¡å»ºé€ è€…ã€å…·ä½“å»ºé€ è€…ã€æŒ‡æŒ¥è€…ç­‰ 4 ä¸ªè§’è‰²æ„æˆã€‚</p>
<p>å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼çš„ä¸»è¦è§’è‰²å¦‚ä¸‹ï¼š</p>
<ol>
<li>äº§å“è§’è‰²ï¼ˆProductï¼‰ï¼šå®ƒæ˜¯åŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡ï¼Œç”±å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå…¶å„ä¸ªé›¶éƒ¨ä»¶ã€‚</li>
<li>æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªåŒ…å«åˆ›å»ºäº§å“å„ä¸ªå­éƒ¨ä»¶çš„æŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œé€šå¸¸è¿˜åŒ…å«ä¸€ä¸ªè¿”å›å¤æ‚äº§å“çš„æ–¹æ³• <code>getResult()</code>ã€‚</li>
<li>å…·ä½“å»ºé€ è€…(Concrete Builderï¼‰ï¼šå®ç° Builder æ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚</li>
<li>æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ï¼šå®ƒè°ƒç”¨å»ºé€ è€…å¯¹è±¡ä¸­çš„éƒ¨ä»¶æ„é€ ä¸è£…é…æ–¹æ³•å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œåœ¨æŒ‡æŒ¥è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ã€‚</li>
</ol>
<p>å»ºé€ è€…æ¨¡å¼çš„ç»“æ„å›¾ï¼š</p>
<p><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/DesignPatternImages/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="å»ºé€ è€…æ¨¡å¼çš„ç»“æ„å›¾"></p>
<h2 id="5-2-ä»£ç å±•ç¤º"><a class="header-anchor" href="#5-2-ä»£ç å±•ç¤º"></a>5.2 ä»£ç å±•ç¤º</h2>
<blockquote>
<p>ç›®æ ‡ <code>Person2</code> ç±»</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Double height;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å«æœ‰å¿…å¡«å±æ€§çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person2</span><span class="params">(String firstName, String lastName,</span></span><br><span class="line"><span class="params">                   Integer gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">        <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯é€‰å±æ€§çš„ Setter æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯é€‰å±æ€§çš„ Setter æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">(Double height)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯é€‰å±æ€§çš„ Setter æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeight</span><span class="params">(Double weight)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.weight = weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯é€‰å±æ€§çš„ Setter æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJob</span><span class="params">(String job)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çœç•¥æ‰€æœ‰å±æ€§çš„ Getter æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŠ½è±¡å»ºé€ è€…ç±»</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Person2Builder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span>  <span class="title function_">setWeight</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span>  <span class="title function_">setJob</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Person2 <span class="title function_">getPerson2</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®ä½“å»ºé€ è€…ç±»ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚æ„å»ºå‡ºå¤šä¸ªå®ä½“å»ºé€ è€…ç±»ï¼Œåœ¨æ­¤åªæ„å»ºä¸€ä¸ª <code>Student</code> ç±»ï¼š</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person2Builder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Person2 person2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String firstName, String lastName,</span></span><br><span class="line"><span class="params">                   Integer gender)</span> &#123;</span><br><span class="line">        person2 = <span class="keyword">new</span> <span class="title class_">Person2</span>(firstName, lastName, gender);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">()</span> &#123;</span><br><span class="line">        person2.setAge(<span class="number">19</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        person2.setHeight(<span class="number">178.2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeight</span><span class="params">()</span> &#123;</span><br><span class="line">        person2.setWeight(<span class="number">125.6</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJob</span><span class="params">()</span> &#123;</span><br><span class="line">        person2.setJob(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Person2 <span class="title function_">getPerson2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> person2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŒ‡å¯¼è€…ç±»</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person2Director</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makePerson2</span><span class="params">(Person2Builder builder)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * è¦ä¸ºç›®æ ‡å®ä½“è®¾ç½®é‚£äº›å¯é€‰å‚æ•°å°±åœ¨æ­¤è®¾ç½®</span></span><br><span class="line"><span class="comment">         * æ¯”å¦‚ï¼Œæˆ‘åªæƒ³è®©æˆ‘çš„ç›®æ ‡å®ä½“å…·æœ‰ age å’Œ height ä¸¤ä¸ªå¯é€‰å±æ€§å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        builder.setAge();</span><br><span class="line">        builder.setHeight();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ä¸æµ‹è¯•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPerson2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Person2Director</span> <span class="variable">director</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person2Director</span>();</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;é»˜&quot;</span>, <span class="string">&quot;çƒ¦&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    director.makePerson2(student);</span><br><span class="line">    <span class="type">Person2</span> <span class="variable">person2</span> <span class="operator">=</span> student.getPerson2();</span><br><span class="line">    assertEquals(<span class="string">&quot;é»˜&quot;</span>, person2.getFirstName());</span><br><span class="line">    assertEquals(<span class="string">&quot;çƒ¦&quot;</span>, person2.getLastName());</span><br><span class="line">    assertEquals(<span class="number">1</span>, person2.getGender().intValue());</span><br><span class="line">    assertEquals(<span class="number">19</span>, person2.getAge().intValue());</span><br><span class="line">    assertEquals(<span class="number">178.2</span>, person2.getHeight(), <span class="number">0.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ€è€ƒ</p>
</blockquote>
<p>ç›¸æ¯”äºç»å…¸å»ºé€ è€…æ¨¡å¼ï¼Œæœ€åˆçš„å»ºé€ è€…æ¨¡å¼çœç•¥äº† Director è¿™ä¸ªè§’è‰²ï¼Œå°†æ„å»ºç®—æ³•äº¤ç»™äº† Client ç«¯ï¼Œå…¶æ¬¡å°† Builder å†™åˆ°äº†è¦æ„å»ºçš„äº§å“ç±»é‡Œé¢ï¼Œæœ€åé‡‡ç”¨äº†é“¾å¼è°ƒç”¨ã€‚</p>
<p>ä¸Šè¿°å®ç°ä¸­çš„ <code>Student</code> å¯¹è±¡çš„å±æ€§å€¼éƒ½æ˜¯æ— æ³•ä¿®æ”¹çš„ï¼Œå› æ­¤å»ºé€ è€…æ¨¡å¼ä¹Ÿå¸¸ç”¨äºåˆ›å»º <strong>ä¸€ä¸ªæˆå‘˜å˜é‡ä¸å¯å˜çš„å¯¹è±¡</strong>ã€‚æ‰€ä»¥åœ¨æœ€åˆçš„å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå¸¸æŠŠ <code>Person</code> çš„å±æ€§è®¾ç½®æˆ <code>final</code> çš„ã€‚å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Double height;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Double weight;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String job;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// --snip--</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="6-Lombok-ä¸­çš„-Builder"><a class="header-anchor" href="#6-Lombok-ä¸­çš„-Builder"></a>6. Lombok ä¸­çš„ @Builder</h1>
<h2 id="6-1-åŸºæœ¬ä½¿ç”¨"><a class="header-anchor" href="#6-1-åŸºæœ¬ä½¿ç”¨"></a>6.1 åŸºæœ¬ä½¿ç”¨</h2>
<p>å»ºé€ è€…æ¨¡å¼çš„å®ç°æ­¥éª¤éƒ½å·®ä¸å¤šï¼Œå°±åƒä¸€ä¸ªæ¨¡æ¿ä¸€æ ·ã€‚</p>
<p>åœ¨ Lombok ä¸­æä¾›äº† <code>@Getter</code> å’Œ <code>@Setter</code> æ³¨è§£æ¥è§£å†³å†—æ‚ Getter å’Œ Setter æ–¹æ³•ï¼Œå®ƒè¿˜æä¾›äº† <code>@Builder</code> æ³¨è§£æ¥ä¸€é”®ç”Ÿæˆå»ºé€ è€…æ¨¡å¼çš„ä»£ç ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªæ–°å®ä½“ <code>Animal</code>ï¼Œå¹¶ä½¿ç”¨ <code>@Builder</code> æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String type;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnimalTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAnimal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> Animal.builder()</span><br><span class="line">                .name(<span class="string">&quot;å°é»‘&quot;</span>)</span><br><span class="line">                .gender(<span class="number">1</span>)</span><br><span class="line">                .type(<span class="string">&quot;Dog&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        assertEquals(<span class="string">&quot;å°é»‘&quot;</span>, animal.getName());</span><br><span class="line">        assertEquals(<span class="number">1</span>, animal.getGender().intValue());</span><br><span class="line">        assertEquals(<span class="string">&quot;Dog&quot;</span>, animal.getType());</span><br><span class="line">        assertNull(animal.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ IDEA åç¼–è¯‘ <code>Animal.class</code> åçš„å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String type;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer gender;</span><br><span class="line"></span><br><span class="line">    Animal(String name, String type, Integer age, Integer gender) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.type = type;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Animal.AnimalBuilder <span class="title function_">builder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Animal</span>.AnimalBuilder();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AnimalBuilder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> String type;</span><br><span class="line">        <span class="keyword">private</span> Integer age;</span><br><span class="line">        <span class="keyword">private</span> Integer gender;</span><br><span class="line"></span><br><span class="line">        AnimalBuilder() &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Animal.AnimalBuilder <span class="title function_">name</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Animal.AnimalBuilder <span class="title function_">type</span><span class="params">(String type)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.type = type;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Animal.AnimalBuilder <span class="title function_">age</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Animal.AnimalBuilder <span class="title function_">gender</span><span class="params">(Integer gender)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.gender = gender;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Animal <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Animal</span>(<span class="built_in">this</span>.name, <span class="built_in">this</span>.type, <span class="built_in">this</span>.age, <span class="built_in">this</span>.gender);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Animal.AnimalBuilder(name=&quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot;, type=&quot;</span> + <span class="built_in">this</span>.type + <span class="string">&quot;, age=&quot;</span> + <span class="built_in">this</span>.age + <span class="string">&quot;, gender=&quot;</span> + <span class="built_in">this</span>.gender + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸å‰æ–‡çš„å»ºé€ è€…æ¨¡å¼çš„å®ç°ç›¸æ¯”ï¼ŒLombok ç”Ÿæˆçš„ä»£ç æ·»åŠ äº†é™æ€æ–¹æ³• <code>builder()</code>ï¼Œå¹¶ä¸” <code>AnimalBuilder</code> çš„æ„é€ å‡½æ•°ä¸å†æ˜¯ <code>public</code>ï¼Œä»…ä»…æ˜¯åŒ…ç§æœ‰çš„ã€‚</p>
<p>è¿™æ ·åœ¨æ„å»º <code>Animal</code> å¯¹è±¡æ—¶ä¸å†éœ€è¦ä½¿ç”¨å…³é”®è¯ <code>new</code>ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨é™æ€æ–¹æ³• <code>builder()</code>ã€‚</p>
<h2 id="6-2-è¿›ä¸€æ­¥æ”¹è¿›"><a class="header-anchor" href="#6-2-è¿›ä¸€æ­¥æ”¹è¿›"></a>6.2 è¿›ä¸€æ­¥æ”¹è¿›</h2>
<p>å¦‚æœåªç”¨ <code>@Builder</code> æ³¨è§£ï¼Œå¯ä»¥çœ‹åˆ° Lombok ä¸º <code>Animal</code> ç±»ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯åŒ…ç§æœ‰çš„ã€‚</p>
<p>ä¹‹æ‰€ä»¥ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œæ˜¯å¸Œæœ›ç”¨æˆ· <strong>åªç”¨</strong> å»ºé€ è€…æ¨¡å¼æä¾›çš„æ–¹æ³•å»åˆ›å»ºå®ä¾‹ï¼ŒåŒ…ç§æœ‰çš„æ„é€ å‡½æ•°ï¼Œå¯ä»¥è¢«åŒä¸€åŒ…ä¸­çš„ç±»è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦å°†è¿™ä¸ªæ„é€ å‡½æ•°è®¾ç½®ä¸º <code>private</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AllArgsConstructor(access = AccessLevel.PRIVATE)</span></span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆçš„ <code>Animal</code> ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor(access = AccessLevel.PRIVATE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String type;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°ç¼–è¯‘åï¼Œç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title function_">Animal</span><span class="params">(String name, String type, Integer age, Integer gender)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.type = type;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-3-å¯ä»¥è¿›è¡Œçš„æ‹“å±•"><a class="header-anchor" href="#6-3-å¯ä»¥è¿›è¡Œçš„æ‹“å±•"></a>6.3 å¯ä»¥è¿›è¡Œçš„æ‹“å±•</h2>
<p>ä½¿ç”¨ Lombok çš„ <code>@Builder</code> åè™½ç„¶ç”Ÿæˆäº†å»ºé€ è€…æ¨¡å¼çš„ç»“æ„ï¼Œä¹Ÿå¯ä»¥å®ç°å±æ€§å€¼çš„é€‰æ‹©æ€§è®¾ç½®ï¼Œä½†å¹¶æ²¡åšåˆ°å±æ€§å€¼çš„å¿…é¡»è®¾ç½®ã€‚è¦æƒ³å®ç°ä¹Ÿå¾ˆç®€å•åªéœ€è¦ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan 2021/2/3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Builder(builderMethodName = &quot;hiddenBuilder&quot;)</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor(access = AccessLevel.PRIVATE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String type;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AnimalBuilder <span class="title function_">builder</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hiddenBuilder().type(type);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>@Builder</code> æ³¨è§£çš„ <code>builderMethodName</code> å±æ€§ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„ builder æ–¹æ³•è®¾ç½®ä¸€ä¸ªæ–°çš„åå­—ã€‚</p>
<p>ç„¶åè‡ªå·±ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨ç”Ÿæˆçš„æ–¹æ³•ï¼Œå¹¶è®¾ç½®å¿…å¡«å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAnimal</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> Animal.builder(<span class="string">&quot;Dog&quot;</span>)</span><br><span class="line">            .name(<span class="string">&quot;å°é»‘&quot;</span>)</span><br><span class="line">            .gender(<span class="number">1</span>)</span><br><span class="line">            .build();</span><br><span class="line">    assertEquals(<span class="string">&quot;å°é»‘&quot;</span>, animal.getName());</span><br><span class="line">    assertEquals(<span class="number">1</span>, animal.getGender().intValue());</span><br><span class="line">    assertEquals(<span class="string">&quot;Dog&quot;</span>, animal.getType());</span><br><span class="line">    assertNull(animal.getAge());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°ç¼–è¯‘åï¼Œç”Ÿäº§çš„éƒ¨åˆ†å†…å®¹ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Animal.AnimalBuilder <span class="title function_">builder</span><span class="params">(String type)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> hiddenBuilder().type(type);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Animal.AnimalBuilder <span class="title function_">hiddenBuilder</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Animal</span>.AnimalBuilder();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-4-ä»£ç å…¼å®¹"><a class="header-anchor" href="#6-4-ä»£ç å…¼å®¹"></a>6.4 ä»£ç å…¼å®¹</h2>
<blockquote>
<p>æ— å‚æ„é€ ä¸å…¨å‚æ„é€ </p>
</blockquote>
<p>å¦‚æœæ²¡æœ‰æ˜¾å¼å£°æ˜ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ï¼Œä½†å¦‚æœå£°æ˜äº†ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªé»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°å°±ä¸å­˜åœ¨äº†ï¼Œé™¤éæ˜¾å¼å£°æ˜å®ƒã€‚</p>
<p>å‡è®¾ä¸€ä¸ªç±»åœ¨æœ€åˆè®¾è®¡æ—¶å¹¶æ²¡æœ‰ä½¿ç”¨ <code>@Builder</code> æ³¨è§£ï¼Œåœ¨åç»­ç¼–ç ä¸­çªç„¶ä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£ï¼Œç”±äº <code>@Builder</code> æ³¨è§£ä¼šäº§ç”Ÿå…¨å‚æ„é€ å‡½æ•°ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°å…¼å®¹æ—§ä»£ç ï¼Œéœ€è¦å†ä½¿ç”¨ <code>@NoArgsConstructor</code> æ³¨è§£ä¸ºå…¶å£°æ˜æ— å‚æ„é€ å‡½æ•°ã€‚</p>
<p>è¿™æ ·æ˜¾å¼å£°æ˜æ— å‚æ„é€ å‡½æ•°åï¼Œ<code>@Builder</code> é»˜è®¤äº§ç”Ÿçš„å…¨å‚æ„é€ å‡½æ•°å°±ä¼šå¤±æ•ˆï¼Œå¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼Œå› æ­¤è¿˜éœ€è¦æ·»åŠ  <code>@AllArgsConstructor(access = AccessLevel.PRIVATE)</code> æ³¨è§£ã€‚</p>
<blockquote>
<p>é»˜è®¤å€¼çš„å¤„ç†</p>
</blockquote>
<p>å¦‚æœç±»ä¸­çš„å±æ€§å­˜åœ¨é»˜è®¤å€¼ï¼Œè¿™æ—¶å†ä½¿ç”¨äº† <code>@Builder</code> æ³¨è§£ï¼Œè®¾ç½®çš„é»˜è®¤å€¼ä¼šå¤±æ•ˆã€‚</p>
<p>è¿™æ˜¯å› ä¸º Lombok ç”Ÿæˆçš„é™æ€åµŒå¥—ç±»ä¸­çš„å±æ€§ä¸åŒ…å«é»˜è®¤å€¼ã€‚</p>
<p>ä¸ºäº†è®©è¿™äº›é»˜è®¤å€¼ç”Ÿæ•ˆï¼Œä¸”èƒ½å¤Ÿæ„‰å¿«åœ°ä½¿ç”¨ <code>@Builder</code> æ³¨è§£ï¼Œåªéœ€è¦åœ¨è®¾ç½®äº†é»˜è®¤å€¼çš„å­—æ®µä¸Šä½¿ç”¨ <code>@Builder.Default</code> æ³¨è§£å³å¯ã€‚</p>
<h1 id="7-åœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨"><a class="header-anchor" href="#7-åœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨"></a>7. åœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨</h1>
<p>å»ºé€ è€…æ¨¡å¼ä¹Ÿé€‚ç”¨äºç±»å±‚æ¬¡ç»“æ„ã€‚æŠ½è±¡ç±»æœ‰æŠ½è±¡çš„ builderï¼Œå…·ä½“ç±»æœ‰å…·ä½“çš„ builderã€‚</p>
<p>ä»¥ä¸‹ä»£ç æ¥è‡ªã€ŠEffective Java ä¸­æ–‡ç‰ˆï¼ˆåŸä¹¦ç¬¬ 3 ç‰ˆï¼‰ã€‹ ä¸€ä¹¦ã€‚</p>
<p>å£°æ˜æšä¸¾ <code>Topping</code>ï¼Œè¡¨ç¤ºæŠ«è¨çš„å„ç§é¦…æ–™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/5 12:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Topping</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç«è…¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    HAM,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è˜‘è‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MUSHROOM,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ´‹è‘±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ONION,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èƒ¡æ¤’</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PEPPER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¦™è‚ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SAUSAGE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”¨ä¸€ä¸ªæŠ½è±¡ç±»è¡¨ç¤ºå„ç§å„æ ·çš„æŠ«è¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/5 12:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Pizza</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Set&lt;Topping&gt; toppings;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Builder</span>&lt;T&gt;&gt; &#123;</span><br><span class="line">        EnumSet&lt;Topping&gt; toppings = EnumSet.noneOf(Topping.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> T <span class="title function_">addTopping</span><span class="params">(Topping topping)</span> &#123;</span><br><span class="line">            toppings.add(Objects.requireNonNull(topping));</span><br><span class="line">            <span class="keyword">return</span> self();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">abstract</span> Pizza <span class="title function_">build</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">abstract</span> T <span class="title function_">self</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pizza</span><span class="params">(Builder&lt;?&gt; builder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.toppings = builder.toppings.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°æœ‰ä¸¤ç§å…·ä½“çš„æŠ«è¨ï¼Œåˆ†åˆ«æ˜¯ç»å…¸çº½çº¦é£å‘³çš„æŠ«è¨å’Œé¦…æ–™å†…ç½®çš„åŠæœˆå‹æŠ«è¨ã€‚å£°æ˜æšä¸¾ <code>Size</code>ï¼Œè¡¨ç¤ºæŠ«è¨çš„å°ºå¯¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/5 13:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Size</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SMALL,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MEDIUM,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    LARGE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»å…¸çº½çº¦é£å‘³çš„æŠ«è¨çš„å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/5 13:22</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ç»å…¸çº½çº¦é£å‘³æŠ«è¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NyPizza</span> <span class="keyword">extends</span> <span class="title class_">Pizza</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Size size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> <span class="keyword">extends</span> <span class="title class_">Pizza</span>.Builder&lt;Builder&gt; &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Size size;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">(Size size)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.size = Objects.requireNonNull(size);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> NyPizza <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NyPizza</span>(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> Builder <span class="title function_">self</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NyPizza</span><span class="params">(Builder builder)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(builder);</span><br><span class="line">        <span class="built_in">this</span>.size = builder.size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦…æ–™å†…ç½®çš„åŠæœˆå‹æŠ«è¨çš„å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/5 14:06</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é¦…æ–™å†…ç½®çš„åŠæœˆå‹æŠ«è¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calzone</span> <span class="keyword">extends</span> <span class="title class_">Pizza</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æœ‰é…±æ±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">boolean</span> sauceInside;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> <span class="keyword">extends</span> <span class="title class_">Pizza</span>.Builder&lt;Builder&gt; &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">sauceInside</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="title function_">sauceInside</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.sauceInside = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Calzone <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Calzone</span>(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> Builder <span class="title function_">self</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Calzone</span><span class="params">(Builder builder)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(builder);</span><br><span class="line">        <span class="built_in">this</span>.sauceInside = builder.sauceInside;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPizza</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">NyPizza</span> <span class="variable">pizza</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NyPizza</span>.Builder(Size.SMALL)</span><br><span class="line">            .addTopping(Topping.SAUSAGE)</span><br><span class="line">            .addTopping(Topping.ONION)</span><br><span class="line">            .build();</span><br><span class="line">    assertEquals(Size.SMALL, pizza.getSize());</span><br><span class="line">    assertTrue(pizza.getToppings().containsAll(<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(Arrays.asList(Topping.SAUSAGE, Topping.ONION))));</span><br><span class="line"></span><br><span class="line">    <span class="type">Calzone</span> <span class="variable">calzone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Calzone</span>.Builder()</span><br><span class="line">            .addTopping(Topping.HAM)</span><br><span class="line">            .sauceInside()</span><br><span class="line">            .build();</span><br><span class="line">    assertTrue(calzone.isSauceInside());</span><br><span class="line">    assertEquals(<span class="number">1</span>, calzone.getToppings().size());</span><br><span class="line">    assertTrue(calzone.getToppings().contains(Topping.HAM));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="8-æ€»ç»“"><a class="header-anchor" href="#8-æ€»ç»“"></a>8. æ€»ç»“</h1>
<blockquote>
<p>å»ºé€ è€…æ¨¡å¼é€‚ç”¨çš„åœºæ™¯</p>
</blockquote>
<ol>
<li>
<p>å½“ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸ªæ•°è¾ƒå¤šï¼ˆè¶…è¿‡ 4 ä¸ªï¼‰ï¼Œè€Œä¸”æŸäº›å‚æ•°æ˜¯å¯é€‰çš„ï¼Œæˆ–è€…æŸäº›å‚æ•°åˆæ˜¯å¿…é€‰çš„ã€‚</p>
</li>
<li>
<p>è¦åˆ›é€ çš„å¯¹è±¡æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ä¸å¯å˜çš„å¯¹è±¡ã€‚</p>
</li>
</ol>
<blockquote>
<p>ç†è§£ <strong>åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ä¸å¯å˜çš„å¯¹è±¡</strong></p>
</blockquote>
<p>åœ¨ç»å…¸å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œåœ¨å…·ä½“å»ºé€ è€…ï¼ˆConcrete Builderï¼‰ä¸­å°†å±æ€§å€¼å†™æ­»ï¼Œå¯¼è‡´å±æ€§å€¼ä¸å¯å˜ï¼Œè¿™é‡Œå¯ä»¥ä½“ç°æˆå‘˜å˜é‡ä¸å¯å˜ã€‚</p>
<p>åœ¨æœ€åˆçš„å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œ<strong>æ²¡æœ‰é‡‡ç”¨</strong> JavaBeans æ¨¡å¼çš„æ–¹å¼ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œå› æ­¤ç±»ä¸­æ²¡æœ‰æä¾›ä»»ä½•å­—æ®µçš„ Setter æ–¹æ³•ï¼Œåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡çš„å­—æ®µå€¼æ— æ³•å†è¢«ä¿®æ”¹ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ—¶ï¼Œå¸¸ç”¨ <code>final</code> ä¿®é¥°å­—æ®µã€‚</p>
<blockquote>
<p>å¦‚ä½•å®ç°</p>
</blockquote>
<ol>
<li>å‚è€ƒç¬¬ 4 èŠ‚</li>
<li>ä½¿ç”¨ Lombok çš„ <code>@Builder</code> å’Œ <code>@AllArgsConstructor</code> æ³¨è§£</li>
</ol>
<blockquote>
<p>å¦‚æœä¸€ä¸ªç±»ä¸­æœ‰å¤§é‡æˆå‘˜å˜é‡ï¼Œä½†å®ƒä»¬å¹¶ä¸æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥å»ºé€ è€…æ¨¡å¼å—ï¼Ÿ</p>
</blockquote>
<p>è¿™æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå› ä¸ºæ—¢å¯ä»¥æŠŠå¯¹å­—æ®µçš„èµ‹å€¼è¿‡ç¨‹æ”¹æˆé“¾å¼çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Lombok ä¸­çš„ <code>@Accessors(chain = true)</code> å®ç°é“¾å¼è°ƒç”¨ï¼Œå½“ç„¶ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<p>è¯´å¥é¢˜å¤–è¯ï¼Œæœ‰äº›ç¬¬ä¸‰æ–¹ç±»åº“æˆ–æ¡†æ¶ä¸æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œå› æ­¤ Lombok çš„ <code>@Accessors(chain = true)</code> æ³¨è§£ä¸è¦éšæ„ä½¿ç”¨ã€‚</p>
<p><strong>ç®€è€Œè¨€ä¹‹ï¼šå¦‚æœåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ‰€ç”¨çš„æ„é€ å™¨ï¼ˆConstructorï¼‰æˆ–é™æ€å·¥å‚æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼›å¦‚æœè¿™äº›å‚æ•°æœ‰éƒ¨åˆ†å¿…é€‰çš„ï¼Œè¿˜æœ‰éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œé‚£å°±æ›´åº”è¯¥è€ƒè™‘å»ºé€ è€…æ¨¡å¼ã€‚</strong></p>
<h1 id="9-è¡¥å……ï¼šé“¾å¼è°ƒç”¨æ–°æ€è·¯"><a class="header-anchor" href="#9-è¡¥å……ï¼šé“¾å¼è°ƒç”¨æ–°æ€è·¯"></a>9. è¡¥å……ï¼šé“¾å¼è°ƒç”¨æ–°æ€è·¯</h1>
<p>ä¸ºå®ç°é“¾å¼è°ƒç”¨ï¼Œå¸¸å¸¸éœ€è¦ä½¿ Setter è¿”å› <code>this</code>ï¼Œæˆ–è€…ä½¿ç”¨ Lombok çš„ <code>@Accessors(chain = true)</code> æ³¨è§£ã€‚ä¸¤ç§æ–¹å¼å®ç°çš„é“¾å¼è°ƒç”¨åœ¨ç¼–è¯‘åç”Ÿæˆçš„ class æ–‡ä»¶ä¸­çš„ Setter éƒ½è¿”å›äº† <code>this</code>ï¼Œä½†è¿™åœ¨æŸäº›æƒ…å†µä¼šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ä½¿ç”¨ CGLib çš„ <code>BeanCopier</code> è¿›è¡Œ Bean æ‹·è´æ—¶ä¼šå› ä¸º Setter è¿”å›äº† <code>this</code> å¯¼è‡´æ‹·è´å¤±è´¥ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹é™¤äº†ä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„æ–¹æ³•å—ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é“¾å¼è°ƒç”¨çš„æ–°æ€è·¯</span></span><br><span class="line"><span class="comment"> * æˆ‘å¹¶ä¸è®¤ä¸ºè¿™æ˜¯å»ºé€ è€…æ¨¡å¼çš„é€šç”¨å†™æ³•</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/11/24 22:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Builder</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Supplier&lt;T&gt; CONSTRUCTOR;</span><br><span class="line">    <span class="keyword">private</span> Consumer&lt;T&gt; injector = (t) -&gt; &#123; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Builder</span><span class="params">(Supplier&lt;T&gt; constructor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.CONSTRUCTOR = constructor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Builder&lt;T&gt; <span class="title function_">builder</span><span class="params">(Supplier&lt;T&gt; constructor)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Builder</span>&lt;&gt;(constructor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;F&gt; Builder&lt;T&gt; <span class="title function_">with</span><span class="params">(BiConsumer&lt;T, F&gt; biConsumer, F f)</span> &#123;</span><br><span class="line">        Consumer&lt;T&gt; c = instance -&gt; biConsumer.accept(instance, f);</span><br><span class="line">        injector = injector.andThen(c);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> CONSTRUCTOR.get();</span><br><span class="line">        injector.accept(t);</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> Builder.builder(Student::<span class="keyword">new</span>)</span><br><span class="line">            .with(Student::setName, <span class="string">&quot;mofan&quot;</span>)</span><br><span class="line">            .with(Student::setAge, <span class="number">20</span>)</span><br><span class="line">            .build();</span><br><span class="line">    Assert.assertEquals(<span class="string">&quot;mofan&quot;</span>, student.getName());</span><br><span class="line">    Assert.assertEquals(<span class="number">20</span>, student.getAge());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰äººç®¡è¿™ä¸ª <code>Builder</code> å«åšé€šç”¨ Builderï¼Œè¯•å›¾å°†å…¶ä¸å»ºé€ è€…æ¨¡å¼è”ç³»ä¸Šï¼Œä½†æˆ‘è®¤ä¸ºè¿™ä¸ª <code>Builder</code> ä¸å»ºé€ è€…æ¨¡å¼æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚</p>
<p>é¦–å…ˆæ²¡æ³•åšåˆ°åœ¨åˆ›å»ºå¯¹è±¡æ—¶è®©ä¸€äº›å‚æ•°å¿…å¡«ï¼Œä¸€äº›å‚æ•°å¯é€‰ã€‚æˆ–è®¸å¯ä»¥æä¾›å¤šä¸ª <code>Builder#builder()</code> æ–¹æ³•çš„é‡è½½ï¼Ÿ</p>
<p>ä½†è¿™æ ·éœ€è¦ç›®æ ‡ç±»ä¸­æä¾›å…¬æœ‰çš„æœ‰å‚æ„é€ å‡½æ•°ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåœ¨åç»­çš„æ“ä½œä¸­è¿˜è¦æ±‚ç›®æ ‡ç±»æä¾›å…±æœ‰çš„ Setterï¼Œè®©åˆ›å»ºå‡ºçš„å¯¹è±¡èƒ½è¢«éšæ„ä¿®æ”¹ã€‚æ— è®ºæ˜¯å…¬æœ‰çš„æœ‰å‚æ„é€ å‡½æ•°ï¼Œè¿˜æ˜¯å…¬ç”¨çš„ Setterï¼Œè¿™äº›åœ¨å»ºé€ è€…æ¨¡å¼ä¸­éƒ½ä¸åº”è¯¥å‘å¤–éƒ¨æš´éœ²ã€‚</p>
<p>å¹¶ä¸æ˜¯è¯´è¿™ä¸ª <code>Builder</code> ä¸€æ— æ˜¯å¤„ï¼Œæ­£å¦‚æ ‡é¢˜å†™çš„é‚£æ ·ï¼Œè¿™ä¸ºé“¾å¼è°ƒç”¨æä¾›äº†ä¸€ç§æ–°æ€è·¯ã€‚</p>
<h1 id="10-è¡¥å……ï¼šStep-Builder"><a class="header-anchor" href="#10-è¡¥å……ï¼šStep-Builder"></a>10. è¡¥å……ï¼šStep Builder</h1>
<p>å‚è€ƒé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="http://www.svlada.com/step-builder-pattern/">Step builder pattern</a></p>
<p>å¯ä»¥è®¤ä¸º Step Builder æ˜¯æ™®é€š Builder çš„å‡çº§ç‰ˆï¼Œå®ƒç”¨äºé€æ­¥æ„å»ºå¤æ‚å¯¹è±¡ï¼Œæä¾›æµå¼æ¥å£æ¥åˆ›å»ºå…·æœ‰å¤§é‡å¯é…ç½®å‚æ•°çš„å¯¹è±¡ã€‚</p>
<p>Step Builder ä¸ä»…å…·æœ‰å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œå¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä¹Ÿæ›´åŠ æ¸…æ™°ï¼Œ <strong>ç”¨æˆ·åªä¼šçœ‹åˆ°ä¸‹ä¸€æ­¥å¯ç”¨çš„æ–¹æ³•ï¼Œ</strong> ç›´åˆ°æ„å»ºå¯¹è±¡çš„æ­£ç¡®æ—¶é—´æ‰èƒ½çœ‹åˆ°æ„å»ºæ–¹æ³•ã€‚</p>
<p>Step Builder å¹¶ä¸æ˜¯å®Œç¾çš„ï¼Œå®ç°å…¶åŠŸèƒ½çš„ä»£ç å¯è¯»æ€§è¾ƒä½ï¼Œå¹¶ä¸”æ²¡æœ‰ç±»ä¼¼ Lombok çš„ç¬¬ä¸‰æ–¹åº“æ¥å¸®åŠ©ä»£ç ç”Ÿæˆã€‚</p>
<h2 id="10-1-éœ€æ±‚åœºæ™¯"><a class="header-anchor" href="#10-1-éœ€æ±‚åœºæ™¯"></a>10.1 éœ€æ±‚åœºæ™¯</h2>
<p>ç°æœ‰ä¸€ <code>Email</code> ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Email</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> EmailAddress from;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; to;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; cc;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; bcc;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String subject;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ„é€  <code>Email</code> æ—¶ï¼Œå¸Œæœ›èƒ½æŒ‰ç…§ä¸€å®šçš„é¡ºåºå®Œæˆï¼Œæ¯”å¦‚ç¬¬ä¸€æ­¥åªèƒ½è®¾ç½® <code>from</code> çš„å€¼ï¼Œç¬¬äºŒæ­¥åªèƒ½è®¾ç½® <code>to</code> çš„å€¼ã€‚</p>
<p>æ„é€  <code>Email</code> çš„è¿‡ç¨‹å¦‚ä¸‹ï¼Œç´«è‰²è¡¨ç¤ºå¿…å¡«å€¼ï¼Œé»„è‰²è¡¨ç¤ºå¯é€‰å€¼ï¼š</p>
<p><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/DesignPatternImages/step-builder.png" alt="step-builder"></p>
<h2 id="10-2-ä»£ç å®ç°"><a class="header-anchor" href="#10-2-ä»£ç å®ç°"></a>10.2 ä»£ç å®ç°</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mofan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024/1/12 17:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@link</span> &lt;a href=&quot;http://www.svlada.com/step-builder-pattern/&quot;&gt;Step builder pattern&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Email</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> EmailAddress from;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; to;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; cc;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; bcc;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String subject;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> FromStep <span class="title function_">builder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Builder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">interface</span> <span class="title class_">FromStep</span> <span class="keyword">permits</span> Builder &#123;</span><br><span class="line">        ToStep <span class="title function_">from</span><span class="params">(EmailAddress from)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">interface</span> <span class="title class_">ToStep</span> <span class="keyword">permits</span> Builder &#123;</span><br><span class="line">        SubjectStep <span class="title function_">to</span><span class="params">(List&lt;EmailAddress&gt; to)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">interface</span> <span class="title class_">SubjectStep</span> <span class="keyword">permits</span> Builder &#123;</span><br><span class="line">        ContentStep <span class="title function_">subject</span><span class="params">(String subject)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">interface</span> <span class="title class_">ContentStep</span> <span class="keyword">permits</span> Builder &#123;</span><br><span class="line">        Build <span class="title function_">content</span><span class="params">(String content)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">interface</span> <span class="title class_">Build</span> <span class="keyword">permits</span> Builder &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ„é€  Email å¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Email <span class="title function_">build</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * cc æ˜¯å¯é€‰çš„</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Build <span class="title function_">cc</span><span class="params">(List&lt;EmailAddress&gt; cc)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * bcc ä¹Ÿæ˜¯å¯é€‰çš„</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Build <span class="title function_">bcc</span><span class="params">(List&lt;EmailAddress&gt; bcc)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Email</span><span class="params">(Builder builder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.from = builder.from;</span><br><span class="line">        <span class="built_in">this</span>.to = builder.to;</span><br><span class="line">        <span class="built_in">this</span>.cc = builder.cc;</span><br><span class="line">        <span class="built_in">this</span>.bcc = builder.bcc;</span><br><span class="line">        <span class="built_in">this</span>.subject = builder.subject;</span><br><span class="line">        <span class="built_in">this</span>.content = builder.content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> <span class="keyword">implements</span> <span class="title class_">FromStep</span>, ToStep, SubjectStep, ContentStep, Build &#123;</span><br><span class="line">        <span class="keyword">private</span> EmailAddress from;</span><br><span class="line">        <span class="keyword">private</span> List&lt;EmailAddress&gt; to;</span><br><span class="line">        <span class="keyword">private</span> String subject;</span><br><span class="line">        <span class="keyword">private</span> String content;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; cc = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> List&lt;EmailAddress&gt; bcc = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Email <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Email</span>(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> ToStep <span class="title function_">from</span><span class="params">(EmailAddress from)</span> &#123;</span><br><span class="line">            Objects.requireNonNull(from);</span><br><span class="line">            <span class="built_in">this</span>.from = from;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> SubjectStep <span class="title function_">to</span><span class="params">(List&lt;EmailAddress&gt; to)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (CollectionUtils.isEmpty(to)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">this</span>.to = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(to);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> ContentStep <span class="title function_">subject</span><span class="params">(String subject)</span> &#123;</span><br><span class="line">            Objects.requireNonNull(subject);</span><br><span class="line">            <span class="built_in">this</span>.subject = subject;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Build <span class="title function_">content</span><span class="params">(String content)</span> &#123;</span><br><span class="line">            Objects.requireNonNull(content);</span><br><span class="line">            <span class="built_in">this</span>.content = content;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Build <span class="title function_">cc</span><span class="params">(List&lt;EmailAddress&gt; cc)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.cc.addAll(CollectionUtils.emptyIfNull(cc));</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Build <span class="title function_">bcc</span><span class="params">(List&lt;EmailAddress&gt; bcc)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.bcc.addAll(CollectionUtils.emptyIfNull(bcc));</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBuild</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Email</span> <span class="variable">email</span> <span class="operator">=</span> Email.builder()</span><br><span class="line">            .from(EmailAddress.from(<span class="string">&quot;A&quot;</span>))</span><br><span class="line">            .to(List.of(EmailAddress.from(<span class="string">&quot;B&quot;</span>), EmailAddress.from(<span class="string">&quot;C&quot;</span>)))</span><br><span class="line">            .subject(<span class="string">&quot;subject&quot;</span>)</span><br><span class="line">            .content(<span class="string">&quot;content&quot;</span>)</span><br><span class="line">            .bcc(List.of(EmailAddress.from(<span class="string">&quot;D&quot;</span>)))</span><br><span class="line">            .cc(List.of(EmailAddress.from(<span class="string">&quot;E&quot;</span>)))</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    assertThat(email.getFrom().getAddress()).isEqualTo(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">    assertThat(email.getTo())</span><br><span class="line">            .map(EmailAddress::getAddress)</span><br><span class="line">            .containsExactly(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line">    assertThat(email.getSubject()).isEqualTo(<span class="string">&quot;subject&quot;</span>);</span><br><span class="line">    assertThat(email.getContent()).isEqualTo(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">    assertThat(email.getBcc()).map(EmailAddress::getAddress)</span><br><span class="line">            .singleElement()</span><br><span class="line">            .isEqualTo(<span class="string">&quot;D&quot;</span>);</span><br><span class="line">    assertThat(email.getCc()).map(EmailAddress::getAddress)</span><br><span class="line">            .singleElement()</span><br><span class="line">            .isEqualTo(<span class="string">&quot;E&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-3-æŸ¯é‡ŒåŒ–"><a class="header-anchor" href="#10-3-æŸ¯é‡ŒåŒ–"></a>10.3 æŸ¯é‡ŒåŒ–</h2>
<p>å‚è€ƒé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://java-design-patterns.com/patterns/currying/">Currying</a></p>
<p>ç™¾åº¦ç™¾ç§‘å¯¹ <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%9F%AF%E9%87%8C%E5%8C%96/10350525">æŸ¯é‡ŒåŒ–</a> çš„è§£é‡Šæ˜¯ï¼šåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p>
<p>ç»™å®šå‡½æ•°  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mtext>Â </mtext><mo>:</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>X</mi><mo>Ã—</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>â†’</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">f \ : \ (X \times Y) \rightarrow Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span></span>ï¼Œä½¿ç”¨ç§‘é‡ŒåŒ–å¾—åˆ°æ–°å‡½æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mtext>Â </mtext><mo>:</mo><mtext>Â </mtext><mi>X</mi><mo>â†’</mo><mo stretchy="false">(</mo><mi>Y</mi><mo>â†’</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h \ : \ X \rightarrow (Y \rightarrow Z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span></span></span></span> ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> ä¸­è·å–ä¸€ä¸ªå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªå°† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span> æ˜ å°„åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span></span> çš„å‡½æ•°ï¼Œå› æ­¤æœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(x)(y)=f(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>ã€‚</p>
<p>ä»¥ JavaScript ä¸ºä¾‹ï¼Œå­˜åœ¨åä¸º <code>add</code> çš„å‡½æ•°ï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œæœ€ç»ˆè¿”å›å®ƒä»¬çš„å’Œï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå¯¹ <code>add</code> å‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–ï¼Œé‚£ä¹ˆæœ‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curriedAdd</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">c</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> a + b + c</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">curriedAdd</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ Java8 å¼•å…¥ Lambda è¡¨è¾¾å¼åï¼ŒJava ä¹Ÿèƒ½å¾ˆè½»æ¾å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚</p>
<p>æ¯”å¦‚ç°åœ¨éœ€è¦æ„é€ ä¸€ä¸ª <code>Book</code> å¯¹è±¡ï¼Œéœ€è¦ä¾æ¬¡ä¼ å…¥ç±»å‹ã€ä½œè€…ã€ä¹¦åå’Œå‡ºç‰ˆæ—¶é—´ç­‰ä¿¡æ¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªä½œè€…ä¼šå‡ºç‰ˆè®¸å¤šåŒç±»å‹ã€ä¸åŒåç§°çš„ä¹¦ç±ï¼Œåœ¨æ„é€ è¿™æ ·çš„ <code>Book</code> å¯¹è±¡æ—¶ï¼Œå¦‚æœæ¯æ¬¡éƒ½ä¼ å…¥ç›¸åŒçš„ç±»å‹å’Œä½œè€…ä¿¡æ¯ä¼šä½¿å¾—ä»£ç å¾ˆå†—ä½™ï¼Œä¸ºæ­¤å¯ä»¥å‚è€ƒæŸ¯é‡ŒåŒ–ç¼–å†™å‡ºä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Genre</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¥‡å¹»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    FANTASY,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ææ€–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    HORROR,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§‘å¹»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SCI_FI,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Book</span><span class="params">(Genre genre, String author, String title, LocalDate publicationDate)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AddGenre <span class="title function_">builder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> genre</span><br><span class="line">                -&gt; author</span><br><span class="line">                -&gt; title</span><br><span class="line">                -&gt; publicationDate</span><br><span class="line">                -&gt; <span class="keyword">new</span> <span class="title class_">Book</span>(genre, author, title, publicationDate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AddGenre</span> &#123;</span><br><span class="line">        Book.AddAuthor <span class="title function_">withGenre</span><span class="params">(Genre genre)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AddAuthor</span> &#123;</span><br><span class="line">        Book.AddTitle <span class="title function_">withAuthor</span><span class="params">(String author)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AddTitle</span> &#123;</span><br><span class="line">        Book.AddPublicationDate <span class="title function_">withTitle</span><span class="params">(String title)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AddPublicationDate</span> &#123;</span><br><span class="line">        Book <span class="title function_">withPublicationDate</span><span class="params">(LocalDate publicationDate)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨å¯ä»¥è¿™æ ·æ„é€  <code>Book</code> å¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// Defining genre book functions</span></span><br><span class="line">    Book.<span class="type">AddAuthor</span> <span class="variable">fantasyBookFunc</span> <span class="operator">=</span> Book.builder().withGenre(Genre.FANTASY);</span><br><span class="line">    Book.<span class="type">AddAuthor</span> <span class="variable">horrorBookFunc</span> <span class="operator">=</span> Book.builder().withGenre(Genre.HORROR);</span><br><span class="line">    Book.<span class="type">AddAuthor</span> <span class="variable">scifiBookFunc</span> <span class="operator">=</span> Book.builder().withGenre(Genre.SCI_FI);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Defining author book functions</span></span><br><span class="line">    Book.<span class="type">AddTitle</span> <span class="variable">kingFantasyBooksFunc</span> <span class="operator">=</span> fantasyBookFunc.withAuthor(<span class="string">&quot;Stephen King&quot;</span>);</span><br><span class="line">    Book.<span class="type">AddTitle</span> <span class="variable">kingHorrorBooksFunc</span> <span class="operator">=</span> horrorBookFunc.withAuthor(<span class="string">&quot;Stephen King&quot;</span>);</span><br><span class="line">    Book.<span class="type">AddTitle</span> <span class="variable">rowlingFantasyBooksFunc</span> <span class="operator">=</span> fantasyBookFunc.withAuthor(<span class="string">&quot;J.K. Rowling&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Creates books by Stephen King (horror and fantasy genres)</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">shining</span> <span class="operator">=</span> kingHorrorBooksFunc.withTitle(<span class="string">&quot;The Shining&quot;</span>)</span><br><span class="line">        .withPublicationDate(LocalDate.of(<span class="number">1977</span>, <span class="number">1</span>, <span class="number">28</span>));</span><br><span class="line">    <span class="type">Book</span> <span class="variable">darkTower</span> <span class="operator">=</span> kingFantasyBooksFunc.withTitle(<span class="string">&quot;The Dark Tower: Gunslinger&quot;</span>)</span><br><span class="line">        .withPublicationDate(LocalDate.of(<span class="number">1982</span>, <span class="number">6</span>, <span class="number">10</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Creates fantasy books by J.K. Rowling</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">chamberOfSecrets</span> <span class="operator">=</span> rowlingFantasyBooksFunc.withTitle(<span class="string">&quot;Harry Potter and the Chamber of Secrets&quot;</span>)</span><br><span class="line">        .withPublicationDate(LocalDate.of(<span class="number">1998</span>, <span class="number">7</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create sci-fi books</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">dune</span> <span class="operator">=</span> scifiBookFunc.withAuthor(<span class="string">&quot;Frank Herbert&quot;</span>)</span><br><span class="line">        .withTitle(<span class="string">&quot;Dune&quot;</span>)</span><br><span class="line">        .withPublicationDate(LocalDate.of(<span class="number">1965</span>, <span class="number">8</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="type">Book</span> <span class="variable">foundation</span> <span class="operator">=</span> scifiBookFunc.withAuthor(<span class="string">&quot;Isaac Asimov&quot;</span>)</span><br><span class="line">        .withTitle(<span class="string">&quot;Foundation&quot;</span>)</span><br><span class="line">        .withPublicationDate(LocalDate.of(<span class="number">1942</span>, <span class="number">5</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// --snip--</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://mofan212.github.io">é»˜çƒ¦</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://mofan212.github.io/posts/Design-Pattern-Builder-Pattern/">https://mofan212.github.io/posts/Design-Pattern-Builder-Pattern/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://mofan212.github.io" target="_blank">Mofan</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/Design-Pattern/">Design-Pattern</a></div><div class="post-share"><div class="social-share" data-image="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/81.png" data-sites="wechat,qq,weibo,facebook,x"></div><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/AliPay.png" target="_blank"><img class="post-qr-code-img" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/AliPay.png" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li><li class="reward-item"><a href="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/WeChatPay.png" target="_blank"><img class="post-qr-code-img" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/WeChatPay.png" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/Using-Java-To-Manipulate-Excel/" title="ä½¿ç”¨ Java æ“ä½œ Excel"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/80.png" onerror="onerror=null;src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">ä½¿ç”¨ Java æ“ä½œ Excel</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Java æ¥æ“ä½œ Excel ä»¥å®ç°æ•°æ®çš„è¯»å–ä¸æŠ¥è¡¨çš„å¯¼å‡ºã€‚</div></div></div></a><a class="pagination-related" href="/posts/MapStruct-User-Manual/" title="MapStruct ä½¿ç”¨æ‰‹å†Œï¼ˆæ›´æ–°ä¸­ï¼‰"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/82.png" onerror="onerror=null;src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">MapStruct ä½¿ç”¨æ‰‹å†Œï¼ˆæ›´æ–°ä¸­ï¼‰</div></div><div class="info-2"><div class="info-item-1">MapStruct æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå™¨ï¼Œå®ƒåŸºäºçº¦å®šè€Œéé…ç½®çš„æ–¹æ³•ï¼Œæå¤§åœ°ç®€åŒ–äº† Java Bean ä¹‹é—´çš„è½¬æ¢ã€‚</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/Design-Pattern-Template-Method-Pattern/" title="ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/94.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-04</div><div class="info-item-2">ã€è®¾è®¡æ¨¡å¼ã€‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä¸»è¦å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼è¿›è¡Œäº†ä»‹ç»ã€‚</div></div></div></a><a class="pagination-related" href="/posts/Design-Pattern-Adapter-Pattern/" title="ã€è®¾è®¡æ¨¡å¼ã€‘é€‚é…å™¨æ¨¡å¼"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/89.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-18</div><div class="info-item-2">ã€è®¾è®¡æ¨¡å¼ã€‘é€‚é…å™¨æ¨¡å¼</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä¸»è¦å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„é€‚é…å™¨æ¨¡å¼è¿›è¡Œäº†ä»‹ç»ï¼Œå¹¶åœ¨æœ€åå°†å…¶æ‹“å±•ä¸ºåŒå‘é€‚é…å™¨æ¨¡å¼ã€‚</div></div></div></a><a class="pagination-related" href="/posts/Design-Pattern-Singleton-Pattern/" title="ã€è®¾è®¡æ¨¡å¼ã€‘å•ä¾‹æ¨¡å¼"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/112.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-10</div><div class="info-item-2">ã€è®¾è®¡æ¨¡å¼ã€‘å•ä¾‹æ¨¡å¼</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä¸»è¦å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼è¿›è¡Œäº†ä»‹ç»ã€‚</div></div></div></a><a class="pagination-related" href="/posts/Design-Pattern-Observer-Pattern/" title="ã€è®¾è®¡æ¨¡å¼ã€‘è§‚å¯Ÿè€…æ¨¡å¼"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/91.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-11</div><div class="info-item-2">ã€è®¾è®¡æ¨¡å¼ã€‘è§‚å¯Ÿè€…æ¨¡å¼</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼åŠå…¶å®ç°ä¸åº”ç”¨è¿›è¡Œäº†ä»‹ç»ã€‚</div></div></div></a><a class="pagination-related" href="/posts/Combinator-Pattern/" title="Combinator Pattern"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/149.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-28</div><div class="info-item-2">Combinator Pattern</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ Java ä¸­ä½¿ç”¨ Combinator Patternã€‚</div></div></div></a><a class="pagination-related" href="/posts/Design-Pattern-Decorator-Pattern/" title="ã€è®¾è®¡æ¨¡å¼ã€‘è£…é¥°å™¨æ¨¡å¼"><img class="cover" src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/93.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-29</div><div class="info-item-2">ã€è®¾è®¡æ¨¡å¼ã€‘è£…é¥°å™¨æ¨¡å¼</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä¸»è¦å¯¹ Java è®¾è®¡æ¨¡å¼ä¸­çš„è£…é¥°å™¨æ¨¡å¼è¿›è¡Œäº†ä»‹ç»ï¼Œå¹¶å¯¹å…¶åœ¨ JDK ä¸­çš„åº”ç”¨è¿›è¡Œäº†ç®€å•çš„è®²è§£ã€‚</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/avatar.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">é»˜çƒ¦</div><div class="author-info-description">å½©ç¬”çš„æ‰“æ€ªå‡çº§ä¹‹è·¯...</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">174</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">54</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">37</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mofan212"><i class="fab fa-github"></i><span>follow me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:cy.mofan@foxmail.com" target="_blank" title="é‚®ç®±"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æœ¬ç«™æ‰€æœ‰åšæ–‡å‡æ˜¯åšä¸»çš„å­¦ä¹ ç¬”è®°ä¸ä¸ªäººç†è§£ã€‚<strong><font style="color:red">é™¤ç‰¹åˆ«æ³¨æ˜å¤–ï¼Œ</font>å¦‚éœ€è½¬è½½ï¼Œè¯·åœ¨æ–‡ç« å¤´éƒ¨é†’ç›®å¤„é™„å¸¦åŸæ–‡é“¾æ¥å¹¶<a href="./mine/" style="color:#49B1F5;text-decoration:underline">å‘ŠçŸ¥æˆ‘</a></strong>ä½ å°†è½¬è½½ã€‚ğŸ˜Š</br><strong><font style="color:red">ä¸¥ç¦æœªéµå¾ªè§„èŒƒçš„è½¬è½½ã€‚</font></strong>ğŸ˜¡</br><strong>æ­»å»çš„è¯„è®ºç³»ç»Ÿå¤æ´»å•¦ï¼æ¬¢è¿åˆ°ç•™è¨€æ¿ç•…æ‰€æ¬²è¨€ï¼</strong>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´é«˜æ•ˆçš„<a target="_blank" href="https://space.bilibili.com/23658864/dynamic" style="color:#49B1F5;text-decoration:underline"> å“”å“©å“”å“©ç§ä¿¡ </a>æˆ–<a href="mailto:cy.mofan@foxmail.com" style="color:#49B1F5;text-decoration:underline" target="_blank">é‚®ç®±</a>ã€‚ ğŸ˜‰</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E7%89%B9%E7%82%B9"><span class="toc-text">1. æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">2. é€‚ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">3. è§£å†³çš„é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E9%87%8D%E5%8F%A0%E6%9E%84%E9%80%A0%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.1 é‡å æ„é€ å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-JavaBeans-%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.2 JavaBeans æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-text">4. å»ºé€ è€…æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"><span class="toc-text">4.1 å¦‚ä½•ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA"><span class="toc-text">4.2 ä»£ç å±•ç¤º</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E7%BB%8F%E5%85%B8%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-text">5. ç»å…¸å»ºé€ è€…æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%A7%92%E8%89%B2%E4%B8%8E%E7%BB%93%E6%9E%84"><span class="toc-text">5.1 è§’è‰²ä¸ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA"><span class="toc-text">5.2 ä»£ç å±•ç¤º</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Lombok-%E4%B8%AD%E7%9A%84-Builder"><span class="toc-text">6. Lombok ä¸­çš„ @Builder</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">6.1 åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%94%B9%E8%BF%9B"><span class="toc-text">6.2 è¿›ä¸€æ­¥æ”¹è¿›</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E7%9A%84%E6%8B%93%E5%B1%95"><span class="toc-text">6.3 å¯ä»¥è¿›è¡Œçš„æ‹“å±•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E4%BB%A3%E7%A0%81%E5%85%BC%E5%AE%B9"><span class="toc-text">6.4 ä»£ç å…¼å®¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%9C%A8%E7%B1%BB%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-text">7. åœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E6%80%BB%E7%BB%93"><span class="toc-text">8. æ€»ç»“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E8%A1%A5%E5%85%85%EF%BC%9A%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E6%96%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">9. è¡¥å……ï¼šé“¾å¼è°ƒç”¨æ–°æ€è·¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E8%A1%A5%E5%85%85%EF%BC%9AStep-Builder"><span class="toc-text">10. è¡¥å……ï¼šStep Builder</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E9%9C%80%E6%B1%82%E5%9C%BA%E6%99%AF"><span class="toc-text">10.1 éœ€æ±‚åœºæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">10.2 ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="toc-text">10.3 æŸ¯é‡ŒåŒ–</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/Something-About-Blog/" title="åšå®¢æ­å»ºä¸ç»´æŠ¤"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/42.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="åšå®¢æ­å»ºä¸ç»´æŠ¤"/></a><div class="content"><a class="title" href="/posts/Something-About-Blog/" title="åšå®¢æ­å»ºä¸ç»´æŠ¤">åšå®¢æ­å»ºä¸ç»´æŠ¤</a><time datetime="2026-01-24T16:00:00.000Z" title="æ›´æ–°äº 2026-01-25 00:00:00">2026-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Java-Memory-Model/" title="Java å†…å­˜æ¨¡å‹"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/174.png" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="Java å†…å­˜æ¨¡å‹"/></a><div class="content"><a class="title" href="/posts/Java-Memory-Model/" title="Java å†…å­˜æ¨¡å‹">Java å†…å­˜æ¨¡å‹</a><time datetime="2026-01-02T16:00:00.000Z" title="æ›´æ–°äº 2026-01-03 00:00:00">2026-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Java-Bytecode-And-Class-Loading/" title="å­—èŠ‚ç ä¸ç±»åŠ è½½"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/173.png" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="å­—èŠ‚ç ä¸ç±»åŠ è½½"/></a><div class="content"><a class="title" href="/posts/Java-Bytecode-And-Class-Loading/" title="å­—èŠ‚ç ä¸ç±»åŠ è½½">å­—èŠ‚ç ä¸ç±»åŠ è½½</a><time datetime="2026-01-01T16:00:00.000Z" title="æ›´æ–°äº 2026-01-02 00:00:00">2026-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Class-Resource-Loading-In-Java/" title="Java çš„ç±»èµ„æºåŠ è½½"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/103.png" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="Java çš„ç±»èµ„æºåŠ è½½"/></a><div class="content"><a class="title" href="/posts/Class-Resource-Loading-In-Java/" title="Java çš„ç±»èµ„æºåŠ è½½">Java çš„ç±»èµ„æºåŠ è½½</a><time datetime="2026-01-01T16:00:00.000Z" title="æ›´æ–°äº 2026-01-02 00:00:00">2026-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Annotation-And-Reflection/" title="æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/20.jpg" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„"/></a><div class="content"><a class="title" href="/posts/Annotation-And-Reflection/" title="æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„">æ³¨è§£ã€ç±»çš„åŠ è½½ã€åå°„</a><time datetime="2026-01-01T16:00:00.000Z" title="æ›´æ–°äº 2026-01-02 00:00:00">2026-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ren-zhi-jue-xing/" title="è®¤çŸ¥è§‰é†’"><img src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/loading.gif" data-lazy-src="https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/ArticleCover/172.webp" onerror="this.onerror=null;this.src='https://mofan-blog-pics.oss-cn-chengdu.aliyuncs.com/myblog/404.jpg'" alt="è®¤çŸ¥è§‰é†’"/></a><div class="content"><a class="title" href="/posts/ren-zhi-jue-xing/" title="è®¤çŸ¥è§‰é†’">è®¤çŸ¥è§‰é†’</a><time datetime="2025-12-28T16:00:00.000Z" title="æ›´æ–°äº 2025-12-29 00:00:00">2025-12-29</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2020 - 2026 By é»˜çƒ¦</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="https://testingcf.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://testingcf.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://testingcf.jsdelivr.net/npm/vanilla-lazyload@latest/dist/lazyload.iife.min.js"></script><script src="https://testingcf.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://testingcf.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (false) {
      await btf.getScript('https://testingcf.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://gcore.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://testingcf.jsdelivr.net/gh/mofan212/blog-static-resources@master/js/mine.min.js"></script><script src="/js/tip_portal.js"></script><script defer="defer" id="ribbon" src="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="click-show-text" src="https://testingcf.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="Azathoth,Yog-Sothoth,Shub-Niggurath,Nyarlathotep,Cthulhu,Hastur,Abhoth,Ghroth,Tsathoggua,Cthugha,Deep Ones,Dagon,Chaugnar Faugn,Mordiggian,Shoggoth,Old One,Mi-Go,Great Race of Yith,Flying Polyp,Hounds of Tindalos,Dhole" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="docsearch-wrap"><div id="docsearch" style="display:none"></div><link rel="stylesheet" href="https://testingcf.jsdelivr.net/npm/@docsearch/css/dist/style.min.css"/><script src="https://testingcf.jsdelivr.net/npm/@docsearch/js/dist/umd/index.min.js"></script><script>(() => {
  docsearch(Object.assign({
    appId: 'BAFEL7A6K1',
    apiKey: '89fcb5961984c5c054bf04149f345f38',
    indexName: 'mofan212io',
    container: '#docsearch',
    placeholder: 'è¾“å…¥å…³é”®å­—è¿›è¡Œæœç´¢',
  }, null))

  const handleClick = () => {
    document.querySelector('.DocSearch-Button').click()
  }

  const searchClickFn = () => {
    btf.addEventListenerPjax(document.querySelector('#search-button > .search'), 'click', handleClick)
  }

  searchClickFn()
  window.addEventListener('pjax:complete', searchClickFn)
})()</script></div></div></body></html>